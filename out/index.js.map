{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","index.js","lib/action-names.js","lib/app.js","lib/components/device-form.js","lib/components/device-list.js","lib/components/device-wall-control.js","lib/components/device-wall-picker.js","lib/components/list.js","lib/components/mode-toggler.js","lib/components/preset-form.js","lib/components/preset-list.js","lib/components/ui.js","lib/components/utils.js","lib/controller/view-sync.js","lib/controller/wall.js","lib/device-wall-fsm.js","lib/devices.json","lib/presets.json","lib/reducers.js","lib/scroller.js","lib/tween.js","lib/utils.js","lib/view/assets/mount.js","lib/view/assets/poll-document.js","lib/view/breakpoints.js","lib/view/device-wall.js","lib/view/view.js","node_modules/browserify/node_modules/browser-resolve/empty.js","node_modules/browserify/node_modules/process/browser.js","node_modules/eventemitter3/index.js","node_modules/page-sync/index.js","node_modules/page-sync/lib/events/form.js","node_modules/page-sync/lib/events/hover.js","node_modules/page-sync/lib/events/index.js","node_modules/page-sync/lib/events/location.js","node_modules/page-sync/lib/events/mouse.js","node_modules/page-sync/lib/events/scroll.js","node_modules/page-sync/lib/matched-css-rules.js","node_modules/page-sync/lib/ui-events/mouse.js","node_modules/page-sync/lib/xpath.js","node_modules/redux-logger/lib/index.js","node_modules/redux/lib/applyMiddleware.js","node_modules/redux/lib/bindActionCreators.js","node_modules/redux/lib/combineReducers.js","node_modules/redux/lib/compose.js","node_modules/redux/lib/createStore.js","node_modules/redux/lib/index.js","node_modules/redux/lib/utils/isPlainObject.js","node_modules/redux/lib/utils/mapValues.js","node_modules/redux/lib/utils/pick.js","node_modules/state-machine/index.js","node_modules/tiny-react/index.js","node_modules/tiny-react/lib/create-component.js","node_modules/tiny-react/lib/event-delegator.js","node_modules/tiny-react/lib/main-loop.js","node_modules/tiny-react/lib/render.js","node_modules/tiny-react/lib/xpath.js","node_modules/tiny-react/node_modules/virtual-dom/create-element.js","node_modules/tiny-react/node_modules/virtual-dom/diff.js","node_modules/tiny-react/node_modules/virtual-dom/h.js","node_modules/tiny-react/node_modules/virtual-dom/index.js","node_modules/tiny-react/node_modules/virtual-dom/node_modules/browser-split/index.js","node_modules/tiny-react/node_modules/virtual-dom/node_modules/ev-store/index.js","node_modules/tiny-react/node_modules/virtual-dom/node_modules/ev-store/node_modules/individual/index.js","node_modules/tiny-react/node_modules/virtual-dom/node_modules/ev-store/node_modules/individual/one-version.js","node_modules/tiny-react/node_modules/virtual-dom/node_modules/global/document.js","node_modules/tiny-react/node_modules/virtual-dom/node_modules/is-object/index.js","node_modules/tiny-react/node_modules/virtual-dom/node_modules/x-is-array/index.js","node_modules/tiny-react/node_modules/virtual-dom/patch.js","node_modules/tiny-react/node_modules/virtual-dom/vdom/apply-properties.js","node_modules/tiny-react/node_modules/virtual-dom/vdom/create-element.js","node_modules/tiny-react/node_modules/virtual-dom/vdom/dom-index.js","node_modules/tiny-react/node_modules/virtual-dom/vdom/patch-op.js","node_modules/tiny-react/node_modules/virtual-dom/vdom/patch.js","node_modules/tiny-react/node_modules/virtual-dom/vdom/update-widget.js","node_modules/tiny-react/node_modules/virtual-dom/virtual-hyperscript/hooks/ev-hook.js","node_modules/tiny-react/node_modules/virtual-dom/virtual-hyperscript/hooks/soft-set-hook.js","node_modules/tiny-react/node_modules/virtual-dom/virtual-hyperscript/index.js","node_modules/tiny-react/node_modules/virtual-dom/virtual-hyperscript/parse-tag.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/handle-thunk.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/is-thunk.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/is-vhook.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/is-vnode.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/is-vtext.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/is-widget.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/version.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/vnode.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/vpatch.js","node_modules/tiny-react/node_modules/virtual-dom/vnode/vtext.js","node_modules/tiny-react/node_modules/virtual-dom/vtree/diff-props.js","node_modules/tiny-react/node_modules/virtual-dom/vtree/diff.js","node_modules/uuid/rng-browser.js","node_modules/uuid/uuid.js","node_modules/xtend/immutable.js","node_modules/xtend/mutable.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","reView","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","wall","reel","app","undefined","_app","_app2","_breakpoints","_breakpoints2","_deviceWall","_deviceWall2","./lib/app","./lib/view/breakpoints","./lib/view/device-wall",2,"DEVICE_WALL","SET_SELECTED","SET_STATE","TOGGLE_VISIBILITY","USER","SAVE_DEVICE","REMOVE_DEVICE","SAVE_PRESET","REMOVE_PRESET","UI","SET_MODE",3,"dispatch","data","store","subscribe","onChange","select","currentState","handler","nextState","getState","getStateValue","key","arguments","split","reduce","state","part","createUI","ui","_tinyReact2","render","_ui2","update","target","getItems","lookup","userData","user","userItems","map","item","_extends","userDefined","editable","concat","filter","id","sort","sortByTitle","b","title","assign","source","prototype","hasOwnProperty","deviceWallFSM","_tinyReact","_redux","_reduxLogger","_reduxLogger2","_reducers","_reducers2","_devices","_devices2","_presets","_presets2","_deviceWallFsm","_deviceWallFsm2","_ui","logger","createStoreWithMiddleware","applyMiddleware","createStore","devices","presets","mode","deviceWallPicker","stateData","visible","display","type","width","height","transition","./components/ui","./device-wall-fsm","./devices","./presets","./reducers","redux","redux-logger","tiny-react",4,"_defineProperty","enumerable","configurable","writable","onSubmit","evt","preventDefault","submitDeviceEdit","onReset","cancelDeviceEdit","onInput","elem","updateDeviceEditData","name","_utils","fid","component","props","action","className","cl","onsubmit","onreset","oninput","htmlFor","required","min","max","../app","./utils",5,"onClick","pickDevice","onEdit","stopPropagation","parseItemAction","editDevice","removeDevice","getAttribute","_split","_split2","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","TypeError","_list","_list2","onItemEdit","onItemClick","./list",6,"togglePopup","_actionNames","onclick","../action-names",7,"addDevice","addPreset","getDeviceList","selected","fsmData","items","info","markSelected","getPresetList","indexOf","itemsLookup","_deviceList","_deviceList2","_deviceForm","_deviceForm2","_presetList","_presetList2","_presetForm","_presetForm2","EMPTY_OBJECT","stateName","deviceEditMode","presetEditMode","deviceData","presetData","deviceList","presetList","hidden","./device-form","./device-list","./preset-form","./preset-list",8,"data-mode","controls","data-action","checked",9,"modes",10,"submitPresetEdit","cancelPresetEdit","updatePresetEditData","devicesElem","d",11,"pickPreset","editPreset","removePreset",12,"_deviceWallControl","_deviceWallControl2","_deviceWallPicker","_deviceWallPicker2","_modeToggler","_modeToggler2","./device-wall-control","./device-wall-picker","./mode-toggler",13,"_len","names","_key","Boolean","join",14,"_interopRequireWildcard","newObj","viewForElement","views","il","element","options","defaultOptions","docs","hostView","host","guests","controlGuests","event","forEach","guest","resetHost","off","dispose","loadDocument","view","getDocument","then","doc","ix","assignDoc","removeGuest","document","pageSync","on","promoteToHost","curIx","oldIx","onUnload","addEventListener","isMounted","once","destroy","removeEventListener","_pageSync","sameParent","page-sync",15,"readState","layer","viewport","parentNode","viewportWidth","offsetWidth","viewportHeight","offsetHeight","minScale","parseFloat","maxScale","stopEvent","clampScale","scale","clamp","renderState","x","y","dw","dh","minX","Math","maxX","minY","maxY","setTransform","dragHandler","ownerDocument","startX","pageX","startY","pageY","onMouseMove","onMouseUp","zoom","mouseX","mouseY","mx","my","cw","ch","tw","th","dx","dy","createControlLayer","createElement","drag","captureMousePos","layerX","layerY","scrollController","zoomHandler","scrollDelta","scroller","scrollWidth","scrollLeft","inner","style","appendChild","_scroller2","anim","show","opacity","sync","animateOpacity","scrollPos","round","abs","scrollTop","stop","removeElement","reverse","complete","_tween2","duration","easing","step","pos","control","enterControlState","keyCode","activateKey","exitControlState","focusOnDoc","defaultView","focus","_scroller","_tween","../scroller","../tween","../utils",16,"goToInitialState","_uuid2","v1","device","findItem","preset","updateCurrentStateData","curData","current","storeKey","itemId","_stateMachine2","initial","submit","cancel","slice","splice","handle","reset","_stateMachine","_uuid","./action-names","state-machine","uuid",17,"user-agent","dpi",18,19,"removeItem","combineReducers",20,"setup","container","content","sizer","scrollOverrideTimer","prevState","scheduleScrollReset","clearTimeout","setTimeout","restoreScroll","overrideScroll","zIndex","scrollAmount","calculateScrollAmount","syncScrollPosition","getScrollState","left","top","scrollPercent","leftPercent","topMax","topPercent","leftMax","updateScroller","curScroll","classList","remove","add","updateScrollerSize","onWheel","onMouseWheel","deltaX","wheelDeltaX","detail","deltaY","wheelDeltaY","onScroll","leftViewport","topViewport","scrollHeight","paddingRight","paddingBottom","deltaMode","kPixelsPerLineStep","calculatePageScrollAmount","pageSize","minPageStep","pageStep",21,"_classCallCheck","instance","Constructor","extend","prop","defaults","_all","anims","mainLoop","tween","opt","now","Date","filtered","animating","startTime","infinite","endTime","requestAnimationFrame","addToQueue","_createClass","defineProperties","descriptor","protoProps","staticProps","Tween","dummyFn","idCounter","delay","start","autostart","easings","linear","c","inQuad","outQuad","inOutQuad","inCubic","outCubic","inOutCubic","inExpo","pow","outExpo","inOutExpo","inElastic","p","PI","asin","sin","outElastic","inOutElastic","inBack","outBack","inOutBack","inBounce","outBounce","inOutBounce","outHard","ts","tc","_id",22,"removeChild","testPropAll","propCache","el","prefixes","capitalize","str","charAt","toUpperCase","substr","replace","capProp","prefix","testProp","setStyle","css","transform","keys","k","val","unitless","transformProp","_typeof","strVal","toFixed","units","isOldOpera","Infinity","debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","apply","callNow","measureScrollWidth","_scrollerWidth","outer","cssText","body","constructor","skew","skewX","skewY","rotate","rotateX","rotateY","toString","opera",23,"v","mount","Promise","resolve",24,"hasValidDocument","iframe","contentDocument","defaultSrc","readyState","URL","poll","pollTimer","pollLoop","resetTimer","queue","q","waitTimeout","reject",25,"animate","vpWidth","innerWidth","visibleViews","rect","getBoundingClientRect","right","animOptions","animStep","scrollFilter","ctx","nodeType","contains","url","specs","scroll","spec","_view2","onResizeStart","onResizeEnd","_mount2","_viewSync2","_view","_viewSync","_mount","../controller/view-sync","./assets/mount","./view",26,"calculateOptimalWallSize","overallWidth","sum","maxViewWidth","delta","sizes","attempts","calculateWallSize","innerHeight","maxWidth","row","rows","rowWidth","rowSizes","maxItemsInRow","getRect","all","rnd","ry","z","rpos","random","controller","area","itemMargin","itemSizes","size","setAttribute","onResize","margin","_wall2","_wall","../controller/wall",27,"_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","resize","setupResizeHandle","pointerStart","viewWidth","parseInt","onMove","onEnd","emit","watchDocument","wnd","onunload","waitForLoad","onload","getPageViewport","meta","querySelector","parseViewport","defaultViewport","parts","trim","shift","toLowerCase","isNaN","ViewError","_eventemitter","_eventemitter2","_pollDocument","_pollDocument2","minWidth","defaultViewportWidth","usePageViewport","View","_EventEmitter","_this","getPrototypeOf","_iframe","_downscale","label","_resizeHandle","refresh","autoMount","_updateElementSize","_width","_height","maxVp","maxViewportWidth","unit","copy","_updateIframeSize","realWidth","test","realHeight","widthRatio","race","src","defaultDoc","unmount","get","valueOf","set","Dimention","equals","originalWidth","_Error","message","_this2","m","match","_ref","./assets/poll-document","eventemitter3",28,29,"cleanUpNextTick","draining","currentQueue","queueIndex","drainQueue","len","run","Item","fun","array","noop","process","nextTick","browser","env","argv","version","versions","addListener","removeListener","removeAllListeners","binding","cwd","chdir","dir","umask",30,"EE","fn","EventEmitter","_events","listeners","exists","available","ee","a1","a2","a3","a4","a5","j","listener","events","setMaxListeners","prefixed",31,"out","proxy","bindings","eventList","./lib/events",32,"serialize","xpath","supportedEvents","find","multiple","setMultipleValues","getMultipleValues","toArray","values","_xpath","../xpath",33,"hoverIn","hoverOut","getHoverStyles","hover","original","cacheKey","checkExpires","entry","styleCache","expires","originalStyle","getComputedStyle","_matchedCssRules2","rule","elemValue","getPropertyValue","originalValue","hoverValue","cacheExpire","_matchedCssRules","../matched-css-rules",34,"form","mouse","location","_location","_scroll","_mouse","_form","_hover","./form","./hover","./location","./mouse","./scroll",35,"href",36,"isImplicitInputClick","nodeName","uiMouse","_xtend2","nativeEvent","unserialize","allowGuestEvent","dispatchEvent","offsetX","offsetY","w","h","_xtend","../ui-events/mouse","xtend",37,"scrollingElement","getScrollData","_getViewportSize","getViewportSize","_getViewportSize2","vpHeight","srcScrollWidth","srcScrollHeight","posX","posY","isPageScroller","scrollTo","_getViewportSize3","_getViewportSize4","_scrollOffset","scrollOffset","_scrollOffset2","clientWidth","clientHeight","pageXOffset","pageYOffset",38,"getSheetRules","stylesheet","disabled","sheetMedia","media","mediaText","matchMedia","matches","cssRules","calculateScore","selector","score","_find","PSEUDO_ELEMENTS_RE","PSEUDO_CLASSES_RE","ATTR_RE","ID_RE","CLASS_RE","ELEMENT_RE","getSpecificityScore","selectorText","selectors","matchesSelector","sortBySpecificity","rules","matcher","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","msMatchesSelector","matchSelectorWithPseudo","pseudo","string","re","list","sheet","styleSheets","styleSheet",39,"copyProps","_getElementSize","getElementSize","_getElementSize2","elWidth","elHeight","screenCoords","localCoords","_getElementSize3","_getElementSize4","payload","coordsLookup","arg","createEvent","MouseEvent","e1","DOM3MouseEventArgs","initMouseEvent","e2","isDocument","documentElement",40,"unshift","samePreviousSiblings","_parts$shift$split","_parts$shift$split2","index","nodeByIndex","childNodes","previousSibling","node","nodeset","acc",41,"createLogger","printBuffer","logBuffer","logEntry","started","error","took","nextEntry","formattedAction","actionTransformer","time","isCollapsed","collapsed","formattedTime","formatTime","titleCSS","colors","groupCollapsed","group","log","level","groupEnd","_options$level","_options$logger","console","_options$logErrors","logErrors","predicate","_options$duration","_options$timestamp","transformer","_options$stateTransfo","stateTransformer","_options$actionTransf","actn","_options$errorTransfo","errorTransformer","_options$colors","timer","returnedValue","repeat","times","pad","num","maxLength","getHours","getMinutes","getSeconds","getMilliseconds","performance",42,"middlewares","reducer","initialState","_dispatch","chain","middlewareAPI","middleware","_compose2","_compose","./compose",43,"bindActionCreator","actionCreator","bindActionCreators","actionCreators","_utilsMapValues2","_utilsMapValues","./utils/mapValues",44,"getUndefinedStateErrorMessage","actionType","actionName","getUnexpectedStateShapeWarningMessage","inputState","reducers","reducerKeys","argumentName","_createStore","ActionTypes","INIT","_utilsIsPlainObject2","unexpectedKeys","assertReducerSanity","substring","sanityError","finalReducers","_utilsPick2","warningMessage","hasChanged","finalState","previousStateForKey","nextStateForKey","errorMessage","_utilsIsPlainObject","_utilsPick","./createStore","./utils/isPlainObject","./utils/pick",45,"compose","funcs","rest","reduceRight","composed",46,"isSubscribed","isDispatching","currentReducer","replaceReducer","nextReducer",47,"isCrushed","_createStore2","_combineReducers","_combineReducers2","_bindActionCreators","_bindActionCreators2","_applyMiddleware","_applyMiddleware2","./applyMiddleware","./bindActionCreators","./combineReducers",48,"isPlainObject","proto","fnToString","objStringValue","Function",49,"mapValues",50,"pick",51,"FSM","states","_current","_currenAction","_inExitHandler","mixin","curState","newState","_exit","from","to","_enter","eventPayload","xtend/mutable",52,"children","__tr__render","attributes","reData","./lib/create-component","./lib/render","virtual-dom/h",53,"renderComponent","__tr","lastRendered","isFn","shouldUpdate","willMount","willUpdate","didUpdate","didMount","bind","mixins","renderer",54,"createXpathMap","tree","xpathMap","flattenTree","rootHandlers","extractHandlers","nameCount","child","tagName","path","handlers","properties","nameLower","isEvent","_nameLookup","delegateEvent","root","proxyEvent","uniqueNames","delegator","./xpath",55,"asap","delegateEvents","opts","inRenderingTransaction","diff","_diff","redrawScheduled","redraw","newTree","createOnly","patches","patch","initialTree","./event-delegator","_process",56,"vdom","main","./main-loop","virtual-dom",57,58,"./vdom/create-element.js",59,"./vtree/diff.js",60,"./virtual-hyperscript/index.js",61,"VNode","VText","./create-element.js","./diff.js","./h.js","./patch.js","./vnode/vnode.js","./vnode/vtext.js",62,"undef","nativeSplit","String","compliantExecNpcg","exec","separator","limit","separator2","lastIndex","lastLength","output","flags","ignoreCase","multiline","extended","sticky","lastLastIndex","RegExp",63,"EvStore","hash","hashKey","OneVersionConstraint","MY_VERSION","individual/one-version",64,"Individual",65,"OneVersion","moduleName","defaultValue","enforceKey","versionValue","./index.js",66,"topLevel","minDoc","doccy","min-document",67,68,"nativeIsArray",69,"./vdom/patch.js",70,"applyProperties","previous","propName","propValue","removeProperty","isHook","hook","isObject","patchObject","previousValue","unhook","attrName","removeAttribute","getPrototype","replacer","attrValue","../vnode/is-vhook.js","is-object",71,"vnode","warn","handleThunk","isWidget","init","isVText","createTextNode","text","isVNode","namespace","createElementNS","childNode","../vnode/handle-thunk.js","../vnode/is-vnode.js","../vnode/is-vtext.js","../vnode/is-widget.js","./apply-properties","global/document",72,"domIndex","rootNode","indices","nodes","ascending","recurse","rootIndex","indexInRange","vChildren","vChild","noChild","nextIndex","count","currentIndex","currentItem","minIndex","maxIndex",73,"applyPatch","vpatch","domNode","renderOptions","vNode","VPatch","REMOVE","removeNode","INSERT","insertNode","VTEXT","stringPatch","WIDGET","widgetPatch","VNODE","vNodePatch","ORDER","reorderChildren","PROPS","THUNK","replaceRoot","destroyWidget","newNode","leftVNode","vText","replaceData","replaceChild","widget","updating","updateWidget","moves","insert","keyMap","removes","inserts","insertBefore","oldRoot","newRoot","../vnode/vpatch.js","./update-widget",74,"patchRecursive","patchIndices","nodeIndex","patchList","patchOp","Number","./create-element","./dom-index","./patch-op","x-is-array",75,76,"EvHook","propertyName","es","ev-store",77,"SoftSetHook",78,"tag","isChildren","parseTag","softSetHook","transformProperties","addChild","isChild","UnexpectedVirtualElement","foreignObject","parentVnode","evHook","isVThunk","errorString","JSON","stringify","../vnode/is-thunk","../vnode/is-vhook","../vnode/is-vnode","../vnode/is-vtext","../vnode/is-widget","../vnode/vnode.js","../vnode/vtext.js","./hooks/ev-hook.js","./hooks/soft-set-hook.js","./parse-tag.js",79,"noId","tagParts","classIdSplit","notClassId","classes","browser-split",80,"renderedA","renderedB","isThunk","renderThunk","thunk","renderedThunk","./is-thunk","./is-vnode","./is-vtext","./is-widget",81,82,83,"isVirtualNode","./version",84,"isVirtualText",85,86,87,"VirtualNode","noProperties","noChildren","hooks","descendants","hasWidgets","hasThunks","descendantHooks","property","isVHook","./is-vhook",88,"VirtualPatch","NONE",89,"VirtualText",90,"diffProps","aKey","aValue","bValue","objectDiff","bKey",91,"walk","applyClear","thunks","clearState","appendPatch","propsPatch","diffChildren","aChildren","orderedSet","reorder","bChildren","aLen","bLen","leftNode","rightNode","destroyWidgets","thunkPatch","hasPatches","undefinedKeys","bChildIndex","keyIndex","bKeys","bFree","free","aChildIndex","aKeys","aFree","newChildren","freeIndex","freeCount","deletedItems","itemIndex","aItem","lastFreeIndex","newItem","simulateItem","simulate","simulateIndex","wantedItem","../vnode/handle-thunk","../vnode/vpatch","./diff-props",92,"rng","crypto","getRandomValues","_rnds8","Uint8Array","_rnds",93,"parse","buf","offset","ii","oct","_hexToByte","unparse","bth","_byteToHex","clockseq","_clockseq","msecs","getTime","nsecs","_lastNSecs","dt","_lastMSecs","tl","tmh","_nodeId","v4","rnds","_rng","_seedBytes","./rng",94,95],"mappings":"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","file":"index.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nimport app from './lib/app';\nimport reel from './lib/view/breakpoints';\nimport wall from './lib/view/device-wall';\n\nexport {app, reel, wall};\n","'use strict';\n\nexport const DEVICE_WALL = {\n    SET_SELECTED: 'Set selected Device Wall item',\n    SET_STATE: 'Set Device Wall picker internal state data',\n    TOGGLE_VISIBILITY: 'Toggle Device Wall picker popup visibility state'\n};\n\nexport const USER = {\n    SAVE_DEVICE: 'Save user-defined device',\n    REMOVE_DEVICE: 'Remove user-defined device',\n    SAVE_PRESET: 'Save user-defined preset',\n    REMOVE_PRESET: 'Remove user-defined preset'\n};\n\nexport const UI = {\n    SET_MODE: 'Set Re:view display mode'\n};\n","'use strict';\n\nimport tr from 'tiny-react';\nimport {createStore, applyMiddleware} from 'redux';\nimport createLogger from 'redux-logger';\nimport reducers from './reducers';\nimport devices from './devices';\nimport presets from './presets';\nimport deviceWallFsmFactory from './device-wall-fsm';\nimport UI from './components/ui';\n\nconst logger = createLogger();\nconst createStoreWithMiddleware = applyMiddleware(logger)(createStore);\n\nexport const store = createStoreWithMiddleware(reducers, {\n    devices: devices.sort(sortByTitle),\n    presets: presets.sort(sortByTitle),\n    ui: {\n        mode: 'breakpoints'\n    },\n    deviceWallPicker: {\n        state: 'initial',\n        stateData: {},\n        visible: true,\n        display: {\n            type: 'preset',\n            id: 'apple-phones'\n        }\n    },\n    user: {\n        devices: [{\n            \"id\": \"942ea870-c47d-11e5-b11f-03099e8ba412\",\n            \"title\": \"AAA my dev\",\n            \"width\": \"200\",\n            \"height\": \"300\"\n        }],\n        presets: [{\n            \"id\": \"d2ee7d00-c479-11e5-abe8-abdaf6488318\",\n            \"title\": \"Sample\",\n            \"devices\": [\n                \"apple-ipad\",\n                \"amazon-kindle-fire-hdx-8-9\"\n            ]\n        }]\n    }\n});\n\nexport function dispatch(data) {\n    return store.dispatch(data);\n}\n\nexport function subscribe(onChange, select) {\n    let currentState;\n    let handler = () => {\n        let nextState = store.getState();\n        if (typeof select === 'function') {\n            nextState = select(nextState);\n        }\n        if (nextState !== currentState) {\n            currentState = nextState;\n            onChange(currentState);\n        }\n    };\n\n    return store.subscribe(handler);\n}\n\nexport function getStateValue(key='') {\n    return key.split('.').reduce((state, part) => {\n        return state != null ? state[part] : state;\n    }, store.getState());\n}\n\nexport const deviceWallFSM = deviceWallFsmFactory(dispatch, getStateValue);\nsubscribe(() => deviceWallFSM.transition(getStateValue('deviceWallPicker.state')));\n\nexport function createUI() {\n    var ui = tr.render(UI, store.getState());\n    subscribe(state => ui.update(state));\n    return ui.target;\n}\n\n/**\n * Returns concatenated list of unique user and default items for given `key`\n * in `state` object.\n * @param  {String} key\n * @param  {Object} state\n * @return {Array}\n */\nexport function getItems(key, state=store.getState()) {\n    var lookup = {};\n    var userData = state.user || {};\n    var userItems = (userData[key] || []).map(item => ({\n        ...item,\n        userDefined: true,\n        editable: true\n    }));\n\n    return [].concat(userItems, state[key] || [])\n    // keep unique items only\n    .filter(item => item.id in lookup ? false : lookup[item.id] = true)\n    .sort(sortByTitle);\n}\n\nfunction sortByTitle(a, b) {\n    return a.title === b.title ? 0 : (a.title > b.title ? 1 : -1);\n}\n","/**\n * Device add/edit form\n */\n'use strict';\nimport tr from 'tiny-react';\nimport {cl} from './utils';\nimport {getStateValue, deviceWallFSM as fsm} from '../app';\n\nconst fid = name => `device-form.${name}`;\n\nexport default tr.component({\n    render(props) {\n        props = props || {};\n        return <form action=\"\" className={cl('form', props.visible && 'form_visible')}\n            onsubmit={onSubmit} onreset={onReset} oninput={onInput}>\n            <input type=\"hidden\" name=\"id\" value={props.id} />\n            <div className={cl('form-row')}>\n                <label htmlFor={fid('title')} className={cl('form-label')}>Device name</label>\n                <input type=\"text\" name=\"title\" id={fid('title')} value={props.title} required />\n            </div>\n\n            <div className={cl('form-row')}>\n                <label htmlFor={fid('width')} className={cl('form-label')}>Screen dimentions</label>\n                <input type=\"number\" name=\"width\" id={fid('width')} value={props.width} min=\"100\" max=\"5120\" required />\n                <span>  </span>\n                <input type=\"number\" name=\"height\" value={props.height} min=\"100\" max=\"5120\" required />\n                <span> px</span>\n            </div>\n\n            <div className={cl('form-row')}>\n                <label htmlFor={fid('userAgent')} className={cl('form-label')}>User agent string (optional)</label>\n                <textarea name=\"userAgent\" fid={fid('userAgent')}></textarea>\n            </div>\n\n            <div className={cl('form-controls')}>\n                <input type=\"submit\" value=\"Save\" className={cl('button')} />\n                <input type=\"reset\" value=\"Cancel\" className={cl('button')} />\n            </div>\n        </form>\n    }\n});\n\nfunction onSubmit(evt) {\n    evt.preventDefault();\n    fsm.submitDeviceEdit(getStateValue('deviceWallPicker.stateData'));\n}\n\nfunction onReset(evt) {\n    evt.preventDefault();\n    fsm.cancelDeviceEdit();\n}\n\nfunction onInput(evt) {\n    var elem = evt.target;\n    fsm.updateDeviceEditData({[elem.name]: elem.value});\n}\n","/**\n * Device list component\n */\nimport tr from 'tiny-react';\nimport List from './list';\nimport {getStateValue, deviceWallFSM as fsm} from '../app';\n\nexport default tr.component({\n    render(props) {\n        return <List {...props} onItemEdit={onEdit} onItemClick={onClick} />;\n    }\n});\n\nfunction onClick(evt) {\n    evt.preventDefault();\n    fsm.pickDevice(this.id);\n}\n\nfunction onEdit(evt) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    var data = parseItemAction(evt.target);\n    if (data.action === 'edit') {\n        fsm.editDevice(data.id);\n    } else if (data.action === 'remove') {\n        fsm.removeDevice(data.id);\n    }\n}\n\nfunction parseItemAction(data) {\n    if (typeof data !== 'string' && 'nodeType' in data) {\n        data = data.getAttribute('data-action');\n    }\n    var [action, id] = (data || '').split(':');\n    return {action, id};\n}\n","/**\n * Toggles Device Wall popup display\n */\n'use strict';\n\nimport tr from 'tiny-react';\nimport {cl} from './utils';\nimport {dispatch} from '../app';\nimport {DEVICE_WALL} from '../action-names';\n\nexport default tr.component({\n    render(props) {\n        return <div className={cl('picker')} onclick={togglePopup}>\n            <span className={cl('switcher-label')}>Something</span>\n        </div>;\n    }\n});\n\nfunction togglePopup() {\n    dispatch({type: DEVICE_WALL.TOGGLE_VISIBILITY});\n}\n","/**\n * A Device Wall picker component\n */\n'use strict';\nimport tr from 'tiny-react';\nimport DeviceList from './device-list';\nimport DeviceForm from './device-form';\nimport PresetList from './preset-list';\nimport PresetForm from './preset-form';\nimport {cl} from './utils';\nimport {getItems, deviceWallFSM as fsm} from '../app';\n\nconst EMPTY_OBJECT = {};\n\nexport default tr.component({\n    render(props={}) {\n        var state = props.deviceWallPicker;\n        var stateName = state.state;\n        var deviceEditMode = stateName === 'editDevice';\n        var presetEditMode = stateName === 'editPreset';\n        var deviceData = EMPTY_OBJECT, presetData = EMPTY_OBJECT;\n        var deviceList = getDeviceList(props);\n        var presetList = getPresetList(props);\n\n        if (presetEditMode) {\n            let lookup = itemsLookup(deviceList.items);\n            presetData = {\n                ...state.stateData,\n                devices: (state.stateData.devices || []).map(id => lookup[id])\n            };\n        } else if (deviceEditMode) {\n            deviceData = state.stateData;\n        }\n\n        return <div className={cl('popup', 'devices')}>\n            <section className={cl('section')}>\n                <h2 className={cl('section-title')}>Devices <i className={cl('icon-add', deviceEditMode && 'icon-add_active')}  onclick={addDevice}></i></h2>\n                <div className={cl('section-content')}>\n                    <DeviceList {...deviceList} hidden={deviceEditMode} />\n                    <DeviceForm {...deviceData} visible={deviceEditMode} />\n                </div>\n            </section>\n            <section className={cl('section')}>\n                <h2 className={cl('section-title')}>Presets <i className={cl('icon-add', presetEditMode && 'icon-add_active')} onclick={addPreset}></i></h2>\n                <div className={cl('section-content')}>\n                    <PresetList {...presetList} hidden={presetEditMode} />\n                    <PresetForm {...presetData} visible={presetEditMode} />\n                </div>\n            </section>\n        </div>\n    }\n});\n\nfunction addDevice() {\n    fsm.addDevice();\n}\n\nfunction addPreset() {\n    fsm.addPreset();\n}\n\n/**\n * Returns props for DeviceList component.\n * @param  {Object} state\n * @return {Object}\n */\nfunction getDeviceList(state) {\n    var fsmData = state.deviceWallPicker || {};\n    var mode = 'pick-one';\n    var items = getItems('devices', state).map(item => ({\n        ...item,\n        info: `${item.width}${item.height}`\n    }));\n\n    var selected;\n    if (fsmData.state === 'editPreset') {\n        mode = 'pick-many';\n        selected = fsmData.stateData && fsmData.stateData.devices;\n    } else {\n        selected = fsmData.display && fsmData.display.type === 'device' && fsmData.display.id;\n    }\n\n    return {\n        mode,\n        items: markSelected(items, selected)\n    };\n}\n\n/**\n * Returns props for PresetList component\n * @param {Object} state\n */\nfunction getPresetList(state) {\n    var fsmData = state.deviceWallPicker || {};\n    var selected = fsmData.display && fsmData.display.type === 'preset' && fsmData.display.id;\n    return {\n        items: markSelected(getItems('presets', state), selected)\n    };\n}\n\nfunction markSelected(items, selected) {\n    if (!selected) {\n        return items;\n    }\n\n    selected = Array.isArray(selected) ? selected : [selected];\n    return items.map(item => (selected.indexOf(item.id) === -1 ? item : {...item, selected: true}));\n}\n\nfunction itemsLookup(items) {\n    return (items || []).reduce((lookup, item) => {\n        lookup[item.id] = item;\n        return lookup;\n    }, {});\n}\n","/**\n * Base list component\n */\n'use strict';\n\nimport tr from 'tiny-react';\nimport {cl} from './utils';\n\nexport default tr.component({\n    render(props) {\n        var items = props.items || [];\n        return <ul className={cl('list', props.hidden && 'list_hidden')} data-mode={props.mode}>\n            {items.map(item => {\n                let controls = item.editable && (<span className={cl('list-item-controls')}>\n                    <i className={cl('list-item-control', 'list-item-control_edit')} data-action={'edit:' + item.id} onclick={props.onItemEdit}></i>\n                    <i className={cl('list-item-control', 'list-item-control_remove')} data-action={'remove:' + item.id} onclick={props.onItemEdit}></i>\n                </span>);\n\n                return <li id={item.id} className={cl('list-item', controls && 'list-item_with-controls', item.userDefined && 'list-item_user-defined')} onclick={props.onItemClick}>\n                    <input type=\"checkbox\" name={props.name}\n                        id={'fld-' + item.id}\n                        className={cl('list-item-input')}\n                        value={item.id} checked={item.selected} />\n                    <label htmlFor={'fld-' + item.id} className={cl('list-item-label')}>\n                        <span className={cl('list-item-label-inner')}>{item.title}</span>\n                        {item.info && <span className={cl('list-item-info')}>{item.info}</span>}\n                    </label>\n                    {controls || undefined}\n                </li>}\n            )}\n        </ul>;\n    }\n});\n","/**\n * Display mode toggler\n */\n'use strict';\n\nimport tr from 'tiny-react';\nimport {cl} from './utils';\nimport {dispatch} from '../app';\nimport {UI} from '../action-names';\n\nconst modes = [\n    {id: 'breakpoints', title: 'Breakpoints View'},\n    {id: 'device-wall', title: 'Device Wall'},\n];\n\nexport default tr.component({\n    render(props) {\n        return <ul className={cl('switcher')}>\n            {modes.map(mode => <li className={cl('switcher-item', (props.mode === mode.id) && 'switcher-item_selected')} data-mode={mode.id} onclick={onClick}>\n                <span className={cl('switcher-label')}>{mode.title}</span>\n            </li>)}\n        </ul>;\n    }\n});\n\nfunction onClick(evt) {\n    var mode = this.getAttribute('data-mode');\n    if (mode) {\n        dispatch({type: UI.SET_MODE, mode});\n    }\n}\n","/**\n * Preset add/edit form\n */\n'use strict';\nimport tr from 'tiny-react';\nimport {cl} from './utils';\nimport {getStateValue, deviceWallFSM as fsm} from '../app';\n\nconst fid = name => `preset-form.${name}`;\n\nexport default tr.component({\n    render(props) {\n        props = props || {};\n        let devicesElem;\n        if (!props.devices || !props.devices.length) {\n            devicesElem = <span className={cl('form-no-devices')}>No selected devices</span>;\n        } else {\n            devicesElem = <ul className={cl('form-device-list')}>\n                {props.devices.map(d => <li className={cl('form-device-list-item')}>{d.title} 3234</li>)}\n            </ul>\n        }\n\n        return <form className={cl('form', props.visible && 'form_visible')}\n            onsubmit={onSubmit} onreset={onReset}  oninput={onInput}>\n            <input type=\"hidden\" name=\"id\" value={props.id} />\n            <div className={cl('form-row')}>\n                <label htmlFor={fid('title')} className={cl('form-label')}>Preset title</label>\n                <input type=\"text\" name=\"title\" id={fid('title')} value={props.title} required />\n            </div>\n\n            <div className={cl('form-row')}>\n                <label className={cl('form-label')}>Pick devices on the left</label>\n                {devicesElem}\n            </div>\n\n            <div className={cl('form-controls')}>\n                <input type=\"submit\" value=\"Save\" className={cl('button')} />\n                <input type=\"reset\" value=\"Cancel\" className={cl('button')} />\n            </div>\n        </form>\n    }\n});\n\nfunction onSubmit(evt) {\n    evt.preventDefault();\n    fsm.submitPresetEdit(getStateValue('deviceWallPicker.stateData'));\n}\n\nfunction onReset(evt) {\n    evt.preventDefault();\n    fsm.cancelPresetEdit();\n}\n\nfunction onInput(evt) {\n    var elem = evt.target;\n    fsm.updatePresetEditData({[elem.name]: elem.value});\n}\n","/**\n * Preset list component\n */\nimport tr from 'tiny-react';\nimport List from './list';\nimport {getStateValue, deviceWallFSM as fsm} from '../app';\n\nexport default tr.component({\n    render(props) {\n        return <List {...props} onItemEdit={onEdit} onItemClick={onClick} />;\n    }\n});\n\nfunction onClick(evt) {\n    evt.preventDefault();\n    fsm.pickPreset(this.id);\n}\n\nfunction onEdit(evt) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    var data = parseItemAction(evt.target);\n    if (data.action === 'edit') {\n        fsm.editPreset(data.id);\n    } else if (data.action === 'remove') {\n        fsm.removePreset(data.id);\n    }\n}\n\nfunction parseItemAction(data) {\n    if (typeof data !== 'string' && 'nodeType' in data) {\n        data = data.getAttribute('data-action');\n    }\n    var [action, id] = (data || '').split(':');\n    return {action, id};\n}\n","/**\n * Main Re:View UI component\n */\n'use strict';\n\nimport tr from 'tiny-react';\nimport DeviceWallControl from './device-wall-control';\nimport DeviceWallPopup from './device-wall-picker';\nimport ModeToggler from './mode-toggler';\nimport {cl} from './utils';\n\nexport default tr.component({\n    render(props) {\n        return <div className={cl('header')}>\n            <h1 className={cl('logo')}>Re:view <span className={cl('logo-version')}>2</span></h1>\n\n            <div className={cl('header-content')}>\n                <ModeToggler mode={props.ui.mode} />\n                <DeviceWallControl {...props} />\n                <DeviceWallPopup {...props} />\n            </div>\n\n            <div className={cl('header-icons')}>\n                <i className={cl('icon', 'icon_settings')}></i>\n                <i className={cl('icon', 'icon_help')}></i>\n            </div>\n        </div>;\n    }\n});\n","/**\n * Utility functions\n */\n'use strict';\n\n/**\n * Generates prefixed class names\n * @param  {Array|String} ...names\n * @return {String}\n */\nexport function cl(...names) {\n    return names.filter(Boolean).map(n => `emmet-re-view__${n}`).join(' ');\n}\n","/**\n * PageSync controller for given list of views:\n * view under cursor is a host, all others are guests\n */\n'use strict';\n\nimport * as pageSync from 'page-sync';\n\nconst defaultOptions = {sameParent: true};\n\nexport default function(views, options={}) {\n\toptions = {...defaultOptions, ...options};\n\tvar docs = new Array(views.length);\n\tvar state = {\n\t\thostView: null,\n\t\thost: null,\n\t\tguests: []\n\t};\n\n\tvar controlGuests = event => state.guests.forEach(guest => guest(event));\n\tvar resetHost = () => {\n\t\tif (state.host) {\n\t\t\tstate.host.off('data', controlGuests).dispose();\n\t\t\tstate.host = null;\n\t\t}\n\t};\n\tvar loadDocument = view => {\n\t\tview.getDocument().then(doc => {\n\t\t\tif (!state) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet ix = views.indexOf(view);\n\t\t\tif (ix !== -1) {\n\t\t\t\tdocs[ix] = doc;\n\t\t\t\tassignDoc(doc);\n\t\t\t}\n\t\t});\n\t};\n\n\tvar removeGuest = doc => {\n\t\tstate.guests = state.guests.filter(g => {\n\t\t\tif (g.document === doc) {\n\t\t\t\tg.dispose();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t};\n\n\tvar assignDoc = doc => {\n\t\tvar ix = doc ? docs.indexOf(doc) : -1;\n\t\tif (!state || ix === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tremoveGuest(doc);\n\t\tif (views[ix] === state.hostView) {\n\t\t\tresetHost();\n\t\t\tstate.host = pageSync.host(doc, options).on('data', controlGuests);\n\t\t} else {\n\t\t\tstate.guests.push(pageSync.guest(doc, options));\n\t\t}\n\t};\n\n\tvar promoteToHost = function() {\n\t\tvar view = viewForElement(views, this);\n\t\tif (!view || !state || state.hostView === view) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar curIx = views.indexOf(view);\n\t\tvar oldIx = state.hostView ? views.indexOf(state.hostView) : -1;\n\n\t\tstate.hostView = view;\n\t\tresetHost();\n\t\tassignDoc(docs[curIx]);\n\t\tassignDoc(docs[oldIx]);\n\t};\n\n\tvar onUnload = function() {\n\t\tvar ix = views.indexOf(this);\n\t\tif (ix !== -1) {\n\t\t\tif (state.hostView === this) {\n\t\t\t\tresetHost();\n\t\t\t} else {\n\t\t\t\tremoveGuest(docs[ix]);\n\t\t\t}\n\t\t\tdocs[ix] = null;\n\t\t\tloadDocument(this);\n\t\t}\n\t};\n\n\tviews.forEach(view => {\n\t\tview.element.addEventListener('mouseenter', promoteToHost);\n\t\tview.element.addEventListener('mousewheel', promoteToHost);\n\t\tview.on('unload', onUnload);\n\t\tview.isMounted ? loadDocument(view) : view.once('mount', () => loadDocument(view));\n\t});\n\n\treturn {\n\t\tdestroy() {\n\t\t\tviews.forEach(view => {\n\t\t\t\tview.element.removeEventListener('mouseenter', promoteToHost);\n\t\t\t\tview.element.removeEventListener('mousewheel', promoteToHost);\n\t\t\t\tview.off('unload', onUnload);\n\t\t\t});\n\n\t\t\tresetHost();\n\t\t\tstate.guests.forEach(g => g && g.dispose());\n\t\t\tstate.hostView = state.host = state.guests = null;\n\t\t\tstate = docs = views = options = null;\n\t\t}\n\t};\n};\n\nfunction viewForElement(views, elem) {\n\tfor (var i = 0, il = views.length; i < il; i++) {\n\t\tif (views[i].element === elem) {\n\t\t\treturn views[i];\n\t\t}\n\t}\n}\n","'use strict';\n\nimport overrideScroll from '../scroller';\nimport tween from '../tween';\nimport {testProp, createElement, removeElement, setTransform, clamp} from '../utils';\n\nconst defaultOptions = {\n\tactivateKey: 16 // Shift key\n};\n\nexport default function(layer, options={}) {\n\toptions = {...defaultOptions, ...options};\n\tvar state = readState(layer);\n\tstate.scale = state.minScale;\n\tstate.x = (state.viewportWidth - state.width * state.scale) / 2;\n\tstate.y = (state.viewportHeight - state.height * state.scale) / 2;\n\n\tvar control, mouseX = 0, mouseY = 0;\n\n\tvar captureMousePos = evt => {\n\t\tmouseX = evt.layerX;\n\t\tmouseY = evt.layerY;\n\t};\n\n\tvar enterControlState = evt => {\n\t\tif (evt.keyCode === options.activateKey) {\n\t\t\tevt.preventDefault();\n\t\t\tcontrol && control.destroy();\n\t\t\tcontrol = createControlLayer(state, mouseX, mouseY);\n\t\t\tlayer.parentNode.appendChild(control.element);\n\t\t\tcontrol.show();\n\t\t}\n\t};\n\tvar exitControlState = evt => {\n\t\tif (evt.keyCode === options.activateKey) {\n\t\t\tcontrol && control.destroy();\n\t\t\tcontrol = null;\n\t\t}\n\t};\n\tvar focusOnDoc = evt => doc.defaultView.focus();\n\n\tvar doc = layer.ownerDocument;\n\tvar drag = dragHandler(state);\n\tdoc.addEventListener('keydown', enterControlState);\n\tdoc.addEventListener('keyup', exitControlState);\n\tdoc.addEventListener('mouseover', focusOnDoc);\n\tdoc.addEventListener('click', focusOnDoc);\n\tlayer.addEventListener('mousemove', captureMousePos);\n\t// setup wall dragging when clicked outside of views\n\tlayer.addEventListener('mousedown', drag);\n\n\trenderState(state);\n\n\treturn {\n\t\tupdate() {\n\t\t\tstate = {...state, ...readState(layer)};\n\t\t\tstate.scale = clampScale(state, state.scale);\n\t\t\trenderState(state);\n\t\t},\n\t\tdestroy() {\n\t\t\tdoc.removeEventListener('keydown', enterControlState);\n\t\t\tdoc.removeEventListener('keyup', exitControlState);\n\t\t\tdoc.removeEventListener('mouseover', focusOnDoc);\n\t\t\tdoc.removeEventListener('click', focusOnDoc);\n\t\t\tlayer.removeEventListener('mousemove', captureMousePos);\n\t\t\tlayer.removeEventListener('mousedown', drag);\n\t\t\tdoc = layer = drag = null;\n\t\t}\n\t};\n};\n\nfunction readState(layer) {\n\tvar viewport = layer.parentNode;\n\treturn {\n\t\tviewportWidth: viewport.offsetWidth,\n\t\tviewportHeight: viewport.offsetHeight,\n\t\twidth: layer.offsetWidth,\n\t\theight: layer.offsetHeight,\n\t\tminScale: parseFloat(layer.getAttribute('data-min-scale') || 0.01),\n\t\tmaxScale: parseFloat(layer.getAttribute('data-max-scale') || 1),\n\t\tlayer\n\t};\n}\n\nfunction stopEvent(evt) {\n\tevt.preventDefault();\n\tevt.stopPropagation();\n\treturn evt;\n}\n\nfunction clampScale(state, scale) {\n\treturn clamp(scale, state.minScale, state.maxScale);\n}\n\nfunction renderState(state, x=state.x, y=state.y, scale=state.scale) {\n\tvar dw = state.viewportWidth - state.width * scale;\n\tvar dh = state.viewportHeight - state.height * scale;\n\n\tvar minX = Math.min(dw, dw / 2);\n\tvar maxX = Math.max(0, minX);\n\tvar minY = Math.min(dh, dh / 2);\n\tvar maxY = Math.max(0, minY);\n\n\tstate.x = clamp(x, minX, maxX)|0;\n\tstate.y = clamp(y, minY, maxY)|0;\n\tstate.scale = scale;\n\n\tsetTransform(state.layer, `translate(${state.x}px, ${state.y}px) scale(${state.scale})`);\n\treturn state;\n}\n\nfunction dragHandler(state) {\n\treturn evt => {\n\t\tstopEvent(evt);\n\n\t\tlet doc = state.layer.ownerDocument;\n\t\tlet startX = state.x - evt.pageX;\n\t\tlet startY = state.y - evt.pageY;\n\n\t\tlet onMouseMove = evt => {\n\t\t\tstopEvent(evt);\n\t\t\trenderState(state, evt.pageX + startX, evt.pageY + startY);\n\t\t};\n\t\tlet onMouseUp = evt => {\n\t\t\tdoc.removeEventListener('mousemove', onMouseMove);\n\t\t\tdoc.removeEventListener('mouseup', onMouseUp);\n\t\t};\n\n\t\tdoc.addEventListener('mousemove', onMouseMove);\n\t\tdoc.addEventListener('mouseup', onMouseUp);\n\t};\n}\n\nfunction zoom(state, scale, mouseX, mouseY) {\n\tvar scale = clampScale(state, scale);\n\n\t// mouse pos relative to layer\n\tvar mx = mouseX - state.x;\n\tvar my = mouseY - state.y;\n\n\t// current scale\n\tvar cw = state.width * state.scale;\n\tvar ch = state.height * state.scale;\n\n\t// target scale\n\tvar tw = state.width * scale;\n\tvar th = state.height * scale;\n\n\tvar dx = (cw - tw) * (mx / cw);\n\tvar dy = (ch - th) * (my / ch);\n\n\trenderState(state, state.x + dx, state.y + dy, scale);\n}\n\nfunction createControlLayer(state, mouseX=0, mouseY=0) {\n\tvar elem = createElement('div', 'emmet-re-view__wall-control');\n\n\t// Setup wall dragging\n\tvar drag = dragHandler(state);\n\telem.addEventListener('mousedown', drag);\n\n\t// Setup wall zoom\n\t// As a universal solution for different platforms and input devices\n\t// (like Apple Magic Mouse or Trackpad) use element scrolling instead of\n\t// `mousewheel` event to properly handle input data\n\n\tvar captureMousePos = evt => {\n\t\tmouseX = evt.layerX;\n\t\tmouseY = evt.layerY;\n\t};\n\telem.addEventListener('mousemove', captureMousePos);\n\n\tvar zoomHandler = evt => {\n\t\tstopEvent(evt);\n\t\tvar scrollDelta = scroller.scrollWidth - scroller.offsetWidth;\n\t\tvar scale = state.minScale + (state.maxScale - state.minScale) * (scroller.scrollLeft / scrollDelta);\n\t\tzoom(state, scale, mouseX, mouseY);\n\t};\n\n\t// NB: in Chrome, Shfit-scroll has a special behaviour, it scrolls horizontally\n\t// instead. To handle this behaviour, use our custom scroller which transposes\n\t// all scroll directions to horizontal one\n\tvar scroller = createElement('div', 'emmet-re-view__wall-control-scroller');\n\tvar inner = createElement('div');\n\tvar scrollController;\n\tinner.style.width = `${(1 + state.maxScale - state.minScale) * 100}%`;\n\tinner.style.height = '1px';\n\tscroller.appendChild(inner);\n\tscroller.addEventListener('scroll', zoomHandler);\n\n\telem.appendChild(scroller);\n\tvar scrollController = overrideScroll(elem, scroller);\n\n\tvar anim = null;\n\treturn {\n\t\telement: elem,\n\t\tshow() {\n\t\t\telem.style.opacity = 0;\n\t\t\tthis.sync();\n\t\t\tscrollController = overrideScroll(elem, scroller);\n\t\t\tanim = animateOpacity(elem, false);\n\t\t},\n\t\tsync() {\n\t\t\tvar scrollDelta = scroller.scrollWidth - scroller.offsetWidth;\n\t\t\tvar scale = (state.scale - state.minScale) / (state.maxScale - state.minScale);\n\t\t\tvar scrollPos = Math.round(scrollDelta * scale);\n\t\t\tif (Math.abs(scroller.scrollTop - scrollPos) > 2) {\n\t\t\t\tscroller.scrollLeft = scrollPos;\n\t\t\t}\n\t\t},\n\t\tdestroy() {\n\t\t\tscroller.removeEventListener('scroll', zoomHandler);\n\t\t\telem.removeEventListener('mousemove', captureMousePos);\n\t\t\telem.removeEventListener('mousedown', drag);\n\t\t\tscrollController.destroy();\n\n\t\t\tanim && anim.stop();\n\t\t\tanimateOpacity(elem, true, () => {\n\t\t\t\tremoveElement(elem);\n\t\t\t\telem = anim = null;\n\t\t\t});\n\t\t}\n\t};\n}\n\nfunction animateOpacity(elem, reverse, complete) {\n\treturn tween({\n\t\tduration: 300,\n\t\teasing: 'outCubic',\n\t\treverse,\n\t\tstep(pos) {\n\t\t\telem.style.opacity = pos;\n\t\t},\n\t\tcomplete\n\t});\n}\n","/**\n * A state machine for Device Wall picker popup\n */\n'use strict';\n\nimport FSM from 'state-machine';\nimport uuid from 'uuid';\nimport {DEVICE_WALL, USER} from './action-names';\n\nexport default function(dispatch, getStateValue) {\n    return new FSM({\n        initial: {\n            // Devices\n            pickDevice,\n            addDevice,\n            editDevice,\n            removeDevice,\n\n            // Presets\n            pickPreset,\n            addPreset,\n            editPreset,\n            removePreset,\n        },\n        editDevice: {\n            addPreset,\n            addDevice: goToInitialState,\n            update: updateCurrentStateData,\n            submit() {\n                // TODO validate device data here?\n                dispatch({\n                    type: USER.SAVE_DEVICE,\n                    device: getStateValue('deviceWallPicker.stateData')\n                });\n                goToInitialState();\n            },\n            cancel: goToInitialState\n        },\n        editPreset: {\n            addDevice,\n            addPreset: goToInitialState,\n            pickDevice(id) {\n                var preset = getStateValue('deviceWallPicker.stateData');\n                var devices = preset.devices ? preset.devices.slice(0) : [];\n                var ix = devices.indexOf(id);\n                ix === -1 ? devices.push(id) : devices.splice(ix, 1);\n                this.handle('update', {devices});\n            },\n            update: updateCurrentStateData,\n            submit(preset) {\n                // TODO validate input here?\n                dispatch({\n                    type: USER.SAVE_PRESET,\n                    preset\n                });\n                goToInitialState();\n            },\n            cancel: goToInitialState\n        }\n    }, {\n        reset: goToInitialState,\n\n        pickDevice(id) {\n            this.handle('pickDevice', id);\n        },\n        addDevice() {\n            this.handle('addDevice');\n        },\n        editDevice(id) {\n            this.handle('editDevice', id);\n        },\n        removeDevice(id) {\n            this.handle('removeDevice', id);\n        },\n        updateDeviceEditData(data) {\n            this.handle('update', data);\n        },\n        submitDeviceEdit(device) {\n            this.handle('submit', device);\n        },\n        cancelDeviceEdit() {\n            this.handle('cancel');\n        },\n\n        pickPreset(id) {\n            this.handle('pickPreset', id);\n        },\n        addPreset() {\n            this.handle('addPreset');\n        },\n        editPreset(id) {\n            this.handle('editPreset', id);\n        },\n        removePreset(id) {\n            this.handle('removePreset', id);\n        },\n        updatePresetEditData(data) {\n            this.handle('update', data);\n        },\n        submitPresetEdit(preset) {\n            this.handle('submit', preset);\n        },\n        cancelPresetEdit() {\n            this.handle('cancel');\n        },\n    });\n\n    function goToInitialState() {\n        dispatch({\n            type: DEVICE_WALL.SET_STATE,\n            state: 'initial'\n        });\n    }\n\n    //\n    // Device handlers\n    //\n\n    function pickDevice(id) {\n        dispatch({\n            type: DEVICE_WALL.SET_SELECTED,\n            item: {id, type: 'device'}\n        });\n    }\n\n    function addDevice() {\n        dispatch({\n            type: DEVICE_WALL.SET_STATE,\n            state: 'editDevice',\n            data: {id: uuid.v1()}\n        });\n    }\n\n     function editDevice(id) {\n        var device = findItem('user.devices', id);\n        if (device) {\n            dispatch({\n                type: DEVICE_WALL.SET_STATE,\n                state: 'editDevice',\n                data: device\n            });\n        }\n    }\n\n    function removeDevice(id) {\n        dispatch({\n            type: USER.REMOVE_DEVICE,\n            id\n        });\n    }\n\n    //\n    // Preset handlers\n    //\n\n    function pickPreset(id) {\n        dispatch({\n            type: DEVICE_WALL.SET_SELECTED,\n            item: {id, type: 'preset'}\n        });\n    }\n\n    function addPreset() {\n        dispatch({\n            type: DEVICE_WALL.SET_STATE,\n            state: 'editPreset',\n            data: {id: uuid.v1()}\n        });\n    }\n\n    function editPreset(id) {\n        var preset = findItem('user.presets', id);\n        if (preset) {\n            dispatch({\n                type: DEVICE_WALL.SET_STATE,\n                state: 'editPreset',\n                data: preset\n            });\n        }\n    }\n\n    function removePreset(id) {\n        dispatch({\n            type: USER.REMOVE_PRESET,\n            id\n        });\n    }\n\n    function updateCurrentStateData(data={}) {\n        var curData = getStateValue('deviceWallPicker.stateData') || {};\n        dispatch({\n            type: DEVICE_WALL.SET_STATE,\n            state: this.current,\n            data: {...curData, ...data}\n        });\n    }\n\n    function findItem(storeKey, itemId) {\n        return (getStateValue(storeKey) || []).filter(item => item.id === itemId)[0];\n    }\n}\n","module.exports=[\n\t{\n\t\t\"id\": \"sony-xperia-sola\",\n\t\t\"title\": \"Sony Xperia Sola, U\",\n\t\t\"width\": 480,\n\t\t\"height\": 854,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.3; en-us; SonyEricssonST25i Build/6.0.B.1.564) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"lg-optimus-g\",\n\t\t\"title\": \"LG Optimus G\",\n\t\t\"width\": 384,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; Android 4.0; LG-E975 Build/IMM76L) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"lg-optimus-lte\",\n\t\t\"title\": \"LG Optimus LTE, Optimus 4X HD\",\n\t\t\"width\": 424,\n\t\t\"height\": 753,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.3; en-us; LG-P930 Build/GRJ90) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1.7\n\t},\n\t{\n\t\t\"id\": \"amazon-kindle-fire-hdx-7\",\n\t\t\"title\": \"Amazon Kindle Fire HDX 7\",\n\t\t\"width\": 1920,\n\t\t\"height\": 1200,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; en-us; KFTHWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"samsung-galaxy-note-ii\",\n\t\t\"title\": \"Samsung Galaxy Note II\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"htc-one-x\",\n\t\t\"title\": \"HTC One X, EVO LTE\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; Android 4.0.3; HTC One X Build/IML74K) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.133 Mobile Safari/535.19\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"apple-iphone-5\",\n\t\t\"title\": \"Apple iPhone 5\",\n\t\t\"width\": 320,\n\t\t\"height\": 568,\n\t\t\"user-agent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"amazon-kindle-fire-hdx-8-9\",\n\t\t\"title\": \"Amazon Kindle Fire HDX 8.9\",\n\t\t\"width\": 2560,\n\t\t\"height\": 1600,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"google-nexus-7\",\n\t\t\"title\": \"Google Nexus 7\",\n\t\t\"width\": 960,\n\t\t\"height\": 600,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; Android 4.3; Nexus 7 Build/JSS15Q) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1547.72 Safari/537.36\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"apple-iphone-4\",\n\t\t\"title\": \"Apple iPhone 4\",\n\t\t\"width\": 320,\n\t\t\"height\": 480,\n\t\t\"user-agent\": \"Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_2_1 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"generic-notebook\",\n\t\t\"title\": \"Generic notebook\",\n\t\t\"width\": 1280,\n\t\t\"height\": 800,\n\t\t\"user-agent\": \"\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"google-nexus-5\",\n\t\t\"title\": \"Google Nexus 5\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; Android 4.4.4; Nexus 5 Build/KTU84P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.114 Mobile Safari/537.36\",\n\t\t\"dpi\": 3\n\t},\n\t{\n\t\t\"id\": \"motorola-xoom\",\n\t\t\"title\": \"Motorola Xoom, Xyboard\",\n\t\t\"width\": 1280,\n\t\t\"height\": 800,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/525.10 (KHTML, like Gecko) Version/3.0.4 Mobile Safari/523.12.2\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"htc-one-m7\",\n\t\t\"title\": \"HTC One M7\",\n\t\t\"width\": 360,\n\t\t\"height\": 615,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 4.4.3; en-us; HTC_One/6.14.111.2 Build/KTU84L) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\",\n\t\t\"dpi\": 3\n\t},\n\t{\n\t\t\"id\": \"notebook-with-hidpi-screen\",\n\t\t\"title\": \"Notebook with HiDPI screen\",\n\t\t\"width\": 1440,\n\t\t\"height\": 900,\n\t\t\"user-agent\": \"\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"nokia-c5\",\n\t\t\"title\": \"Nokia C5, C6, C7, N97, N8, X7\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"NokiaN97/21.1.107 (SymbianOS/9.4; Series60/5.0 Mozilla/5.0; Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebkit/525 (KHTML, like Gecko) BrowserNG/7.1.4\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"blackberry-passport\",\n\t\t\"title\": \"BlackBerry Passport\",\n\t\t\"width\": 504,\n\t\t\"height\": 462,\n\t\t\"user-agent\": \"Mozilla/5.0 (BB10; Kbd) AppleWebKit/537.35+ (KHTML, like Gecko) Version/10.3.0.1418 Mobile Safari/537.35+\",\n\t\t\"dpi\": 2.856250047683716\n\t},\n\t{\n\t\t\"id\": \"apple-ipad\",\n\t\t\"title\": \"Apple iPad\",\n\t\t\"width\": 1024,\n\t\t\"height\": 768,\n\t\t\"user-agent\": \"Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"notebook-with-touch\",\n\t\t\"title\": \"Notebook with touch\",\n\t\t\"width\": 1280,\n\t\t\"height\": 950,\n\t\t\"user-agent\": \"\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"sony-xperia-z\",\n\t\t\"title\": \"Sony Xperia Z, Z1\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 4.2; en-us; SonyC6903 Build/14.1.G.1.518) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\",\n\t\t\"dpi\": 3\n\t},\n\t{\n\t\t\"id\": \"sony-xperia-s\",\n\t\t\"title\": \"Sony Xperia S, Ion\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 4.0; en-us; LT28at Build/6.1.C.1.111) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"samsung-galaxy-tab\",\n\t\t\"title\": \"Samsung Galaxy Tab\",\n\t\t\"width\": 1024,\n\t\t\"height\": 600,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.2; en-us; SCH-I800 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"apple-ipad-mini-2\",\n\t\t\"title\": \"Apple iPad Mini 2 / 3\",\n\t\t\"width\": 1024,\n\t\t\"height\": 768,\n\t\t\"user-agent\": \"Mozilla/5.0 (iPad; CPU OS 7_0_4 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11B554a Safari/9537.53\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"motorola-droid-razr-hd\",\n\t\t\"title\": \"Motorola Droid Razr HD\",\n\t\t\"width\": 720,\n\t\t\"height\": 1280,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.3; en-us; DROID RAZR 4G Build/6.5.1-73_DHD-11_M1-29) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"apple-iphone-6-plus\",\n\t\t\"title\": \"Apple iPhone 6 Plus\",\n\t\t\"width\": 414,\n\t\t\"height\": 736,\n\t\t\"user-agent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.3 (KHTML, like Gecko) Version/8.0 Mobile/12A4345d Safari/600.1.4\",\n\t\t\"dpi\": 3\n\t},\n\t{\n\t\t\"id\": \"htc-sensation\",\n\t\t\"title\": \"HTC Sensation, Evo 3D\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 4.0.3; en-us; HTC Sensation Build/IML74K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\",\n\t\t\"dpi\": 1.5\n\t},\n\t{\n\t\t\"id\": \"motorola-defy\",\n\t\t\"title\": \"Motorola Defy, Droid, Droid X, Milestone\",\n\t\t\"width\": 320,\n\t\t\"height\": 569,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.0; en-us; Milestone Build/ SHOLS_U2_01.03.1) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17\",\n\t\t\"dpi\": 1.5\n\t},\n\t{\n\t\t\"id\": \"samsung-galaxy-note-3\",\n\t\t\"title\": \"Samsung Galaxy Note 3\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\",\n\t\t\"dpi\": 3\n\t},\n\t{\n\t\t\"id\": \"blackberry-playbook\",\n\t\t\"title\": \"BlackBerry PlayBook\",\n\t\t\"width\": 1024,\n\t\t\"height\": 600,\n\t\t\"user-agent\": \"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"google-nexus-7-(1st-gen)\",\n\t\t\"title\": \"Google Nexus 7 (1st gen)\",\n\t\t\"width\": 966,\n\t\t\"height\": 604,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; Android 4.3; Nexus 7 Build/JSS15Q) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1547.72 Safari/537.36\",\n\t\t\"dpi\": 1.325\n\t},\n\t{\n\t\t\"id\": \"samsung-galaxy-tab-7-7\",\n\t\t\"title\": \"Samsung Galaxy Tab 7.7, 8.9, 10.1\",\n\t\t\"width\": 1280,\n\t\t\"height\": 800,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.2; en-us; SCH-I800 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"google-nexus-4\",\n\t\t\"title\": \"Google Nexus 4\",\n\t\t\"width\": 384,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.122 Mobile Safari/537.36\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"blackberry-classic\",\n\t\t\"title\": \"BlackBerry Classic\",\n\t\t\"width\": 390,\n\t\t\"height\": 374,\n\t\t\"user-agent\": \"Mozilla/5.0 (BB10; Kbd) AppleWebKit/537.35+ (KHTML, like Gecko) Version/10.3.1.1418 Mobile Safari/537.35+\",\n\t\t\"dpi\": 1.84375\n\t},\n\t{\n\t\t\"id\": \"apple-iphone-3gs\",\n\t\t\"title\": \"Apple iPhone 3GS\",\n\t\t\"width\": 320,\n\t\t\"height\": 480,\n\t\t\"user-agent\": \"Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_2_1 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"blackberry-z10\",\n\t\t\"title\": \"BlackBerry Z10\",\n\t\t\"width\": 384,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"lg-optimus-2x\",\n\t\t\"title\": \"LG Optimus 2X, Optimus 3D, Optimus Black\",\n\t\t\"width\": 320,\n\t\t\"height\": 533,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.2; en-us; LG-P990/V08c Build/FRG83) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1 MMS/LG-Android-MMS-V1.0/1.2\",\n\t\t\"dpi\": 1.5\n\t},\n\t{\n\t\t\"id\": \"nokia-lumia-7x0\",\n\t\t\"title\": \"Nokia Lumia 7X0, Lumia 8XX, Lumia 900, N800, N810, N900\",\n\t\t\"width\": 320,\n\t\t\"height\": 533,\n\t\t\"user-agent\": \"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 820)\",\n\t\t\"dpi\": 1.5\n\t},\n\t{\n\t\t\"id\": \"samsung-galaxy-s\",\n\t\t\"title\": \"Samsung Galaxy S, S II, W\",\n\t\t\"width\": 320,\n\t\t\"height\": 533,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.1; en-us; GT-I9000 Build/ECLAIR) AppleWebKit/525.10+ (KHTML, like Gecko) Version/3.0.4 Mobile Safari/523.12.2\",\n\t\t\"dpi\": 1.5\n\t},\n\t{\n\t\t\"id\": \"blackberry-z30\",\n\t\t\"title\": \"BlackBerry Z30\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"apple-ipad-mini\",\n\t\t\"title\": \"Apple iPad Mini\",\n\t\t\"width\": 1024,\n\t\t\"height\": 768,\n\t\t\"user-agent\": \"Mozilla/5.0 (iPad; CPU OS 4_3_5 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8L1 Safari/6533.18.5\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"motorola-droid-3\",\n\t\t\"title\": \"Motorola Droid 3, Droid 4, Droid Razr, Atrix 4G, Atrix 2\",\n\t\t\"width\": 540,\n\t\t\"height\": 960,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.2; en-us; Droid Build/FRG22D) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"amazon-kindle-fire-first-generation\",\n\t\t\"title\": \"Amazon Kindle Fire First Generation\",\n\t\t\"width\": 1024,\n\t\t\"height\": 600,\n\t\t\"user-agent\": \"Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_3; en-us; Silk/1.0.141.16-Gen4_11004310) AppleWebkit/533.16 (KHTML, like Gecko) Version/5.0 Safari/533.16 Silk-Accelerated=true\",\n\t\t\"dpi\": 1\n\t},\n\t{\n\t\t\"id\": \"samsung-galaxy-s-iii\",\n\t\t\"title\": \"Samsung Galaxy S III, Galaxy Nexus\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"lg-optimus-one\",\n\t\t\"title\": \"LG Optimus One\",\n\t\t\"width\": 213,\n\t\t\"height\": 320,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.2.1; en-us; LG-MS690 Build/FRG83) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1.5\n\t},\n\t{\n\t\t\"id\": \"google-nexus-10\",\n\t\t\"title\": \"Google Nexus 10\",\n\t\t\"width\": 1280,\n\t\t\"height\": 800,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; Android 4.3; Nexus 10 Build/JSS15Q) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1547.72 Safari/537.36\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"samsung-galaxy-note\",\n\t\t\"title\": \"Samsung Galaxy Note\",\n\t\t\"width\": 400,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.3; en-us; SAMSUNG-SGH-I717 Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 2\n\t},\n\t{\n\t\t\"id\": \"samsung-galaxy-s4\",\n\t\t\"title\": \"Samsung Galaxy S4\",\n\t\t\"width\": 360,\n\t\t\"height\": 640,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; Android 4.2.2; GT-I9505 Build/JDQ39) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.59 Mobile Safari/537.36\",\n\t\t\"dpi\": 3\n\t},\n\t{\n\t\t\"id\": \"htc-evo\",\n\t\t\"title\": \"HTC Evo, Touch HD, Desire HD, Desire\",\n\t\t\"width\": 320,\n\t\t\"height\": 533,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.2; en-us; Sprint APA9292KT Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1.5\n\t},\n\t{\n\t\t\"id\": \"google-nexus-s\",\n\t\t\"title\": \"Google Nexus S\",\n\t\t\"width\": 320,\n\t\t\"height\": 533,\n\t\t\"user-agent\": \"Mozilla/5.0 (Linux; U; Android 2.3.4; en-us; Nexus S Build/GRJ22) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\",\n\t\t\"dpi\": 1.5\n\t},\n\t{\n\t\t\"id\": \"apple-iphone-6\",\n\t\t\"title\": \"Apple iPhone 6\",\n\t\t\"width\": 375,\n\t\t\"height\": 667,\n\t\t\"user-agent\": \"Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.3 (KHTML, like Gecko) Version/8.0 Mobile/12A4345d Safari/600.1.4\",\n\t\t\"dpi\": 2\n\t}\n]\n","module.exports=[\n    {\n        \"id\": \"apple-phones\",\n        \"title\": \"Apple phones\",\n        \"devices\": [\"apple-iphone-3gs\", \"apple-iphone-4\", \"apple-iphone-5\", \"apple-iphone-6-plus\", \"apple-iphone-6\"]\n    },\n    {\n        \"id\": \"apple-tablets\",\n        \"title\": \"Apple tablets\",\n        \"devices\": [\"apple-ipad\", \"apple-ipad-mini\", \"apple-ipad-mini-2\"]\n    },\n    {\n        \"id\": \"apple-devices\",\n        \"title\": \"Apple devices (phones & tablets)\",\n        \"devices\": [\"apple-iphone-3gs\", \"apple-iphone-4\", \"apple-iphone-5\", \"apple-iphone-6-plus\", \"apple-iphone-6\", \"apple-ipad\", \"apple-ipad-mini\", \"apple-ipad-mini-2\"]\n    }\n]\n","'use strict';\n\nimport {combineReducers} from 'redux';\nimport {DEVICE_WALL, USER, UI} from './action-names';\n\nexport default combineReducers({devices, presets, deviceWallPicker, ui, user});\n\nfunction devices(state={}) {\n    return state;\n}\n\nfunction presets(state={}) {\n    return state;\n}\n\nfunction deviceWallPicker(state={}, action) {\n    switch (action.type) {\n        case DEVICE_WALL.SET_SELECTED:\n            if (!state.display || state.display.id !== action.item.id) {\n                state = {...state, display: action.item};\n            }\n            return state;\n\n        case DEVICE_WALL.SET_STATE:\n            return {\n                ...state,\n                state: action.state,\n                stateData: action.data\n            };\n\n        case DEVICE_WALL.TOGGLE_VISIBILITY:\n            let data = state.stateData || {};\n            return {\n                ...state,\n                stateData: {...data, visible: !data.visible}\n            };\n    }\n\n    return state;\n}\n\nfunction user(state={}, action) {\n    switch (action.type) {\n        case USER.SAVE_DEVICE:\n            let devices = removeItem(state.devices || [], action.device.id);\n            devices.push(action.device);\n            return {...state, devices};\n\n        case USER.REMOVE_DEVICE:\n            return {\n                ...state,\n                devices: removeItem(state.devices || [], action.id)\n            };\n\n        case USER.SAVE_PRESET:\n            let presets = removeItem(state.presets || [], action.preset.id);\n            presets.push(action.preset);\n            return {...state, presets};\n\n        case USER.REMOVE_PRESET:\n            return {\n                ...state,\n                presets: removeItem(state.presets || [], action.id)\n            };\n    }\n\n    return state;\n}\n\nfunction ui(state={}, action) {\n    switch (action.type) {\n        case UI.SET_MODE:\n            if (action.mode && action.mode !== state.mode) {\n                state = {...state, mode: action.mode};\n            }\n            return state;\n    }\n\n    return state;\n}\n\nfunction removeItem(items, id) {\n    return items.filter(item => item.id !== id);\n}\n","/**\n * Scroller component: overrides element content scroll so that both vertical\n * and horizontal `mousewheel` events produce nearly native horizontal content\n * scroll\n */\nimport {createElement, removeElement} from './utils';\n\nconst kPixelsPerLineStep = 40;  // from Blink source code\n\nexport default function setup(container, content, filter) {\n\tvar scroller = createElement('div', 'emmet-re-view__scroll-handler');\n\tvar sizer = createElement('div', 'emmet-re-view__scroll-sizer');\n\n\tscroller.appendChild(sizer);\n\tcontainer.appendChild(scroller);\n\n\tvar scrollOverrideTimer, prevState = {};\n\n\tvar scheduleScrollReset = () => {\n\t\tclearTimeout(scrollOverrideTimer);\n\t\tscrollOverrideTimer = setTimeout(restoreScroll, 500);\n\t};\n\n\tvar overrideScroll = data => {\n\t\tif (filter && !filter(data)) {\n\t\t\treturn;\n\t\t}\n\t\tscroller.style.zIndex = 100;\n\t\tscheduleScrollReset();\n\n\t\t// emulate first scroll tick\n\t\tvar scrollAmount = calculateScrollAmount(content, data);\n\t\tscroller.scrollLeft += scrollAmount.x;\n\t\tscroller.scrollTop += scrollAmount.y;\n\t};\n\n\tvar restoreScroll = () => {\n\t\tscrollOverrideTimer = null;\n\t\tif (scroller) {\n\t\t\tscroller.style.zIndex = '';\n\t\t}\n\t};\n\n\tvar syncScrollPosition = () => {\n\t\tvar state = getScrollState(scroller);\n\t\tif (state.left === prevState.left && state.top === prevState.top) {\n\t\t\t// console.warn('abort scroll handler');\n\t\t\treturn;\n\t\t}\n\n\t\tvar scrollPercent;\n\t\tif (Math.abs(state.left - prevState.left) > Math.abs(state.top - prevState.top)) {\n\t\t\t// did a horizontal scroll, sync vertical\n\t\t\tscrollPercent = state.leftPercent;\n\t\t\tscroller.scrollTop = state.topMax * scrollPercent;\n\t\t} else {\n\t\t\t// did a vertical scroll, sync horizontal\n\t\t\tscrollPercent = state.topPercent;\n\t\t\tscroller.scrollLeft = state.leftMax * scrollPercent;\n\t\t}\n\n\t\tcontent.scrollLeft = (content.scrollWidth - content.offsetWidth) * scrollPercent;\n\n\t\t// beacuse of fractional element dimentions, actual scroll position\n\t\t// may differ from ones weve set. So we have to retreive actual\n\t\t// scroll position from element\n\t\tprevState = getScrollState(scroller);\n\t};\n\n\tvar updateScroller = () => {\n\t\t// classList.toggle is buggy in Opera 12, use .add()/.remove()\n\t\tvar curScroll = content.scrollLeft;\n\t\tif (content.scrollWidth > content.offsetWidth) {\n\t\t\tcontainer.classList.remove('scroller_no-scroll');\n\t\t} else {\n\t\t\tcontainer.classList.add('scroller_no-scroll');\n\t\t}\n\t\tupdateScrollerSize(content, sizer);\n\t\tscroller.scrollLeft = curScroll;\n\t\tprevState.left = prevState.top = -1;\n\t\tsyncScrollPosition();\n\t};\n\n\tvar onWheel = evt => {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\toverrideScroll(evt);\n\t};\n\n\tvar onMouseWheel = evt => {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\toverrideScroll({\n\t\t\tdeltaX: Math.min(Math.abs(evt.wheelDeltaX), 20) / evt.detail,\n\t\t\tdeltaY: Math.min(Math.abs(evt.wheelDeltaY), 20) / evt.detail\n\t\t});\n\t};\n\n\tvar onScroll = evt => {\n\t\tscheduleScrollReset();\n\t\tsyncScrollPosition();\n\t};\n\n\tcontent.addEventListener('wheel', onWheel);\n\tcontent.addEventListener('mousewheel', onMouseWheel);\n\tscroller.addEventListener('scroll', onScroll);\n\tcontent.ownerDocument.defaultView.addEventListener('resize', updateScroller);\n\n\tupdateScroller();\n\n\treturn {\n\t\tupdate: updateScroller,\n\t\tdestroy() {\n\t\t\tcontainer.classList.remove('scroller_no-scroll');\n\t\t\tcontent.removeEventListener('wheel', onWheel);\n\t\t\tcontent.removeEventListener('mousewheel', onMouseWheel);\n\t\t\tscroller.removeEventListener('scroll', onScroll);\n\t\t\tcontent.ownerDocument.defaultView.removeEventListener('resize', updateScroller);\n\n\t\t\tremoveElement(scroller);\n\t\t\tscroller = sizer = container = content = null;\n\t\t}\n\t};\n}\n\nfunction getScrollState(elem) {\n\tvar left = elem.scrollLeft, top = elem.scrollTop;\n\tvar leftViewport = elem.offsetWidth, topViewport = elem.offsetHeight;\n\tvar leftMax = elem.scrollWidth - leftViewport;\n\tvar topMax = elem.scrollHeight - topViewport;\n\n\treturn {\n\t\tleft,\n\t\tleftMax,\n\t\tleftViewport,\n\t\tleftPercent: Math.min(left / leftMax, 1),\n\t\ttop,\n\t\ttopMax,\n\t\ttopViewport,\n\t\ttopPercent: Math.min(top / topMax, 1)\n\t};\n}\n\nfunction updateScrollerSize(content, sizer) {\n\tvar scrollAmount = content.scrollWidth - content.offsetWidth;\n\tsizer.style.paddingRight = sizer.style.paddingBottom = `${scrollAmount}px`;\n}\n\nfunction calculateScrollAmount(elem, data) {\n\tvar x = data.deltaX, y = data.deltaY;\n\tswitch (data.deltaMode) {\n\t\tcase 1: // DOM_DELTA_LINE\n\t\t\t// in Blink, line height does not depends on font-size\n\t\t\tx *= kPixelsPerLineStep;\n\t\t\ty *= kPixelsPerLineStep;\n\t\t\tbreak;\n\t\tcase 2: // DOM_DELTA_PAGE\n\t\t\tx *= calculatePageScrollAmount(elem.offsetWidth);\n\t\t\ty *= calculatePageScrollAmount(elem.offsetHeight);\n\t\t\tbreak;\n\t}\n\n\treturn {x, y};\n}\n\nfunction calculatePageScrollAmount(pageSize) {\n    var minPageStep = length * 0.875;\n    var pageStep = Math.max(minPageStep, pageSize - 40);\n    return Math.max(pageStep, 1);\n}\n","function extend(obj) {\n\tfor (var i = 1, il = arguments.length, source; i < il; i++) {\n\t\tsource = arguments[i];\n\t\tif (source) {\n\t\t\tfor (var prop in source) {\n\t\t\t\tobj[prop] = source[prop];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn obj;\n}\n\nvar dummyFn = function() {};\nvar anims = [];\nvar idCounter = 0;\n\nvar defaults = {\n\tduration: 500, // ms\n\tdelay: 0,\n\teasing: 'linear',\n\tstart: dummyFn,\n\tstep: dummyFn,\n\tcomplete: dummyFn,\n\tautostart: true,\n\treverse: false\n};\n\nexport default function(options) {\n\treturn new Tween(options);\n}\n\n/**\n * Get or set default value\n * @param  {String} name\n * @param  {Object} value\n * @return {Object}\n */\nexport function defaults(name, value) {\n\tif (typeof value != 'undefined') {\n\t\tdefaults[name] = value;\n\t}\n\n\treturn defaults[name];\n}\n\n/**\n * Returns all active animation objects.\n * For debugging mostly\n * @return {Array}\n */\nexport function _all() {\n\treturn anims;\n}\n\nexport function stop() {\n\tanims.forEach(anim => anim.stop());\n\tanims.length = 0;\n}\n\nexport var easings = {\n\tlinear(t, b, c, d) {\n\t\treturn c * t / d + b;\n\t},\n\tinQuad(t, b, c, d) {\n\t\treturn c*(t/=d)*t + b;\n\t},\n\toutQuad(t, b, c, d) {\n\t\treturn -c *(t/=d)*(t-2) + b;\n\t},\n\tinOutQuad(t, b, c, d) {\n\t\tif((t/=d/2) < 1) return c/2*t*t + b;\n\t\treturn -c/2 *((--t)*(t-2) - 1) + b;\n\t},\n\tinCubic(t, b, c, d) {\n\t\treturn c*(t/=d)*t*t + b;\n\t},\n\toutCubic(t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t + 1) + b;\n\t},\n\tinOutCubic(t, b, c, d) {\n\t\tif((t/=d/2) < 1) return c/2*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t + 2) + b;\n\t},\n\tinExpo(t, b, c, d) {\n\t\treturn(t==0) ? b : c * Math.pow(2, 10 *(t/d - 1)) + b - c * 0.001;\n\t},\n\toutExpo(t, b, c, d) {\n\t\treturn(t==d) ? b+c : c * 1.001 *(-Math.pow(2, -10 * t/d) + 1) + b;\n\t},\n\tinOutExpo(t, b, c, d) {\n\t\tif(t==0) return b;\n\t\tif(t==d) return b+c;\n\t\tif((t/=d/2) < 1) return c/2 * Math.pow(2, 10 *(t - 1)) + b - c * 0.0005;\n\t\treturn c/2 * 1.0005 *(-Math.pow(2, -10 * --t) + 2) + b;\n\t},\n\tinElastic(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\treturn -(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n\t},\n\toutElastic(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\treturn(a*Math.pow(2,-10*t) * Math.sin((t*d-s)*(2*Math.PI)/p ) + c + b);\n\t},\n\tinOutElastic(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b; \n\t\tif((t/=d/2)==2) return b+c;\n\t\tif(!p) p=d*(.3*1.5);\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; }       else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\tif(t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n\t\treturn a*Math.pow(2,-10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n\t},\n\tinBack(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\treturn c*(t/=d)*t*((s+1)*t - s) + b;\n\t},\n\toutBack(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\treturn c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n\t},\n\tinOutBack(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\tif((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n\t\treturn c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n\t},\n\tinBounce(t, b, c, d) {\n\t\treturn c - this.outBounce(t, d-t, 0, c, d) + b;\n\t},\n\toutBounce(t, b, c, d) {\n\t\tif((t/=d) <(1/2.75)) {\n\t\t\treturn c*(7.5625*t*t) + b;\n\t\t} else if(t <(2/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n\t\t} else if(t <(2.5/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n\t\t} else {\n\t\t\treturn c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n\t\t}\n\t},\n\tinOutBounce(t, b, c, d) {\n\t\tif(t < d/2) return this.inBounce(t*2, 0, c, d) * .5 + b;\n\t\treturn this.outBounce(t*2-d, 0, c, d) * .5 + c*.5 + b;\n\t},\n\toutHard(t, b, c, d) {\n\t\tvar ts = (t/=d)*t;\n\t\tvar tc = ts*t;\n\t\treturn b + c*(1.75*tc*ts + -7.4475*ts*ts + 12.995*tc + -11.595*ts + 5.2975*t);\n\t}\n};\n\nexport class Tween {\n\tconstructor(options) {\n\t\tthis.options = extend({}, defaults, options);\n\t\t\n\t\tvar e = this.options.easing;\n\t\tif (typeof e == 'string') {\n\t\t\tif (!easings[e]) {\n\t\t\t\tthrow new Error('Unknown \"' + e + '\" easing function');\n\t\t\t}\n\t\t\tthis.options.easing = easings[e];\n\t\t}\n\t\t\n\t\tif (typeof this.options.easing !== 'function') {\n\t\t\tthrow 'Easing should be a function';\n\t\t}\n\n\t\tthis._id = 'tw' + (idCounter++);\n\t\t\n\t\tif (this.options.autostart) {\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\t/**\n\t * Start animation from the beginning\n\t */\n\tstart() {\n\t\tif (!this.animating) {\n\t\t\tthis.pos = 0;\n\t\t\tthis.startTime = Date.now() + (this.options.delay || 0);\n\t\t\tthis.infinite = this.options.duration === 'infinite';\n\t\t\tthis.endTime = this.infinite ? 0 : this.startTime + this.options.duration;\n\t\t\tthis.animating = true;\n\t\t\tthis.options.start(this);\n\t\t\taddToQueue(this);\n\t\t}\n\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Stop animation\n\t */\n\tstop() {\n\t\tif (this.animating) {\n\t\t\tthis.animating = false;\n\t\t\tif (this.options.complete) {\n\t\t\t\tthis.options.complete(this);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\ttoggle() {\n\t\tif (this.animating) {\n\t\t\tthis.stop();\n\t\t} else {\n\t\t\tthis.start();\n\t\t}\n\t}\n}\n\nfunction mainLoop() {\n\tif (!anims.length) {\n\t\t// no animations left, stop polling\n\t\treturn;\n\t}\n\t\n\tvar now = Date.now();\n\tvar filtered = [], tween, opt;\n\n\t// do not use Array.filter() of _.filter() function\n\t// since tweens callbacks can add new animations\n\t// in runtime. In this case, filter function will loose\n\t// newly created animation\n\tfor (var i = 0; i < anims.length; i++) {\n\t\ttween = anims[i];\n\n\t\tif (!tween.animating) {\n\t\t\tcontinue;\n\t\t}\n\n\t\topt = tween.options;\n\n\t\tif (tween.startTime > now) {\n\t\t\tfiltered.push(tween);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (tween.infinite) {\n\t\t\topt.step(0, tween);\n\t\t\tfiltered.push(tween);\n\t\t} else if (tween.pos === 1 || tween.endTime <= now) {\n\t\t\ttween.pos = 1;\n\t\t\topt.step(opt.reverse ? 0 : 1, tween);\n\t\t\ttween.stop();\n\t\t} else {\n\t\t\ttween.pos = opt.easing(now - tween.startTime, 0, 1, opt.duration);\n\t\t\topt.step(opt.reverse ? 1 - tween.pos : tween.pos, tween);\n\t\t\tfiltered.push(tween);\n\t\t}\t\t\t\n\t}\n\n\tanims = filtered;\n\n\tif (anims.length) {\n\t\trequestAnimationFrame(mainLoop);\n\t}\n}\n\nfunction addToQueue(tween) {\n\tif (anims.indexOf(tween) === -1) {\n\t\tanims.push(tween);\n\t\tif (anims.length === 1) {\n\t\t\trequestAnimationFrame(mainLoop);\n\t\t}\n\t}\n}","'use strict';\n\nvar propCache = {};\nvar unitless = ['scale', 'scaleX', 'scaleY', 'opacity', 'zIndex', 'z-index'];\nvar units = {\n\t'skew': 'deg',\n\t'skewX': 'deg',\n\t'skewY': 'deg',\n\t'rotate': 'deg',\n\t'rotateX': 'deg',\n\t'rotateY': 'deg',\n};\n\nvar sliceFn = Array.prototype.slice;\nexport var isOldOpera = Object.prototype.toString.call(window.opera) === '[object Opera]';\n\nexport function createElement(name, className) {\n\tvar elem = document.createElement(name);\n\tif (className) {\n\t\telem.className = className;\n\t}\n\treturn elem;\n}\n\nexport function removeElement(elem) {\n\tif (elem && elem.parentNode) {\n\t\telem.parentNode.removeChild(elem);\n\t}\n}\n\nexport function testPropAll(prop) {\n\tif (prop in propCache) {\n\t\treturn propCache[prop];\n\t}\n\n\tvar el = document.createElement('div');\n\tvar style = el.style;\n\n\tvar prefixes = ['o', 'ms', 'moz', 'webkit'];\n\tvar props = [prop];\n\tvar capitalize = function(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.substr(1);\n\t};\n\n\tprop = prop.replace(/\\-([a-z])/g, function(str, ch) {\n\t\treturn ch.toUpperCase();\n\t});\n\n\tvar capProp = capitalize(prop);\n\tprefixes.forEach(function(prefix) {\n\t\tprops.push(prefix + capProp, capitalize(prefix) + capProp);\n\t});\n\n\treturn propCache[prop] = props.filter(p => p in style);\n}\n\n/**\n * ,    CSS-\n *       \n * @param  {String} prop CSS-,    \n * @return {String}        (   ),  \n * ,  `null`\n */\nexport function testProp(prop) {\n\treturn testPropAll(prop)[0];\n}\n\n/**\n *    .     \n * css-/.    \n * `transform`,     CSS-\n * @param {Element} elem\n * @param {Object} css\n * @param {Object} transform\n */\nexport function setStyle(elem, css, transform) {\n\tif (css) {\n\t\tObject.keys(css).forEach(k => {\n\t\t\tvar val = css[k];\n\t\t\tif (typeof val === 'number' && unitless.indexOf(k) === -1) {\n\t\t\t\tval += 'px';\n\t\t\t}\n\t\t\telem.style[k] = val;\n\t\t});\n\t}\n\n\tif (transform) {\n\t\tsetTransform(elem, transform);\n\t}\n\n\treturn elem;\n}\n\nexport function setTransform(elem, transform) {\n\tvar transformProp = testProp('transform');\n\tif (typeof transform === 'object') {\n\t\ttransform = Object.keys(transform).map(k => {\n\t\t\tvar val = transform[k];\n\t\t\tvar strVal = typeof val === 'number' ? val.toFixed(5) : val;\n\t\t\tif (typeof val === 'number' && unitless.indexOf(k) === -1) {\n\t\t\t\tstrVal += units[k] || 'px';\n\t\t\t}\n\n\t\t\treturn k + '(' + strVal + ')';\n\t\t}).join(' ');\n\t}\n\n\tif (transform && transform !== 'none' && !~transform.indexOf('translateZ') && !isOldOpera) {\n\t\ttransform += ' translateZ(0)';\n\t}\n\n\telem.style[transformProp] = transform;\n}\n\nexport function clamp(value, min=-Infinity, max=+Infinity) {\n\treturn Math.min(Math.max(min, value), max);\n}\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing.\n *\n * @src underscore.js\n *\n * @param  {Function} func\n * @param  {Number} wait\n * @param  {Boolean} immediate\n * @return {Function}\n */\nexport function debounce(func, wait, immediate) {\n\tvar timeout, args, context, timestamp, result;\n\n\tvar later = function() {\n\t\tvar last = Date.now() - timestamp;\n\n\t\tif (last < wait && last >= 0) {\n\t\t\ttimeout = setTimeout(later, wait - last);\n\t\t} else {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) {\n\t\t\t\tresult = func.apply(context, args);\n\t\t\t\tif (!timeout) context = args = null;\n\t\t\t}\n\t\t}\n\t};\n\n\treturn function() {\n\t\tcontext = this;\n\t\targs = arguments;\n\t\ttimestamp = Date.now();\n\t\tvar callNow = immediate && !timeout;\n\t\tif (!timeout) timeout = setTimeout(later, wait);\n\t\tif (callNow) {\n\t\t\tresult = func.apply(context, args);\n\t\t\tcontext = args = null;\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nvar _scrollerWidth = null;\nexport function measureScrollWidth() {\n\tif (_scrollerWidth === null) {\n\t\tvar outer = createElement('div');\n\t\tvar inner = createElement('div');\n\n\t\touter.style.cssText = 'position:absolute;top:0;left:0;width:100px;height:100px;overflow:auto;padding:0;margin:0;display:block;z-index:200';\n\t\tinner.style.cssText = 'height:200px;display:block;padding:0;margin:0;';\n\t\touter.appendChild(inner);\n\t\tdocument.body.appendChild(outer);\n\t\t_scrollerWidth = Math.max(0, 100 - inner.offsetWidth);\n\t\tremoveElement(outer);\n\t}\n\n\treturn _scrollerWidth;\n}\n","/**\n * Async view mounter.\n * If all views (iframes) will be mounted simultaneously, the main tread will\n * be locked for a long time until all views/iframes are parsed and ready.\n * This module will mount given view list one-by-one \n */\n'use strict';\n\nexport default function(views) {\n\treturn views.reduce((r, v) => r.then(() => v.mount()), Promise.resolve());\n};","/**\n * Polls document in given iframe to detect if its ready (DOMContentLoaded may \n * not be availble for <iframe> documents since it will change document after \n * it will start loading new URL)\n */\n'use strict';\n\nvar queue = [];\nvar pollTimer = null;\n\n/**\n * Poll for document update in given iframe. We dont need to wait until page\n * is fully loaded (`load` event), we just need a Document of the frame, which \n * should appear faster. Unfortunately, `DOMContentLoaded` is not available.\n * @param  {Element} iframe\n * @return {Promise}\n */\nexport default function(iframe, waitTimeout=10000) {\n\treturn new Promise((resolve, reject) => {\n\t\tqueue.push({\n\t\t\tiframe,\n\t\t\twaitTimeout,\n\t\t\tresolve, \n\t\t\treject,\n\t\t\tstart: Date.now()\n\t\t});\n\t\tpoll();\n\t});\n}\n\nexport function hasValidDocument(iframe) {\n\tvar doc = iframe.contentDocument;\n\tvar defaultSrc = iframe.getAttribute('data-default-src');\n\treturn doc && doc.defaultView && doc.readyState === 'complete' && doc.URL !== defaultSrc;\n}\n\nfunction poll() {\n\tif (!pollTimer) {\n\t\tpollTimer = setTimeout(pollLoop, 200);\n\t}\n}\n\nfunction pollLoop() {\n\tresetTimer();\n\n\tvar now = Date.now();\n\tqueue = queue.filter((q, i) => {\n\t\tif (hasValidDocument(q.iframe)) {\n\t\t\tq.resolve(q.iframe.contentDocument);\n\t\t\treturn false;\n\t\t}\n\n\t\tif (q.start + q.waitTimeout < now) {\n\t\t\tlet err = new Error('Document poll timeout');\n\t\t\terr.code = 'ETIMEOUT';\n\t\t\tq.reject(err);\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t});\n\n\tif (queue.length) {\n\t\tpoll();\n\t}\n}\n\nfunction resetTimer() {\n\tif (pollTimer) {\n\t\tclearTimeout(pollTimer);\n\t\tpollTimer = null;\n\t}\n}","/**\n * View Reel: all views are on a single scrollable line\n */\n'use strict';\n\nimport View from './view';\nimport tween from '../tween';\nimport overrideScroll from '../scroller';\nimport viewSync from '../controller/view-sync';\nimport mountAll from './assets/mount';\nimport {createElement, removeElement, testProp} from '../utils';\n\nexport default function(container, url, specs, options={}) {\n\tvar elem = createElement('div', 'emmet-re-view__reel');\n\tvar views = specs.map(spec => new View(url, spec));\n\tvar sync, scroll;\n\n\tvar onResizeStart = () => elem.classList.add('emmet-re-view__reel_resize');\n\tvar onResizeEnd = () => elem.classList.remove('emmet-re-view__reel_resize');\n\n\treturn {\n\t\tget element() {\n\t\t\treturn elem;\n\t\t},\n\t\tshow() {\n\t\t\tviews.forEach(view => {\n\t\t\t\tview.on('resize:start', onResizeStart);\n\t\t\t\tview.on('resize:end', onResizeEnd);\n\t\t\t\telem.appendChild(view.element);\n\t\t\t});\n\t\t\tcontainer.appendChild(elem);\n\t\t\treturn animate(views).then(views => {\n\t\t\t\tmountAll(views);\n\t\t\t\tsync = viewSync(views);\n\t\t\t\tscroll = overrideScroll(container, elem, scrollFilter);\n\t\t\t});\n\t\t},\n\t\tdestroy() {\n\t\t\tsync && sync.destroy();\n\t\t\tscroll && scroll.destroy();\n\t\t\treturn animate(views, true).then(views => {\n\t\t\t\tviews.forEach(view => {\n\t\t\t\t\tview.destroy();\n\t\t\t\t\tview.off('resize:start', onResizeStart);\n\t\t\t\t\tview.off('resize:end', onResizeEnd);\n\t\t\t\t\tremoveElement(view.element);\n\t\t\t\t});\n\t\t\t\tremoveElement(elem);\n\t\t\t});\n\t\t}\n\t};\n};\n\n/**\n * Animate views show/hide\n * @param  {Array} views Array of views to animate\n * @return {Promise} A Promise that resolved when animation is complete\n */\nfunction animate(views, reverse=false) {\n\treturn new Promise((resolve, reject) => {\n\t\t// animate only visible views\n\t\tvar vpWidth = window.innerWidth;\n\t\tlet visibleViews = views.filter(view => {\n\t\t\tlet rect = view.element.getBoundingClientRect();\n\t\t\treturn Math.min(rect.right, vpWidth) > Math.max(rect.left, 0);\n\t\t});\n\n\t\tif (!visibleViews.length) {\n\t\t\treturn resolve(views);\n\t\t}\n\n\t\tlet animOptions = {\n\t\t\tduration: 900,\n\t\t\teasing: 'inOutCubic',\n\t\t\treverse,\n\t\t\tautostart: true,\n\t\t\tprop: testProp('transform'),\n\t\t\tstep: animStep\n\t\t};\n\n\t\tif (reverse) {\n\t\t\tvisibleViews.reverse();\n\t\t}\n\n\t\tvisibleViews.forEach((view, i, arr) => {\n\t\t\tlet opt = {\n\t\t\t\t...animOptions,\n\t\t\t\tdelay: 70 * i,\n\t\t\t\telem: view.element\n\t\t\t};\n\t\t\tif (i === arr.length - 1) {\n\t\t\t\topt.complete = () => resolve(views);\n\t\t\t}\n\t\t\tview.element.style.opacity = reverse ? 1 : 0;\n\t\t\ttween(opt);\n\t\t});\n\t});\n}\n\nfunction animStep(pos) {\n\tthis.elem.style.opacity = pos;\n\tthis.elem.style[this.prop] = `translateX(${500 * (1 - pos)}px)`;\n}\n\nfunction scrollFilter(evt) {\n\t// do not override vertical scroll if mouse is over the View\n\tvar ctx = evt.target;\n\twhile (ctx && ctx.nodeType !== 9) {\n\t\tif (ctx.classList.contains('emmet-re-view__item-iframe')) {\n\t\t\treturn false;\n\t\t}\n\t\tctx = ctx.parentNode;\n\t}\n\n\treturn true;\n}\n","/**\n * Device Wall: a set of device-sized views on a zoomable view\n */\n'use strict';\n\nimport View from './view';\nimport tween from '../tween';\nimport mountAll from './assets/mount';\nimport viewSync from '../controller/view-sync';\nimport wallController from '../controller/wall';\nimport {createElement, removeElement, setStyle, testProp, debounce, measureScrollWidth} from '../utils';\n\nconst area = spec => spec.width * spec.height;\n\nexport default function(container, url, specs, options={}) {\n\tvar sync, controller;\n\tvar elem = createElement('div', 'emmet-re-view__wall');\n\n\t// sort given devices by view area for optimal layout\n\tspecs = specs.sort((a, b) => area(a) - area(b));\n\n\tvar views = specs.map(spec => new View(url, spec));\n\tvar update = () => {\n\t\tvar itemMargin = options.itemMargin || 0;\n\t\tvar scrollWidth = measureScrollWidth();\n\t\tvar itemSizes = specs.map(spec => ({\n\t\t\twidth:  spec.width + itemMargin * 2 + scrollWidth,\n\t\t\theight: spec.height + itemMargin * 2\n\t\t}));\n\t\tvar rect = getRect(container);\n\n\t\t// make sure wall has optimal layout and completely visible\n\t\tvar size = calculateOptimalWallSize(itemSizes, rect);\n\t\tvar scale = Math.min(1, rect.width / size.width, rect.height / size.height);\n\t\tsetStyle(elem, {width: size.width, height: size.height});\n\t\telem.setAttribute('data-min-scale', scale);\n\t\telem.setAttribute('data-max-scale', 1);\n\t\tcontroller && controller.update();\n\t};\n\n\tvar onResize = debounce(update, 500);\n\n\treturn {\n\t\tget element() {\n\t\t\treturn elem;\n\t\t},\n\t\tshow() {\n\t\t\tvar itemMargin = options.itemMargin || 0;\n\t\t\tupdate(container);\n\t\t\tviews.forEach(view => {\n\t\t\t\tview.element.style.margin = itemMargin + 'px';\n\t\t\t\telem.appendChild(view.element);\n\t\t\t});\n\n\t\t\tcontainer.appendChild(elem);\n\t\t\tcontroller = wallController(elem, options);\n\t\t\telem.ownerDocument.defaultView.addEventListener('resize', onResize);\n\t\t\treturn animate(views).then(views => {\n\t\t\t\tmountAll(views);\n\t\t\t\tsync = viewSync(views);\n\t\t\t});\n\t\t},\n\n\t\tdestroy() {\n\t\t\tsync && sync.destroy();\n\t\t\tcontroller && controller.destroy();\n\t\t\telem.ownerDocument.defaultView.removeEventListener('resize', onResize);\n\t\t\treturn animate(views, true).then(views => {\n\t\t\t\tviews.forEach(view => {\n\t\t\t\t\tview.destroy();\n\t\t\t\t\tremoveElement(view.element);\n\t\t\t\t});\n\t\t\t\tremoveElement(elem);\n\t\t\t\tcontainer = elem = views = null;\n\t\t\t});\n\t\t}\n\t};\n};\n\nfunction calculateOptimalWallSize(specs) {\n\tvar overallWidth = sum(specs, 'width');\n\tvar maxViewWidth = max(specs, 'width');\n\tvar delta = overallWidth - maxViewWidth;\n\n\t// since we wont have too much devices/specs, we can use brute force\n\t// to calculate optimal layout\n\tvar sizes = [];\n\tfor (let i = 0, attempts = specs.length; i <= attempts; i++) {\n\t\tsizes.push(calculateWallSize(specs, maxViewWidth + delta * (i / attempts)));\n\t}\n\n\t// find best layout closest to current window ratio\n\tlet maxScale = rect => Math.min(window.innerWidth / rect.width, window.innerHeight / rect.height);\n\treturn sizes.sort((a, b) => maxScale(b) - maxScale(a))[0];\n}\n\nfunction calculateWallSize(specs, maxWidth) {\n\tvar row = [], rows = [row], rowWidth = 0;\n\tspecs.forEach(spec => {\n\t\tif (rowWidth + spec.width > maxWidth) {\n\t\t\trows.push(row = []);\n\t\t\trowWidth = 0;\n\t\t}\n\n\t\trowWidth += spec.width;\n\t\trow.push(spec);\n\t});\n\n\tvar rowSizes = rows\n\t.filter(row => row.length)\n\t.map(row => ({\n\t\twidth:  sum(row, 'width'),\n\t\theight: max(row, 'height'),\n\t\titems:  row.length\n\t}));\n\n\treturn {\n\t\twidth:  max(rowSizes, 'width'),\n\t\theight: sum(rowSizes, 'height'),\n\t\tmaxItemsInRow: max(rowSizes, 'items')\n\t};\n}\n\nfunction getRect(elem) {\n\treturn {\n\t\twidth: elem.offsetWidth,\n\t\theight: elem.offsetHeight\n\t};\n}\n\nfunction animate(views, reverse=false) {\n\tvar prop = testProp('transform');\n\treturn Promise.all(views.map(view => new Promise(complete => {\n\t\tview.element.style.opacity = reverse ? 1 : 0;\n\t\ttween({\n\t\t\tduration: rnd(800, 1200)|0,\n\t\t\tdelay: rnd(0, 200)|0,\n\t\t\teasing: 'inOutExpo',\n\t\t\try: rnd(-120, 120),\n\t\t\tz:  rnd(1000, 1800),\n\t\t\telem: view.element,\n\t\t\tstep: animStep,\n\t\t\tautostart: true,\n\t\t\treverse,\n\t\t\tprop,\n\t\t\tcomplete\n\t\t});\n\t})))\n\t.then(() => {\n\t\tviews.forEach(v => v.element.style[prop] = '');\n\t\treturn views;\n\t});\n}\n\nfunction animStep(pos) {\n\tvar rpos = 1 - pos;\n\tthis.elem.style.opacity = pos;\n\tthis.elem.style[this.prop] = `translateZ(${this.z * rpos}px) rotateY(${this.ry * rpos}deg)`;\n}\n\nfunction max(arr, key) {\n\treturn arr.reduce((result, obj) => Math.max(result, obj[key]), -Infinity);\n}\n\nfunction sum(arr, key) {\n\treturn arr.reduce((result, obj) => obj[key] + result, 0);\n}\n\nfunction rnd(min, max) {\n\treturn min + (max - min) * Math.random();\n}\n","/**\n * A generic view that displays given URL in iframe\n */\n'use strict';\n\nimport EventEmitter from 'eventemitter3';\nimport {createElement, removeElement, measureScrollWidth} from '../utils';\nimport {default as pollDocument, hasValidDocument} from './assets/poll-document'\n\nconst defaultOptions = {\n\tminWidth: 200,\n\tmaxWidth: 2550,\n\tdefaultViewportWidth: 980,\n\tusePageViewport: false\n};\n\nconst defaultViewport = {};\nvar idCounter = 0;\n\nexport default class View extends EventEmitter {\n\tconstructor(url, options={}) {\n\t\tsuper();\n\t\tthis.id = 'v' + (++idCounter);\n\t\tthis.url = url;\n\t\tthis.options = {...defaultOptions, ...options};\n\n\t\tthis._iframe = null;\n\t\tthis._downscale = 1;\n\t\tthis.element = createElement('div', 'emmet-re-view__item');\n\t\tthis.element.setAttribute('data-label', this.options.label || '');\n\t\tthis.width = options.width;\n\t\tthis.height = options.height;\n\t\tthis.viewport = {};\n\n\t\tif (options.resize) {\n\t\t\tthis._resizeHandle = createElement('div', 'emmet-re-view__item-resize-handle');\n\t\t\tsetupResizeHandle(this._resizeHandle, this);\n\t\t\tthis.element.appendChild(this._resizeHandle);\n\t\t}\n\n\t\tthis.element.appendChild(createElement('div', 'emmet-re-view__item-shadow'));\n\n\t\t// watch document lifecycle: detect when document was loaded and if its\n\t\t// location was changed\n\t\tthis.on('mount', () => watchDocument(this));\n\n\t\t// every time document becomes available, refresh view\n\t\tthis.on('document-ready', doc => {\n\t\t\tthis.element.classList.add('emmet-re-view__item_ready');\n\t\t\tthis.viewport = getPageViewport(doc);\n\t\t\tthis.refresh();\n\t\t});\n\n\t\tif (options.autoMount) {\n\t\t\tthis.mount();\n\t\t}\n\t}\n\n\tget width() {\n\t\treturn this._width.valueOf();\n\t}\n\n\tset width(value) {\n\t\tvar d = new Dimention(value);\n\t\tif (d.unit === 'px') {\n\t\t\t// apply constrains\n\t\t\td.value = Math.min(Math.max(d.value, this.options.minWidth), this.options.maxWidth);\n\t\t}\n\n\t\tif (!this._width || !this._width.equals(d)) {\n\t\t\tthis._width = d;\n\t\t\tthis._updateElementSize();\n\t\t}\n\t}\n\n\tget height() {\n\t\treturn this._height.valueOf();\n\t}\n\n\tset height(value) {\n\t\tvar d = new Dimention(value);\n\t\td.value = Math.max(0, d.value);\n\t\tif (!this._height || !this._height.equals(d)) {\n\t\t\tthis._height = d;\n\t\t\tthis._updateElementSize();\n\t\t}\n\t}\n\n\tget widthRatio() {\n\t\tif (!this.options.usePageViewport) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tvar originalWidth = this._width.value;\n\t\tvar width = this.viewport.width || this.options.defaultViewportWidth;\n\t\tif (width === 'device-width') {\n\t\t\twidth = originalWidth;\n\t\t}\n\n\t\t// make sure width is not lower that actual device width\n\t\treturn Math.max(width, originalWidth) / originalWidth;\n\t}\n\n\tget realWidth() {\n\t\treturn this._width.valueOf(this.widthRatio);\n\t}\n\n\tget realHeight() {\n\t\tvar scale = this.options.usePageViewport ? this.widthRatio : 1;\n\t\treturn this._height.valueOf(scale / this._downscale);\n\t}\n\n\tget label() {\n\t\treturn ('label' in this.options) ? this.options.label : `${this.realWidth}${this.realHeight}`;\n\t}\n\n\trefresh() {\n\t\tthis._updateElementSize();\n\t}\n\n\t_updateElementSize() {\n\t\tif (this.element && this._width && this._height) {\n\t\t\tlet [width, height] = [this._width, this._height];\n\t\t\tlet maxVp = this.options.maxViewportWidth;\n\t\t\tlet scrollWidth = measureScrollWidth();\n\t\t\tif (scrollWidth && width.unit === 'px') {\n\t\t\t\twidth = width.copy(width.value + scrollWidth);\n\t\t\t}\n\n\t\t\tif (maxVp && width.unit === 'px') {\n\t\t\t\t// restrict width to maxViewportWidth and downscale iframe\n\t\t\t\t// to given ratio\n\t\t\t\tthis._downscale = Math.min(1, maxVp / width.value);\n\t\t\t\twidth = width.copy(Math.min(width.value, maxVp));\n\t\t\t}\n\n\t\t\tresize(this.element, {width, height});\n\t\t\tthis._updateIframeSize();\n\t\t}\n\t}\n\n\t_updateIframeSize() {\n\t\tif (this._iframe && this._width && this._height) {\n\t\t\tlet width = this.realWidth;\n\t\t\tif (/px$/.test(width)) {\n\t\t\t\twidth = (parseFloat(width) + measureScrollWidth()) + 'px';\n\t\t\t}\n\n\t\t\tresize(this._iframe, {\n\t\t\t\twidth,\n\t\t\t\theight: this.realHeight,\n\t\t\t\tscale: this._downscale / this.widthRatio\n\t\t\t});\n\t\t}\n\t}\n\n\tgetDocument() {\n\t\tif (!this.isMounted) {\n\t\t\treturn Promise.reject(new ViewError('ENOTMOUNTED', 'Document frame is not mounted'));\n\t\t}\n\n\t\tvar iframe = this._iframe;\n\t\tif (hasValidDocument(iframe)) {\n\t\t\treturn Promise.resolve(iframe.contentDocument);\n\t\t}\n\n\t\t// looks like frame document is not loaded yet\n\t\treturn Promise.race([pollDocument(iframe), waitForLoad(iframe)]);\n\t}\n\n\tmount() {\n\t\tif (!this._iframe) {\n\t\t\tthis._iframe = createElement('iframe', 'emmet-re-view__item-iframe');\n\t\t\tthis._updateIframeSize();\n\t\t\tthis._iframe.src = this.url;\n\t\t}\n\n\t\tif (!this._iframe.parentNode) {\n\t\t\tlet target = this.element.querySelector('.emmet-re-view__item-iframe-holder');\n\t\t\tif (!target) {\n\t\t\t\ttarget = createElement('div', 'emmet-re-view__item-iframe-holder');\n\t\t\t\tthis.element.appendChild(target);\n\t\t\t}\n\t\t\ttarget.appendChild(this._iframe);\n\t\t\tlet defaultDoc = this._iframe.contentDocument;\n\t\t\tthis._iframe.setAttribute('data-default-src', defaultDoc && defaultDoc.URL);\n\t\t\tthis.emit('mount', this._iframe);\n\t\t}\n\n\t\treturn this.getDocument();\n\t}\n\n\tunmount() {\n\t\tif (this._iframe) {\n\t\t\tremoveElement(this._iframe);\n\t\t\tthis.emit('unmount', this._iframe);\n\t\t}\n\t\treturn this._iframe;\n\t}\n\n\tget isMounted() {\n\t\treturn !!this._iframe;\n\t}\n\n\tdestroy() {\n\t\tif (this._iframe) {\n\t\t\tthis.unmount();\n\t\t\tremoveElement(this._resizeHandle);\n\t\t\tthis.element = this._resizeHandle = this._iframe = null;\n\t\t\tthis.emit('destroy');\n\t\t}\n\t}\n};\n\nexport class ViewError extends Error {\n\tconstructor(code, message) {\n\t\tsuper(message || code);\n\t\tthis.code = code;\n\t}\n};\n\nclass Dimention {\n\tconstructor(value, unit='px') {\n\t\tif (typeof value === 'string') {\n\t\t\tlet m = value.match(/^(\\d+(?:\\.\\d*)?)(.*)$/);\n\t\t\tif (!m) {\n\t\t\t\tthrow new Error('Invalid number format: ' + value);\n\t\t\t}\n\t\t\tvalue = parseFloat(m[1]);\n\t\t\tunit = m[2] || unit;\n\t\t} else if (value instanceof Dimention) {\n\t\t\t[value, unit] = [value.value, value.unit];\n\t\t}\n\n\t\tthis.value = value;\n\t\tthis.unit = unit;\n\t}\n\n\tcopy(value=this.value, unit=this.unit) {\n\t\treturn new Dimention(value, unit);\n\t}\n\n\tequals(d) {\n\t\treturn this.value === d.value && this.unit === d.unit;\n\t}\n\n\tvalueOf(scale=1) {\n\t\treturn Math.round(this.value * scale) + this.unit;\n\t}\n}\n\nfunction resize(elem, size) {\n\tvar scale = 'scale' in size ? size.scale : 1;\n\telem.style.cssText += `;width:${size.width};height:${size.height};transform:scale(${scale})`;\n\treturn elem;\n}\n\nfunction setupResizeHandle(elem, view) {\n\telem.addEventListener('dblclick', evt => view.width = view.options.width);\n\telem.addEventListener('mousedown', evt => {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\tlet prevState = view.element.getAttribute('data-state' || '');\n\t\tview.element.setAttribute('data-state', 'resizing');\n\n\t\tlet doc = elem.ownerDocument;\n\t\tlet pointerStart = evt.pageX;\n\t\tlet viewWidth = parseInt(view.width, 10);\n\t\tlet onMove = evt => {\n\t\t\tevt.stopPropagation();\n\t\t\tevt.preventDefault();\n\t\t\tview.width = viewWidth + evt.pageX - pointerStart;\n\t\t};\n\t\tlet onEnd = evt => {\n\t\t\tview.element.setAttribute('data-state', prevState);\n\t\t\tdoc.removeEventListener('mousemove', onMove);\n\t\t\tdoc.removeEventListener('mouseup', onEnd);\n\t\t\tview.emit('resize:end');\n\t\t};\n\t\tdoc.addEventListener('mousemove', onMove);\n\t\tdoc.addEventListener('mouseup', onEnd);\n\t\tview.emit('resize:start');\n\t});\n}\n\nfunction watchDocument(view) {\n\tif (!view.isMounted) {\n\t\t// view was destroyed or its not mounted yet: do nothing\n\t\treturn;\n\t}\n\n\tview.getDocument().then(doc => {\n\t\tlet wnd = doc.defaultView;\n\t\tlet onunload = evt => {\n\t\t\twnd.removeEventListener('unload', onunload);\n\t\t\tsetTimeout(() => {\n\t\t\t\tview.emit('unload');\n\t\t\t\twatchDocument(view);\n\t\t\t}, 1);\n\t\t};\n\t\twnd.addEventListener('unload', onunload);\n\t\tview.emit('document-ready', doc);\n\t});\n}\n\nfunction waitForLoad(iframe) {\n\treturn new Promise(resolve => {\n\t\tlet onload = () => {\n\t\t\tiframe.removeEventListener('load', onload);\n\t\t\tresolve(iframe.contentDocument);\n\t\t};\n\t\tiframe.addEventListener('load', onload);\n\t});\n}\n\nfunction getPageViewport(doc) {\n\tvar meta = doc.querySelector('meta[name=\"viewport\"]');\n\treturn meta ? parseViewport(meta.getAttribute('content')) : defaultViewport;\n}\n\nfunction parseViewport(str='') {\n\treturn str.split(/[,;]/g).reduce((obj, prop) => {\n\t\tlet parts = prop.trim().split('=');\n\t\tlet name = parts.shift().trim().toLowerCase();\n\t\tlet value = parts.join('=').trim().toLowerCase();\n\n\t\t// validate and transform properties we will actually use\n\t\tif (name === 'width' || name === 'height') {\n\t\t\tif (value !== 'device-width' && value !== 'device-height') {\n\t\t\t\tvalue = parseInt(value, 10);\n\t\t\t\tif (isNaN(value)) {\n\t\t\t\t\tvalue = `device-${name}`;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = Math.min(Math.max(1, value), 10000);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tobj[name] = value;\n\t\treturn obj;\n\t}, {});\n}\n","\"use strict\";\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlbXB0eS5qcyIsInNvdXJjZXNDb250ZW50IjpbXX0=","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} once Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Holds the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Functon} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\n\nimport EventEmitter from 'eventemitter3';\nimport * as events from './lib/events';\n\nconst eventList = Object.keys(events).map(key => events[key]);\n\nexport function host(doc, options={}) {\n\tlet out = new EventEmitter();\n\tlet proxy = data => out.emit('data', data);\n\tlet onUnload = evt => {\n\t\tif (evt.target === doc) {\n\t\t\tout.dispose();\n\t\t}\n\t};\n\tlet bindings = eventList.map(e => e.host(doc, options).on('data', proxy));\n\tout.document = doc;\n\tout.dispose = () => {\n\t\tbindings.forEach(binding => {\n\t\t\tbinding.off('data', proxy);\n\t\t\tif (binding.dispose) {\n\t\t\t\tbinding.dispose();\n\t\t\t}\n\t\t});\n\t\tbindings.length = 0;\n\t\tif (doc.defaultView) {\n\t\t\tdoc.defaultView.removeEventListener('unload', onUnload);\n\t\t}\n\t\tout.document = null;\n\t\tout.emit('dispose');\n\t};\n\n\tdoc.defaultView.addEventListener('unload', onUnload);\n\treturn out;\n}\n\nexport function guest(doc, options={}) {\n\tlet bindings = eventList.map(e => e.guest(doc, options));\n\tlet out = data => bindings.forEach(b => b(data));\n\tout.document = doc;\n\tout.dispose = () => {\n\t\tbindings.forEach(b => b.dispose && b.dispose());\n\t\tbindings.length = 0;\n\t\tout.document = null;\n\t};\n\treturn out;\n}","/**\n * Form-related events: input, change, submit\n */\n'use strict';\n\nimport EventEmitter from 'eventemitter3';\nimport * as xpath from '../xpath';\n\nconst supportedEvents = ['change', 'input', 'submit'];\n\nexport function host(doc) {\n\tlet out = new EventEmitter();\n\tlet handler = evt => {\n\t\t// Edge case in, umm... MS Edge: `change` event appears *before* `click`\n\t\t// and contains previous `checked` state, e.g. value *before* it was updated.\n\t\t// Postpone event emit to properly handle this case\n\t\tlet elem = evt.target;\n\t\tlet data = serialize(evt);\n\t\tlet target = xpath.serialize(elem);\n\t\tsetTimeout(() => {\n\t\t\tif ('checked' in elem) {\n\t\t\t\tdata.checked = !!elem.checked;\n\t\t\t}\n\t\t\tout.emit('data', {name: 'form', target, data});\n\t\t}, 1);\n\t};\n\n\tsupportedEvents.forEach(e => doc.addEventListener(e, handler, true));\n\n\tout.dispose = function() {\n\t\tsupportedEvents.forEach(e => doc.removeEventListener(e, handler, true));\n\t\thandler = null;\n\t};\n\n\treturn out;\n}\n\nexport function guest(doc) {\n\treturn event => {\n\t\tif (event.name !== 'form') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet elem = xpath.find(event.target, doc);\n\t\tif (!elem) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.data.type === 'submit') {\n\t\t\telem.submit();\n\t\t} else if (elem.multiple) {\n\t\t\tsetMultipleValues(elem, event.data.value);\n\t\t} else {\n\t\t\telem.value = event.data.value;\n\t\t\tif (elem.type === 'checkbox') {\n\t\t\t\telem.checked = event.data.checked;\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction serialize(evt) {\n\tvar out = {type: evt.type};\n\tif (evt.type !== 'submit') {\n\t\tout.checked = !!evt.target.checked;\n\t\tout.value = evt.target.multiple \n\t\t\t? getMultipleValues(evt.target) \n\t\t\t: evt.target.value;\n\t}\n\treturn out;\n}\n\nfunction getMultipleValues(select) {\n\treturn toArray(select.options || [])\n\t.filter(opt => opt.selected)\n\t.map(opt => opt.value);\n}\n\nfunction setMultipleValues(select, values) {\n\tif (!Array.isArray(values)) {\n\t\tvalues = [values];\n\t}\n\n\ttoArray(select.options || [])\n\t.forEach(opt => opt.selected = values.indexOf(opt.value) !== -1);\n}\n\nfunction toArray(obj, ix=0) {\n\treturn Array.prototype.slice.call(obj, ix);\n}","/**\n * Simulates :hover CSS pseudo-state.\n * This module doesnt produce any events as host, it listens to `mouseenter`\n * and `mouseleave` events from `mouse` module as guest\n */\n\nimport EventEmitter from 'eventemitter3';\nimport getMatchedCSSRules from '../matched-css-rules';\nimport * as xpath from '../xpath';\n\nconst styleCache = {};\nconst cacheExpire = 3000;\n\nexport function host(doc) {\n    return new EventEmitter();\n}\n\nexport function guest(doc, options) {\n    return event => {\n        if (event.name === 'mouse' && event.data.type === 'mouseenter') {\n            return hoverIn(doc, event);\n        }\n\n        if (event.name === 'mouse' && event.data.type === 'mouseleave') {\n            return hoverOut(doc, event);\n        }\n    };\n}\n\nfunction hoverIn(doc, event) {\n    let elem = xpath.find(event.target, doc);\n    if (!elem) {\n        return;\n    }\n\n    var style = getHoverStyles(elem, event.target, true);\n    Object.keys(style).forEach(key => elem.style[key] = style[key].hover);\n}\n\nfunction hoverOut(doc, event) {\n    let elem = xpath.find(event.target, doc);\n    if (!elem) {\n        return;\n    }\n\n    var style = getHoverStyles(elem, event.target, false);\n    Object.keys(style).forEach(key => elem.style[key] = style[key].original);\n}\n\nfunction getHoverStyles(elem, cacheKey=xpath.serialize(elem), checkExpires=false) {\n    var entry = styleCache[cacheKey];\n    if (entry && checkExpires && entry.expires < Date.now()) {\n        entry = null;\n    }\n\n    if (!entry) {\n        let originalStyle = elem.ownerDocument.defaultView.getComputedStyle(elem);\n        let style = getMatchedCSSRules(elem, ':hover').reduce((result, rule) => {\n            for (var i = 0; i < rule.style.length; i++) {\n                let name = rule.style[i];\n                let elemValue = elem.style.getPropertyValue(name);\n                let originalValue = originalStyle.getPropertyValue(name);\n                let hoverValue = rule.style.getPropertyValue(name);\n                if (originalValue !== hoverValue && !elemValue) {\n                    result[name] = {\n                        original: elemValue,\n                        hover: hoverValue\n                    };\n                }\n            }\n            return result;\n        }, {});\n\n        entry = {style, expires: Date.now() + cacheExpire};\n        styleCache[cacheKey] = entry;\n    }\n\n    return entry.style;\n}\n","'use strict';\n\nimport * as location from './location';\nimport * as scroll from './scroll';\nimport * as mouse from './mouse';\nimport * as form from './form';\nimport * as hover from './hover';\n\nexport {location, scroll, mouse, form, hover};\n","/**\n * Theres no way to detect destination URL when user navigates somewhere.\n * In case we are on same domain (for example, Re:View UI), when host\n * loads new page, it re-initiates page-sync lib, so sending `location`\n * event on start will force all guests to change location as well\n */\n'use strict';\n\nimport EventEmitter from 'eventemitter3';\n\nexport function host(doc) {\n\tvar out = new EventEmitter();\n\tsetTimeout(() => out.emit('data', {\n\t\tname: 'location',\n\t\tdata: doc.location.href\n\t}), 100);\n\tout.dispose = () => 0;\n\treturn out;\n}\n\nexport function guest(doc) {\n\treturn event => {\n\t\tif (event.name === 'location' && doc.location && doc.location.href !== event.data) {\n\t\t\tdoc.location.href = event.data;\n\t\t}\n\t};\n}","'use strict';\n\nimport EventEmitter from 'eventemitter3';\nimport extend from 'xtend';\nimport * as xpath from '../xpath';\nimport * as uiMouse from '../ui-events/mouse';\n\nconst defaultOptions = {\n\t// Indicates that both host and guest documents share same browser\n\t// tab. This option slightly changes behaviour on some UI controls\n\tsameParent: false\n};\n\nexport function host(doc) {\n\tlet out = new EventEmitter();\n\tlet handler = evt => {\n\t\tif (isImplicitInputClick(evt)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (evt.target.nodeName === 'OPTION') {\n\t\t\t// wierd behavior in Chrome when sending mouse events on <option>\n\t\t\t// of <select multiple> with Cmd button pressed\n\t\t\treturn;\n\t\t}\n\n\t\tout.emit('data', {\n\t\t\tname: 'mouse',\n\t\t\ttarget: xpath.serialize(evt.target),\n\t\t\tdata: uiMouse.serialize(evt)\n\t\t});\n\t};\n\n\tuiMouse.supportedEvents.forEach(e => doc.addEventListener(e, handler, true));\n\n\tout.dispose = function() {\n\t\tuiMouse.supportedEvents.forEach(e => doc.removeEventListener(e, handler, true));\n\t\thandler = null;\n\t};\n\n\treturn out;\n}\n\nexport function guest(doc, options) {\n\toptions = extend(defaultOptions, options || {});\n\treturn event => {\n\t\tif (event.name !== 'mouse') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet elem = xpath.find(event.target, doc);\n\t\tif (!elem) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet nativeEvent = uiMouse.unserialize(elem, event.data);\n\t\tif (nativeEvent && allowGuestEvent(nativeEvent, elem, options)) {\n\t\t\telem.dispatchEvent(nativeEvent);\n\t\t}\n\t};\n}\n\n/**\n * Edge case: click on <label> element may cause implicit click on matched\n * <input> element. In this case we shouldnt handle such event because \n * it will be implicitly created in guest when we send <label> click\n * @param  {MouseEvent}  event\n * @return {Boolean}\n */\nfunction isImplicitInputClick(event) {\n\tif (event.type !== 'click' || event.target.nodeName !== 'INPUT') {\n\t\treturn false;\n\t}\n\n\t// Check if event occured outside of element. If so, this is implicit event\n\tvar [x, y] = [event.offsetX, event.offsetY];\n\tvar [w, h] = [event.target.offsetWidth, event.target.offsetHeight];\n\treturn x < 0 || x > w || y < 0 || y > h;\n}\n\nfunction allowGuestEvent(event, elem, options) {\n\t// for better UX, do not trigger select popup in guests with same parent\n\t// as host\n\treturn !(options.sameParent && (event.type === 'click' || event.type === 'mousedown') && elem.nodeName === 'SELECT');\n}","/**\n * Module for handling scroll events on given page\n */\n'use strict';\n\nimport EventEmitter from 'eventemitter3';\nimport * as xpath from '../xpath';\n\nexport function host(doc) {\n\tlet out = new EventEmitter();\n\tlet onScroll = evt => {\n\t\tlet target = evt.target;\n\t\tif (target === doc) {\n\t\t\ttarget = target.scrollingElement || target.body;\n\t\t}\n\n\t\tout.emit('data', {\n\t\t\tname: 'scroll',\n\t\t\ttarget: xpath.serialize(target),\n\t\t\tdata: getScrollData(target)\n\t\t});\n\t};\n\n\tdoc.addEventListener('scroll', onScroll, true);\n\n\tout.dispose = function() {\n\t\tdoc.removeEventListener('scroll', onScroll, true);\n\t\tonScroll = null;\n\t};\n\n\treturn out;\n}\n\nexport function guest(doc) {\n\treturn event => {\n\t\tif (event.name !== 'scroll') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet elem = xpath.find(event.target, doc);\n\t\tif (!elem) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet data = event.data;\n\t\tlet [vpWidth, vpHeight] = getViewportSize(elem);\n\t\tlet srcScrollWidth   = Math.max(data.width - data.vpWidth, 0);\n\t\tlet srcScrollHeight  = Math.max(data.height - data.vpHeight, 0);\n\t\tlet posX = srcScrollWidth ? (data.left / srcScrollWidth) : 0;\n\t\tlet posY = srcScrollHeight ? (data.top / srcScrollHeight) : 0;\n\n\t\tlet left = (posX * Math.max(elem.scrollWidth - vpWidth, 0)) | 0;\n\t\tlet top  = (posY * Math.max(elem.scrollHeight - vpHeight, 0)) | 0;\n\n\t\tif (isPageScroller(elem)) {\n\t\t\telem.ownerDocument.defaultView.scrollTo(left, top);\n\t\t} else {\n\t\t\telem.scrollLeft = left;\n\t\t\telem.scrollTop = top;\n\t\t}\n\t};\n}\n\nfunction getScrollData(elem) {\n\tlet [vpWidth, vpHeight] = getViewportSize(elem);\n\tlet [left, top] = scrollOffset(elem);\n\t\n\treturn {\n\t\tleft, top,\n\t\twidth: elem.scrollWidth,\n\t\theight: elem.scrollHeight,\n\t\tvpWidth, vpHeight\n\t};\n}\n\nfunction getViewportSize(elem) {\n\tif (isPageScroller(elem)) {\n\t\tlet wnd = elem.ownerDocument.defaultView;\n\t\treturn [wnd.innerWidth, wnd.innerHeight];\n\t}\n\n\treturn [elem.clientWidth, elem.clientHeight];\n}\n\n/**\n * Check if given element actually scrolls page\n * @param  {Element}  elem\n * @return {Boolean}\n */\nfunction isPageScroller(elem) {\n\tlet doc = elem.ownerDocument;\n\tif ('scrollingElement' in doc) {\n\t\treturn doc.scrollingElement === elem;\n\t}\n\n\t// most likely global scroller is a <body> element\n\treturn doc.body === elem;\n}\n\nfunction scrollOffset(elem) {\n\tlet wnd = elem.ownerDocument.defaultView;\n\treturn isPageScroller(elem)\n\t\t? [wnd.pageXOffset, wnd.pageYOffset]\n\t\t: [elem.scrollLeft, elem.scrollTop];\n}","/**\n * A refactored `getMatchedCSSRules()` polyfill.\n * Original: https://gist.github.com/ssafejava/6605832\n */\n'use strict';\n\nconst ELEMENT_RE = /[\\w-]+/g;\nconst ID_RE = /#[\\w-]+/g;\nconst CLASS_RE = /\\.[\\w-]+/g;\nconst ATTR_RE = /\\[[^\\]]+\\]/g;\n// :not() pseudo-class does not add to specificity, but its content does as if it was outside it\nconst PSEUDO_CLASSES_RE = /\\:(?!not)[\\w-]+(\\(.*\\))?/g;\nconst PSEUDO_ELEMENTS_RE = /\\:\\:?(after|before|first-letter|first-line|selection)/g;\n\nexport default function(element, pseudo) {\n    var result = [];\n    var doc = element.ownerDocument;\n    var wnd = doc.defaultView;\n\n    // assuming the browser hands us stylesheets in order of appearance\n    // we iterate them from the beginning to follow proper cascade order\n    var styleSheets = toArray(doc.styleSheets), sheet;\n    while (sheet = styleSheets.shift()) {\n        let rules = getSheetRules(sheet, wnd), rule;\n        while (rule = rules.shift()) {\n            if (rule.styleSheet) {\n                // If this is an @import rule insert the imported stylesheet's\n                // rules at the beginning of this stylesheet's rules and skip\n                // this rule\n                rules = getSheetRules(rule.styleSheet, wnd).concat(rules);\n                continue;\n            } else if (rule.media) {\n                // If there's no stylesheet attribute BUT there IS a media\n                // attribute it's a media rule.\n                // Insert the contained rules of this media rule to the beginning\n                // of this stylesheet's rules and skip it\n                rules = getSheetRules(rule, wnd).concat(rules);\n                continue;\n            }\n\n            if (pseudo) {\n                if (matchSelectorWithPseudo(element, rule.selectorText, pseudo)) {\n                    result.push(rule);\n                }\n            } else if (matchesSelector(element, rule.selectorText)) {\n                result.push(rule);\n            }\n        }\n    }\n\n    return sortBySpecificity(element, result);\n};\n\n/**\n * Handles extraction of `cssRules` as an `Array` from a stylesheet or something\n * that behaves the same\n * @param  {CSSStyleSheet} stylesheet\n * @return {Array}\n */\nfunction getSheetRules(stylesheet, wnd=window) {\n    if (stylesheet.disabled) {\n        return [];\n    }\n\n    // if this sheet's media is specified and doesn't match the viewport then skip it\n    var sheetMedia = stylesheet.media && stylesheet.media.mediaText;\n    if (sheetMedia && sheetMedia.length && !wnd.matchMedia(sheetMedia).matches) {\n        return [];\n    }\n\n    // get the style rules of this sheet\n    return toArray(stylesheet.cssRules);\n}\n\n/**\n * Calculates the specificity of a given `selector`\n * @param  {String} selector\n * @return {Number}\n */\nfunction calculateScore(selector) {\n    var score = [0,0,0];\n    var parts = selector.split(' ');\n    var part, match;\n\n    //TODO: clean the ':not' part since the last ELEMENT_RE will pick it up\n    while (part = parts.shift(), typeof part === 'string') {\n        // find all pseudo-elements\n        match = _find(part, PSEUDO_ELEMENTS_RE);\n        score[2] = match;\n        // and remove them\n        match && (part = part.replace(PSEUDO_ELEMENTS_RE, ''));\n        // find all pseudo-classes\n        match = _find(part, PSEUDO_CLASSES_RE);\n        score[1] = match;\n        // and remove them\n        match && (part = part.replace(PSEUDO_CLASSES_RE, ''));\n        // find all attributes\n        match = _find(part, ATTR_RE);\n        score[1] += match;\n        // and remove them\n        match && (part = part.replace(ATTR_RE, ''));\n        // find all IDs\n        match = _find(part, ID_RE);\n        score[0] = match;\n        // and remove them\n        match && (part = part.replace(ID_RE, ''));\n        // find all classes\n        match = _find(part, CLASS_RE);\n        score[1] += match;\n        // and remove them\n        match && (part = part.replace(CLASS_RE, ''));\n        // find all elements\n        score[2] += _find(part, ELEMENT_RE);\n    }\n    return parseInt(score.join(''), 10);\n}\n\n/**\n * Returns the heights possible specificity score an element can get from a give\n * rule's selectorText\n * @param  {Element} element\n * @param  {String} selectorText\n * @return {Number}\n */\nfunction getSpecificityScore(elem, selectorText) {\n    var selectors = selectorText.split(',');\n    var selector, score, result = 0;\n    while (selector = selectors.shift()) {\n        if (matchesSelector(elem, selector)) {\n            score = calculateScore(selector);\n            result = score > result ? score : result;\n        }\n    }\n    return result;\n}\n\nfunction sortBySpecificity(elem, rules) {\n    return rules.sort((a, b) => getSpecificityScore(elem, b.selectorText) - getSpecificityScore(elem, a.selectorText));\n}\n\nfunction matchesSelector(elem, selector) {\n    var matcher = elem.matches || elem.matchesSelector || elem.mozMatchesSelector ||\n        elem.webkitMatchesSelector || elem.oMatchesSelector || elem.msMatchesSelector;\n    return matcher ? matcher.call(elem, selector) : false;\n}\n\n/**\n * A fast and naive check for pseudo-class match.\n * For PageSync needs, we only have to check for `:hover` pseudo-class.\n * For this case, remove `:hover` from original selector and then check if\n * it matches given element\n * @param  {Element} elem\n * @param  {String} selector\n * @return {Boolean}\n */\nfunction matchSelectorWithPseudo(elem, selector, pseudo) {\n    if (selector.indexOf(pseudo) === -1) {\n        return false;\n    }\n\n    if (pseudo === ':hover') {\n        selector = selector.replace(/:hover\\b/g, '');\n    }\n    return matchesSelector(elem, selector);\n}\n\nfunction _find(string, re) {\n    var matches = string.match(re);\n    return matches ? matches.length : 0;\n}\n\nfunction toArray(list) {\n    return Array.prototype.slice.call(list);\n}\n","'use strict';\n\nconst screenCoords = {\n\tx: ['screenX', 'clientX'],\n\ty: ['screenY', 'clientY']\n};\nconst localCoords = {\n\tx: ['offsetX'],\n\ty: ['offsetY']\n};\nconst copyProps = [\n\t'type', 'ctrlKey', 'shiftKey', 'altKey', 'metaKey', \n\t'button', 'buttons', 'bubbles', 'cancelable'\n];\n\nconst DOM3MouseEventArgs = [\n\t'bubbles', 'cancelable', 'view', 'detail', \n\t'screenX', 'screenY', 'clientX', 'clientY', \n\t'ctrlKey', 'altKey', 'shiftKey', 'metaKey', \n\t'button', 'relatedTarget'\n];\n\nconst coordsLookup = [screenCoords, localCoords]\n.reduce((obj, arr) => {\n\tarr.x.forEach(key => obj[key] = arr.x);\n\tarr.y.forEach(key => obj[key] = arr.y);\n\treturn obj;\n}, {});\n\nexport var supportedEvents = [\n\t'click', 'mouseup', 'mousedown', 'mousemove', \n\t'mouseenter', 'mouseleave'\n];\n\nexport function serialize(event) {\n\t// serialization strategy:\n\t// * global screen coordinates to viewport-relative values\n\t// * local element coordinates to element-relative values\n\tvar out = copyProps.reduce((obj, key) => {\n\t\tobj[key] = event[key];\n\t\treturn obj;\n\t}, {});\n\n\tlet [vpWidth, vpHeight] = getViewportSize(event.target);\n\tlet [elWidth, elHeight] = getElementSize(event.target);\n\n\tscreenCoords.x.forEach(key => out[key] = event[key] / vpWidth);\n\tscreenCoords.y.forEach(key => out[key] = event[key] / vpHeight);\n\tlocalCoords.x.forEach(key => out[key] = event[key] / elWidth);\n\tlocalCoords.y.forEach(key => out[key] = event[key] / elHeight);\n\treturn out;\n};\n\nexport function unserialize(elem, data) {\n\tif (!data.type) {\n\t\treturn null;\n\t}\n\n\tvar [vpWidth, vpHeight] = getViewportSize(elem);\n\tvar [elWidth, elHeight] = getElementSize(elem);\n\tvar payload = Object.keys(data).reduce((obj, key) => {\n\t\tlet arr = coordsLookup[key];\n\t\tlet value = data[key];\n\t\tlet t = arg => (arg * value)|0;\n\t\t\n\t\tif (arr === screenCoords.x) {\n\t\t\tobj[key] = t(vpWidth);\n\t\t} else if (arr === screenCoords.y) {\n\t\t\tobj[key] = t(vpHeight);\n\t\t} else if (arr === localCoords.x) {\n\t\t\tobj[key] = t(elWidth);\n\t\t} else if (arr === localCoords.y) {\n\t\t\tobj[key] = t(elHeight);\n\t\t} else if (key !== 'type') {\n\t\t\tobj[key] = value;\n\t\t}\n\t\treturn obj;\n\t}, {});\n\n\treturn createEvent(elem, data.type, payload);\n}\n\nfunction createEvent(elem, type, data) {\n\ttry {\n\t\treturn new MouseEvent(data.type, payload);\n\t} catch (e1) {}\n\n\tlet doc = elem.ownerDocument;\n\tlet args = [type].concat(DOM3MouseEventArgs.map(k => data[k]));\n\ttry {\n\t\tlet evt = doc.createEvent('MouseEvent');\n\t\tevt.initMouseEvent.apply(evt, args);\n\t\treturn evt;\n\t} catch(e2) {}\n}\n\nfunction getViewportSize(elem) {\n\tlet doc = isDocument(elem) ? elem : elem.ownerDocument;\n\tlet wnd = doc.defaultView;\n\treturn [wnd.innerWidth, wnd.innerHeight];\n}\n\nfunction getElementSize(elem) {\n\tif (isDocument(elem)) {\n\t\telem = elem.documentElement;\n\t}\n\treturn [elem.offsetWidth, elem.offsetHeight];\n}\n\nfunction isDocument(elem) {\n\treturn elem.nodeType === 9;\n}","/**\n * Creates simplified XPath for given element and finds element by provided XPath\n */\n'use strict';\n\nexport function serialize(elem) {\n\tlet doc = elem.ownerDocument;\n\tlet parts = [];\n\twhile (elem && elem !== doc) {\n\t\tparts.unshift(`${nodeName(elem)}[${samePreviousSiblings(elem).length + 1}]`);\n\t\telem = elem.parentNode;\n\t}\n\treturn '/' + parts.join('/');\n}\n\nexport function find(xpath, ctx=document) {\n\tlet parts = xpath.split('/').filter(Boolean);\n\twhile (parts.length) {\n\t\tlet [name, index] = parts.shift().split('[');\n\t\tctx = nodeByIndex(ctx.childNodes, name, parseInt(index, 10));\n\t\tif (!ctx) {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ctx;\n}\n\nfunction samePreviousSiblings(elem) {\n\tlet name = nodeName(elem);\n\tlet type = elem.nodeType;\n\tlet result = [];\n\twhile (elem = elem.previousSibling) {\n\t\tif (elem.nodeType === type && nodeName(elem) === name) {\n\t\t\tresult.push(elem);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction nodeName(node) {\n\t// XXX might return different name for different node types\n\treturn node.nodeName;\n}\n\nfunction nodeByIndex(nodeset, name, index) {\n\tlet acc = 0;\n\tfor (let i = 0, il = nodeset.length; i < il; i++) {\n\t\tif (nodeName(nodeset[i]) === name && (index === ++acc)) {\n\t\t\treturn nodeset[i];\n\t\t}\n\t}\n}","\"use strict\";\n\nvar repeat = function repeat(str, times) {\n  return new Array(times + 1).join(str);\n};\nvar pad = function pad(num, maxLength) {\n  return repeat(\"0\", maxLength - num.toString().length) + num;\n};\nvar formatTime = function formatTime(time) {\n  return \" @ \" + pad(time.getHours(), 2) + \":\" + pad(time.getMinutes(), 2) + \":\" + pad(time.getSeconds(), 2) + \".\" + pad(time.getMilliseconds(), 3);\n};\n\n// Use the new performance api to get better precision if available\nvar timer = typeof performance !== \"undefined\" && typeof performance.now === \"function\" ? performance : Date;\n\n/**\n * Creates logger with followed options\n *\n * @namespace\n * @property {object} options - options for logger\n * @property {string} options.level - console[level]\n * @property {boolean} options.duration - print duration of each action?\n * @property {boolean} options.timestamp - print timestamp with each action?\n * @property {object} options.colors - custom colors\n * @property {object} options.logger - implementation of the `console` API\n * @property {boolean} options.logErrors - should errors in action execution be caught, logged, and re-thrown?\n * @property {boolean} options.collapsed - is group collapsed?\n * @property {boolean} options.predicate - condition which resolves logger behavior\n * @property {function} options.stateTransformer - transform state before print\n * @property {function} options.actionTransformer - transform action before print\n * @property {function} options.errorTransformer - transform error before print\n */\n\nfunction createLogger() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n  var _options$level = options.level;\n  var level = _options$level === undefined ? \"log\" : _options$level;\n  var _options$logger = options.logger;\n  var logger = _options$logger === undefined ? window.console : _options$logger;\n  var _options$logErrors = options.logErrors;\n  var logErrors = _options$logErrors === undefined ? true : _options$logErrors;\n  var collapsed = options.collapsed;\n  var predicate = options.predicate;\n  var _options$duration = options.duration;\n  var duration = _options$duration === undefined ? false : _options$duration;\n  var _options$timestamp = options.timestamp;\n  var timestamp = _options$timestamp === undefined ? true : _options$timestamp;\n  var transformer = options.transformer;\n  var _options$stateTransfo = options.stateTransformer;\n  var // deprecated\n  stateTransformer = _options$stateTransfo === undefined ? function (state) {\n    return state;\n  } : _options$stateTransfo;\n  var _options$actionTransf = options.actionTransformer;\n  var actionTransformer = _options$actionTransf === undefined ? function (actn) {\n    return actn;\n  } : _options$actionTransf;\n  var _options$errorTransfo = options.errorTransformer;\n  var errorTransformer = _options$errorTransfo === undefined ? function (error) {\n    return error;\n  } : _options$errorTransfo;\n  var _options$colors = options.colors;\n  var colors = _options$colors === undefined ? {\n    title: function title() {\n      return \"#000000\";\n    },\n    prevState: function prevState() {\n      return \"#9E9E9E\";\n    },\n    action: function action() {\n      return \"#03A9F4\";\n    },\n    nextState: function nextState() {\n      return \"#4CAF50\";\n    },\n    error: function error() {\n      return \"#F20404\";\n    }\n  } : _options$colors;\n\n  // exit if console undefined\n\n  if (typeof logger === \"undefined\") {\n    return function () {\n      return function (next) {\n        return function (action) {\n          return next(action);\n        };\n      };\n    };\n  }\n\n  if (transformer) {\n    console.error(\"Option 'transformer' is deprecated, use stateTransformer instead\");\n  }\n\n  var logBuffer = [];\n  function printBuffer() {\n    logBuffer.forEach(function (logEntry, key) {\n      var started = logEntry.started;\n      var action = logEntry.action;\n      var prevState = logEntry.prevState;\n      var error = logEntry.error;\n      var took = logEntry.took;\n      var nextState = logEntry.nextState;\n\n      var nextEntry = logBuffer[key + 1];\n      if (nextEntry) {\n        nextState = nextEntry.prevState;\n        took = nextEntry.started - started;\n      }\n      // message\n      var formattedAction = actionTransformer(action);\n      var time = new Date(started);\n      var isCollapsed = typeof collapsed === \"function\" ? collapsed(function () {\n        return nextState;\n      }, action) : collapsed;\n\n      var formattedTime = formatTime(time);\n      var titleCSS = colors.title ? \"color: \" + colors.title(formattedAction) + \";\" : null;\n      var title = \"action \" + formattedAction.type + (timestamp ? formattedTime : \"\") + (duration ? \" in \" + took.toFixed(2) + \" ms\" : \"\");\n\n      // render\n      try {\n        if (isCollapsed) {\n          if (colors.title) logger.groupCollapsed(\"%c \" + title, titleCSS);else logger.groupCollapsed(title);\n        } else {\n          if (colors.title) logger.group(\"%c \" + title, titleCSS);else logger.group(title);\n        }\n      } catch (e) {\n        logger.log(title);\n      }\n\n      if (colors.prevState) logger[level](\"%c prev state\", \"color: \" + colors.prevState(prevState) + \"; font-weight: bold\", prevState);else logger[level](\"prev state\", prevState);\n\n      if (colors.action) logger[level](\"%c action\", \"color: \" + colors.action(formattedAction) + \"; font-weight: bold\", formattedAction);else logger[level](\"action\", formattedAction);\n\n      if (error) {\n        if (colors.error) logger[level](\"%c error\", \"color: \" + colors.error(error, prevState) + \"; font-weight: bold\", error);else logger[level](\"error\", error);\n      }\n\n      if (colors.nextState) logger[level](\"%c next state\", \"color: \" + colors.nextState(nextState) + \"; font-weight: bold\", nextState);else logger[level](\"next state\", nextState);\n\n      try {\n        logger.groupEnd();\n      } catch (e) {\n        logger.log(\" log end \");\n      }\n    });\n    logBuffer.length = 0;\n  }\n\n  return function (_ref) {\n    var getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        // exit early if predicate function returns false\n        if (typeof predicate === \"function\" && !predicate(getState, action)) {\n          return next(action);\n        }\n\n        var logEntry = {};\n        logBuffer.push(logEntry);\n\n        logEntry.started = timer.now();\n        logEntry.prevState = stateTransformer(getState());\n        logEntry.action = action;\n\n        var returnedValue = undefined;\n        if (logErrors) {\n          try {\n            returnedValue = next(action);\n          } catch (e) {\n            logEntry.error = errorTransformer(e);\n          }\n        } else {\n          returnedValue = next(action);\n        }\n\n        logEntry.took = timer.now() - logEntry.started;\n        logEntry.nextState = stateTransformer(getState());\n\n        printBuffer();\n\n        if (logEntry.error) throw logEntry.error;\n        return returnedValue;\n      };\n    };\n  };\n}\n\nmodule.exports = createLogger;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = applyMiddleware;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (next) {\n    return function (reducer, initialState) {\n      var store = next(reducer, initialState);\n      var _dispatch = store.dispatch;\n      var chain = [];\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = _compose2['default'].apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = bindActionCreators;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utilsMapValues = require('./utils/mapValues');\n\nvar _utilsMapValues2 = _interopRequireDefault(_utilsMapValues);\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(undefined, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null || actionCreators === undefined) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  return _utilsMapValues2['default'](actionCreators, function (actionCreator) {\n    return bindActionCreator(actionCreator, dispatch);\n  });\n}\n\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = combineReducers;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _createStore = require('./createStore');\n\nvar _utilsIsPlainObject = require('./utils/isPlainObject');\n\nvar _utilsIsPlainObject2 = _interopRequireDefault(_utilsIsPlainObject);\n\nvar _utilsMapValues = require('./utils/mapValues');\n\nvar _utilsMapValues2 = _interopRequireDefault(_utilsMapValues);\n\nvar _utilsPick = require('./utils/pick');\n\nvar _utilsPick2 = _interopRequireDefault(_utilsPick);\n\n/* eslint-disable no-console */\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && '\"' + actionType.toString() + '\"' || 'an action';\n\n  return 'Reducer \"' + key + '\" returned undefined handling ' + actionName + '. ' + 'To ignore an action, you must explicitly return the previous state.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === _createStore.ActionTypes.INIT ? 'initialState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!_utilsIsPlainObject2['default'](inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + ({}).toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key);\n  });\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerSanity(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: _createStore.ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + _createStore.ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\nfunction combineReducers(reducers) {\n  var finalReducers = _utilsPick2['default'](reducers, function (val) {\n    return typeof val === 'function';\n  });\n  var sanityError;\n\n  try {\n    assertReducerSanity(finalReducers);\n  } catch (e) {\n    sanityError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === undefined) state = {};\n\n    if (sanityError) {\n      throw sanityError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action);\n      if (warningMessage) {\n        console.error(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var finalState = _utilsMapValues2['default'](finalReducers, function (reducer, key) {\n      var previousStateForKey = state[key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(key, action);\n        throw new Error(errorMessage);\n      }\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n      return nextStateForKey;\n    });\n\n    return hasChanged ? finalState : state;\n  };\n}\n\nmodule.exports = exports['default'];","/**\n * Composes single-argument functions from right to left.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing functions from right to\n * left. For example, compose(f, g, h) is identical to arg => f(g(h(arg))).\n */\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = compose;\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  return function () {\n    if (funcs.length === 0) {\n      return arguments[0];\n    }\n\n    var last = funcs[funcs.length - 1];\n    var rest = funcs.slice(0, -1);\n\n    return rest.reduceRight(function (composed, f) {\n      return f(composed);\n    }, last.apply(undefined, arguments));\n  };\n}\n\nmodule.exports = exports[\"default\"];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = createStore;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utilsIsPlainObject = require('./utils/isPlainObject');\n\nvar _utilsIsPlainObject2 = _interopRequireDefault(_utilsIsPlainObject);\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = {\n  INIT: '@@redux/INIT'\n};\n\nexports.ActionTypes = ActionTypes;\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [initialState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nfunction createStore(reducer, initialState) {\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = initialState;\n  var listeners = [];\n  var isDispatching = false;\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    listeners.push(listener);\n    var isSubscribed = true;\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n      var index = listeners.indexOf(listener);\n      listeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!_utilsIsPlainObject2['default'](action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    listeners.slice().forEach(function (listener) {\n      return listener();\n    });\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.INIT });\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  };\n}","'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _createStore = require('./createStore');\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _combineReducers = require('./combineReducers');\n\nvar _combineReducers2 = _interopRequireDefault(_combineReducers);\n\nvar _bindActionCreators = require('./bindActionCreators');\n\nvar _bindActionCreators2 = _interopRequireDefault(_bindActionCreators);\n\nvar _applyMiddleware = require('./applyMiddleware');\n\nvar _applyMiddleware2 = _interopRequireDefault(_applyMiddleware);\n\nvar _compose = require('./compose');\n\nvar _compose2 = _interopRequireDefault(_compose);\n\n/*\n* This is a dummy function to check if the function name has been altered by minification.\n* If the function has been minified and NODE_ENV !== 'production', warn the user.\n*/\nfunction isCrushed() {}\n\nif (isCrushed.name !== 'isCrushed' && process.env.NODE_ENV !== 'production') {\n  /*eslint-disable no-console */\n  console.error('You are currently using minified code outside of NODE_ENV === \\'production\\'. ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n  /*eslint-enable */\n}\n\nexports.createStore = _createStore2['default'];\nexports.combineReducers = _combineReducers2['default'];\nexports.bindActionCreators = _bindActionCreators2['default'];\nexports.applyMiddleware = _applyMiddleware2['default'];\nexports.compose = _compose2['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = isPlainObject;\nvar fnToString = function fnToString(fn) {\n  return Function.prototype.toString.call(fn);\n};\nvar objStringValue = fnToString(Object);\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\n\nfunction isPlainObject(obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  var proto = typeof obj.constructor === 'function' ? Object.getPrototypeOf(obj) : Object.prototype;\n\n  if (proto === null) {\n    return true;\n  }\n\n  var constructor = proto.constructor;\n\n  return typeof constructor === 'function' && constructor instanceof constructor && fnToString(constructor) === objStringValue;\n}\n\nmodule.exports = exports['default'];","/**\n * Applies a function to every key-value pair inside an object.\n *\n * @param {Object} obj The source object.\n * @param {Function} fn The mapper function that receives the value and the key.\n * @returns {Object} A new object that contains the mapped values for the keys.\n */\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = mapValues;\n\nfunction mapValues(obj, fn) {\n  return Object.keys(obj).reduce(function (result, key) {\n    result[key] = fn(obj[key], key);\n    return result;\n  }, {});\n}\n\nmodule.exports = exports[\"default\"];","/**\n * Picks key-value pairs from an object where values satisfy a predicate.\n *\n * @param {Object} obj The object to pick from.\n * @param {Function} fn The predicate the values must satisfy to be copied.\n * @returns {Object} The object with the values that satisfied the predicate.\n */\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = pick;\n\nfunction pick(obj, fn) {\n  return Object.keys(obj).reduce(function (result, key) {\n    if (fn(obj[key])) {\n      result[key] = obj[key];\n    }\n    return result;\n  }, {});\n}\n\nmodule.exports = exports[\"default\"];","/**\n * A very basic and simple finite state machine implementation\n */\n'use strict';\n\nconst EventEmitter = require('eventemitter3');\nconst assign = require('xtend/mutable');\n\nmodule.exports = class FSM extends EventEmitter {\n    constructor(states) {\n        super();\n\n        this.states = states;\n        this._current = null;\n        this._currenAction = null;\n        this._inExitHandler = false;\n\n        if (!states.initial) {\n            throw new Error('No initial state specified');\n        }\n\n        // add mixins\n        toArray(arguments, 1).forEach(mixin => assign(this, mixin));\n\n        var target = typeof states.initial === 'string' ? states.initial : 'initial';\n        this.transition(target)\n    }\n\n    get current() {\n        return this._current;\n    }\n\n    transition(target) {\n        var curState = this.states[this.current];\n        var newState = this.states[target];\n\n        if (!newState) {\n            this.emit('invalid-state', target);\n            return;\n        }\n\n        if (!this._inExitHandler && curState !== newState) {\n            if (curState && curState._exit) {\n                this._inExitHandler = true;\n                curState._exit.call(this);\n                this._inExitHandler = false;\n            }\n\n            this.emit('transition', {\n                from: this.current,\n                to: target,\n                action: this._currenAction\n            });\n\n            this._current = target;\n            if (newState._enter) {\n                newState._enter.call(this);\n            }\n        }\n    }\n\n    handle(action) {\n        var args = toArray(arguments, 1);\n        var curState = this.states[this.current];\n        var handler = curState[action] || curState['*'];\n        if (this._inExitHandler) {\n            return;\n        }\n\n        var eventPayload = {action, state: this.current};\n        if (!handler) {\n            this.emit('no-handler', eventPayload);\n            return;\n        }\n\n        var result;\n        this._currenAction = action;\n        this.emit('handling', eventPayload);\n        if (typeof handler === 'function') {\n            result = handler.apply(this, args);\n        } else {\n            result = handler;\n            this.transition(handler);\n        }\n        this.emit('handled', eventPayload);\n    }\n}\n\nfunction toArray(obj, ix) {\n    return Array.prototype.slice.call(obj, ix || 0);\n}\n","'use strict';\nconst h = require('virtual-dom/h');\nconst component = require('./lib/create-component');\nconst render = require('./lib/render');\n\n/**\n * Default export is a wrapper for Virtual DOMs `h` element, used for\n * rendering data\n */\nmodule.exports = function(name, props) {\n    var children = Array.prototype.slice.call(arguments, 2);\n    if (children.length === 1 && Array.isArray(children[0])) {\n        children = children[0];\n    }\n\n    if (typeof name === 'object' && name.__tr__render) {\n        return name.__tr__render(props, children);\n    }\n\n    if (typeof name === 'function') {\n        return name(props, children);\n    }\n\n    if (props) {\n        let attributes = {};\n        let reData = /^data\\-/;\n        props = Object.keys(props).reduce((r, key) => {\n            if (reData.test(key)) {\n                attributes[key] = props[key];\n            } else {\n                r[key] = props[key];\n            }\n            return r;\n        }, {});\n        props.attributes = attributes;\n    }\n\n    return h(name, props, children);\n};\n\nmodule.exports.component = component;\nmodule.exports.render = render;\n","/**\n * A factory method for creating Tiny React renderable components\n */\n'use strict';\n\nconst extend = require('xtend');\n\nmodule.exports = function(data) {\n    data = data || {};\n    if (typeof data.render !== 'function') {\n        throw new Error('The \"render\" property of component is not defined or not a function');\n    }\n\n    // create a copy object with bound methods\n    var component = {};\n    Object.keys(data).forEach(key => {\n        if (typeof data[key] === 'function') {\n            component[key] = data[key].bind(data);\n        } else {\n            component[key] = data[key];\n        }\n    });\n\n    var mixins = Array.prototype.slice.call(arguments, 1);\n    component = mixins.reduce((r, mixin) => typeof mixin === 'function' ? mixin(r) : extend(r, mixin), component);\n\n    component.__tr = {};\n\n    // return component renderer\n    var renderer = function(props) {\n        var children = Array.prototype.slice.call(arguments, 1);\n        if (children.length === 1 && Array.isArray(children[0])) {\n            children = children[0];\n        }\n\n        return renderComponent(component, props, children);\n    };\n    renderer.component = component;\n    return renderer;\n};\n\n\nfunction renderComponent(component, props, children) {\n    // Component render life cycle:\n    // 1. Check if we should update component\n    // 2. If this is the first render pass, call `willMount`\n    // 3. Invoke `willUpdate` method, which may act as a reducer for given props\n    // 4. Render component\n    // 5. Invoke `didUpdate` with rendered result and props\n    // 6. If this is the first render pass, call `didMount`\n    let isMounted = !!component.__tr.lastRendered;\n    if (isFn(component.shouldUpdate) && component.shouldUpdate(props, children) === false) {\n        return component.__tr.lastRendered;\n    }\n\n    if (isFn(component.willMount) && !isMounted) {\n        component.willMount(props, children);\n    }\n\n    if (isFn(component.willUpdate)) {\n        let result = component.willUpdate(props);\n        if (result != null) {\n            props = result;\n        }\n    }\n\n    component.__tr.lastRendered = component.render(props, children);\n\n    if (isFn(component.didUpdate)) {\n        component.didUpdate(props, children);\n    }\n\n    if (isFn(component.didMount) && !isMounted) {\n        component.didMount(props, children);\n    }\n\n    return component.__tr.lastRendered;\n}\n\nfunction isFn(obj) {\n    return typeof obj === 'function';\n}\n","/**\n * Delegates events found in given VTree to rendered root view\n */\n'use strict';\nconst extend = require('xtend');\nconst xpath = require('./xpath');\n\nconst supportedEvents = [\n    'oncopy', 'oncut', 'onpaste', 'oncompositionend',\n    'oncompositionstart', 'oncompositionupdate', 'onkeydown',\n    'onkeypress', 'onkeyup', 'onfocus', 'onblur', 'onchange', 'oninput',\n    'onsubmit', 'onreset', 'onclick', 'oncontextmenu', 'ondoubleclick', 'ondrag',\n    'ondragend', 'ondragenter', 'ondragexit', 'ondragleave', 'ondragover',\n    'ondragstart', 'ondrop', 'onmousedown', 'onmouseenter',\n    'onmouseleave', 'onmousemove', 'onmouseout', 'onmouseover',\n    'onmouseup', 'onselect', 'ontouchcancel', 'ontouchend', 'ontouchmove',\n    'ontouchstart', 'onscroll', 'onwheel', 'onabort', 'oncanplay',\n    'oncanplaythrough', 'ondurationchange', 'onemptied', 'onencrypted',\n    'onended', 'onerror', 'onloadeddata', 'onloadedmetadata',\n    'onloadstart', 'onpause', 'onplay', 'onplaying', 'onprogress',\n    'onratechange', 'onseeked', 'onseeking', 'onstalled', 'onsuspend',\n    'ontimeupdate', 'onvolumechange', 'onwaiting', 'onload', 'onerror'\n];\n\nconst _nameLookup = supportedEvents.reduce((out, name) => {\n    out[name] = true;\n    return out;\n}, {});\n\nmodule.exports = function(tree) {\n    var xpathMap = createXpathMap(tree);\n\n    // find all unique event names\n    var uniqueNames = {};\n    Object.keys(xpathMap).forEach(path => {\n        Object.keys(xpathMap[path]).forEach(key => uniqueNames[key] = true);\n    });\n    uniqueNames = Object.keys(uniqueNames);\n\n    return node => {\n        var delegator = event => delegateEvent(event, node, xpathMap);\n        uniqueNames.forEach(name => node.addEventListener(name, delegator));\n\n        return () => uniqueNames.forEach(name => node.removeEventListener(name, delegator));\n    };\n};\n\nfunction createXpathMap(tree) {\n    var xpathMap = tree ? flattenTree(tree) : {};\n    var rootHandlers = extractHandlers(tree);\n    if (rootHandlers) {\n        xpathMap['/'] = rootHandlers;\n    }\n    return xpathMap;\n}\n\nfunction flattenTree(tree, prefix) {\n    prefix = prefix || '';\n    var nameCount = {};\n    var out = {};\n    if (tree.children) {\n        tree.children.forEach(child => {\n            var name = child.tagName;\n            if (!name) {\n                return;\n            }\n            if (!(name in nameCount)) {\n                nameCount[name] = 0;\n            }\n            nameCount[name]++;\n\n            var path = `${prefix}/${name}[${nameCount[name]}]`;\n            var handlers = extractHandlers(child);\n            if (handlers) {\n                out[path] = handlers;\n            }\n            out = extend(out, flattenTree(child, path));\n        });\n    }\n    return out;\n}\n\n/**\n * Extracts events from given VTree\n * @param  {VNode} node\n * @return {Object}\n */\nfunction extractHandlers(node) {\n    var props = node.properties || {};\n    return Object.keys(props).reduce((handlers, name) => {\n        let nameLower = name.toLowerCase();\n        if (isEvent(nameLower)) {\n            if (!handlers) {\n                handlers = {};\n            }\n\n            if (typeof props[name] === 'function') {\n                handlers[nameLower.slice(2)] = props[name];\n            }\n\n            delete props[name];\n        }\n        return handlers;\n    }, null);\n}\n\n\nfunction isEvent(name) {\n    return name in _nameLookup;\n}\n\nfunction delegateEvent(event, root, xpathMap) {\n    var ctx = event.target;\n    var state = {};\n    var proxyEvent = {};\n    for (let key in event) {\n        proxyEvent[key] = event[key];\n    }\n    proxyEvent.constructor = event.constructor;\n    ['preventDefault', 'stopPropagation', 'stopImmediatePropagation'].forEach(fn => {\n        proxyEvent[fn] = () => {\n            state[fn] = true;\n            event[fn]();\n        };\n    });\n\n    while (ctx) {\n        let path = xpath.serialize(ctx, root);\n        if (path in xpathMap && event.type in xpathMap[path]) {\n            xpathMap[path][event.type].call(ctx, proxyEvent, ctx);\n        }\n        if (state.stopPropagation || ctx === root) {\n            break;\n        }\n        ctx = ctx.parentNode;\n    }\n}\n","/**\n * Dependency-free copy of `main-loop` module:\n * https://www.npmjs.com/package/main-loop\n */\n'use strict';\n\nconst delegateEvents = require('./event-delegator');\n\nmodule.exports = function(initialState, view, opts) {\n\topts = opts || {};\n\tvar currentState = null;\n\tvar create = opts.create;\n\tvar diff = opts.diff;\n\tvar patch = opts.patch;\n\tvar redrawScheduled = false;\n\n\tvar tree = opts.initialTree || view(initialState);\n\tvar events = delegateEvents(tree);\n\tvar target = opts.target || create(tree, opts);\n\tvar inRenderingTransaction = false;\n\tvar delegator = events(target);\n\n\tfunction update(state) {\n\t\tif (inRenderingTransaction) {\n\t\t\tlet err = new Error('Unexpected update occurred in loop.\\n We are currently rendering a view, you cant change state right now.');\n\t\t\terr.code = 'EINVALIDUPDATE';\n\t\t\terr.diff = state._diff;\n\t\t\tthrow err;\n\t\t}\n\n\t\tif (currentState === null && !redrawScheduled) {\n\t\t\tredrawScheduled = true;\n\t\t\tasap(redraw);\n\t\t}\n\n\t\tcurrentState = state;\n\t}\n\n\tfunction redraw() {\n\t\tredrawScheduled = false;\n\t\tif (currentState === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tinRenderingTransaction = true;\n\t\tvar newTree = view(currentState);\n\t\tvar events = delegateEvents(newTree);\n\n\t\tif (opts.createOnly) {\n\t\t\tinRenderingTransaction = false;\n\t\t\tcreate(newTree, opts);\n\t\t} else {\n\t\t\tvar patches = diff(tree, newTree, opts);\n\t\t\tinRenderingTransaction = false;\n\t\t\ttarget = patch(target, patches, opts);\n\t\t}\n\n\t\ttree = newTree;\n\n\t\tdelegator();\n\t\tdelegator = events(target);\n\n\t\tcurrentState = null;\n\t}\n\n\treturn {target, update};\n};\n\nfunction asap(fn) {\n\tif (typeof requestAnimationFrame === 'function') {\n\t\trequestAnimationFrame(fn);\n\t} else if (typeof process !== undefined && process.nextTick) {\n\t\tprocess.nextTick(fn);\n\t}\n}\n","/**\n * Main rendering util: schedules given component re-render on next\n * process tick or animation frame\n */\nconst vdom = require('virtual-dom');\nconst main = require('./main-loop');\n\nmodule.exports = function(component, state) {\n    var view = component.__tr && typeof component.__tr.render === 'function'\n        ? component.__tr.render\n        : component;\n    return main(state || {}, view, vdom);\n};\n","/**\n * Creates simplified XPath for given element and finds element by provided XPath\n */\n'use strict';\n\nmodule.exports.serialize = function(elem, root) {\n\troot = root || elem.ownerDocument;\n\tvar parts = [];\n\twhile (elem && elem !== root) {\n\t\tparts.unshift(`${nodeName(elem)}[${samePreviousSiblings(elem).length + 1}]`);\n\t\telem = elem.parentNode;\n\t}\n\treturn '/' + parts.join('/');\n};\n\nmodule.exports.find = function(xpath, ctx) {\n\tctx = ctx || document;\n\tlet parts = xpath.split('/').filter(Boolean);\n\twhile (parts.length) {\n\t\tlet n = parts.shift().split('[');\n\t\tlet name = n[0], index = n[1];\n\t\tctx = nodeByIndex(ctx.childNodes, name, parseInt(index, 10));\n\t\tif (!ctx) {\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn ctx;\n};\n\nfunction samePreviousSiblings(elem) {\n\tlet name = nodeName(elem);\n\tlet type = elem.nodeType;\n\tlet result = [];\n\twhile (elem = elem.previousSibling) {\n\t\tif (elem.nodeType === type && nodeName(elem) === name) {\n\t\t\tresult.push(elem);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nfunction nodeName(node) {\n\t// XXX might return different name for different node types\n\treturn node.nodeName;\n}\n\nfunction nodeByIndex(nodeset, name, index) {\n\tlet acc = 0;\n\tfor (let i = 0, il = nodeset.length; i < il; i++) {\n\t\tif (nodeName(nodeset[i]) === name && (index === ++acc)) {\n\t\t\treturn nodeset[i];\n\t\t}\n\t}\n}\n","var createElement = require(\"./vdom/create-element.js\")\n\nmodule.exports = createElement\n","var diff = require(\"./vtree/diff.js\")\n\nmodule.exports = diff\n","var h = require(\"./virtual-hyperscript/index.js\")\n\nmodule.exports = h\n","var diff = require(\"./diff.js\")\r\nvar patch = require(\"./patch.js\")\r\nvar h = require(\"./h.js\")\r\nvar create = require(\"./create-element.js\")\r\nvar VNode = require('./vnode/vnode.js')\r\nvar VText = require('./vnode/vtext.js')\r\n\r\nmodule.exports = {\r\n    diff: diff,\r\n    patch: patch,\r\n    h: h,\r\n    create: create,\r\n    VNode: VNode,\r\n    VText: VText\r\n}\r\n","/*!\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n * ECMAScript compliant, uniform cross-browser split method\n */\n\n/**\n * Splits a string into an array of strings using a regex or string separator. Matches of the\n * separator are not included in the result array. However, if `separator` is a regex that contains\n * capturing groups, backreferences are spliced into the result each time `separator` is matched.\n * Fixes browser bugs compared to the native `String.prototype.split` and can be used reliably\n * cross-browser.\n * @param {String} str String to split.\n * @param {RegExp|String} separator Regex or string to use for separating the string.\n * @param {Number} [limit] Maximum number of items to include in the result array.\n * @returns {Array} Array of substrings.\n * @example\n *\n * // Basic use\n * split('a b c d', ' ');\n * // -> ['a', 'b', 'c', 'd']\n *\n * // With limit\n * split('a b c d', ' ', 2);\n * // -> ['a', 'b']\n *\n * // Backreferences in result array\n * split('..word1 word2..', /([a-z]+)(\\d+)/i);\n * // -> ['..', 'word', '1', ' ', 'word', '2', '..']\n */\nmodule.exports = (function split(undef) {\n\n  var nativeSplit = String.prototype.split,\n    compliantExecNpcg = /()??/.exec(\"\")[1] === undef,\n    // NPCG: nonparticipating capturing group\n    self;\n\n  self = function(str, separator, limit) {\n    // If `separator` is not a regex, use `nativeSplit`\n    if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n      return nativeSplit.call(str, separator, limit);\n    }\n    var output = [],\n      flags = (separator.ignoreCase ? \"i\" : \"\") + (separator.multiline ? \"m\" : \"\") + (separator.extended ? \"x\" : \"\") + // Proposed for ES6\n      (separator.sticky ? \"y\" : \"\"),\n      // Firefox 3+\n      lastLastIndex = 0,\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      separator = new RegExp(separator.source, flags + \"g\"),\n      separator2, match, lastIndex, lastLength;\n    str += \"\"; // Type-convert\n    if (!compliantExecNpcg) {\n      // Doesn't need flags gy, but they don't hurt\n      separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n    }\n    /* Values for `limit`, per the spec:\n     * If undefined: 4294967295 // Math.pow(2, 32) - 1\n     * If 0, Infinity, or NaN: 0\n     * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n     * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n     * If other: Type-convert, then use the above rules\n     */\n    limit = limit === undef ? -1 >>> 0 : // Math.pow(2, 32) - 1\n    limit >>> 0; // ToUint32(limit)\n    while (match = separator.exec(str)) {\n      // `separator.lastIndex` is not reliable cross-browser\n      lastIndex = match.index + match[0].length;\n      if (lastIndex > lastLastIndex) {\n        output.push(str.slice(lastLastIndex, match.index));\n        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n        // nonparticipating capturing groups\n        if (!compliantExecNpcg && match.length > 1) {\n          match[0].replace(separator2, function() {\n            for (var i = 1; i < arguments.length - 2; i++) {\n              if (arguments[i] === undef) {\n                match[i] = undef;\n              }\n            }\n          });\n        }\n        if (match.length > 1 && match.index < str.length) {\n          Array.prototype.push.apply(output, match.slice(1));\n        }\n        lastLength = match[0].length;\n        lastLastIndex = lastIndex;\n        if (output.length >= limit) {\n          break;\n        }\n      }\n      if (separator.lastIndex === match.index) {\n        separator.lastIndex++; // Avoid an infinite loop\n      }\n    }\n    if (lastLastIndex === str.length) {\n      if (lastLength || !separator.test(\"\")) {\n        output.push(\"\");\n      }\n    } else {\n      output.push(str.slice(lastLastIndex));\n    }\n    return output.length > limit ? output.slice(0, limit) : output;\n  };\n\n  return self;\n})();\n","'use strict';\n\nvar OneVersionConstraint = require('individual/one-version');\n\nvar MY_VERSION = '7';\nOneVersionConstraint('ev-store', MY_VERSION);\n\nvar hashKey = '__EV_STORE_KEY@' + MY_VERSION;\n\nmodule.exports = EvStore;\n\nfunction EvStore(elem) {\n    var hash = elem[hashKey];\n\n    if (!hash) {\n        hash = elem[hashKey] = {};\n    }\n\n    return hash;\n}\n","'use strict';\n\n/*global window, global*/\n\nvar root = typeof window !== 'undefined' ?\n    window : typeof global !== 'undefined' ?\n    global : {};\n\nmodule.exports = Individual;\n\nfunction Individual(key, value) {\n    if (key in root) {\n        return root[key];\n    }\n\n    root[key] = value;\n\n    return value;\n}\n","'use strict';\n\nvar Individual = require('./index.js');\n\nmodule.exports = OneVersion;\n\nfunction OneVersion(moduleName, version, defaultValue) {\n    var key = '__INDIVIDUAL_ONE_VERSION_' + moduleName;\n    var enforceKey = key + '_ENFORCE_SINGLETON';\n\n    var versionValue = Individual(enforceKey, version);\n\n    if (versionValue !== version) {\n        throw new Error('Can only have one copy of ' +\n            moduleName + '.\\n' +\n            'You already have version ' + versionValue +\n            ' installed.\\n' +\n            'This means you cannot install version ' + version);\n    }\n\n    return Individual(key, defaultValue);\n}\n","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nif (typeof document !== 'undefined') {\n    module.exports = document;\n} else {\n    var doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n\n    module.exports = doccy;\n}\n","\"use strict\";\n\nmodule.exports = function isObject(x) {\n\treturn typeof x === \"object\" && x !== null;\n};\n","var nativeIsArray = Array.isArray\nvar toString = Object.prototype.toString\n\nmodule.exports = nativeIsArray || isArray\n\nfunction isArray(obj) {\n    return toString.call(obj) === \"[object Array]\"\n}\n","var patch = require(\"./vdom/patch.js\")\n\nmodule.exports = patch\n","var isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook.js\")\n\nmodule.exports = applyProperties\n\nfunction applyProperties(node, props, previous) {\n    for (var propName in props) {\n        var propValue = props[propName]\n\n        if (propValue === undefined) {\n            removeProperty(node, propName, propValue, previous);\n        } else if (isHook(propValue)) {\n            removeProperty(node, propName, propValue, previous)\n            if (propValue.hook) {\n                propValue.hook(node,\n                    propName,\n                    previous ? previous[propName] : undefined)\n            }\n        } else {\n            if (isObject(propValue)) {\n                patchObject(node, props, previous, propName, propValue);\n            } else {\n                node[propName] = propValue\n            }\n        }\n    }\n}\n\nfunction removeProperty(node, propName, propValue, previous) {\n    if (previous) {\n        var previousValue = previous[propName]\n\n        if (!isHook(previousValue)) {\n            if (propName === \"attributes\") {\n                for (var attrName in previousValue) {\n                    node.removeAttribute(attrName)\n                }\n            } else if (propName === \"style\") {\n                for (var i in previousValue) {\n                    node.style[i] = \"\"\n                }\n            } else if (typeof previousValue === \"string\") {\n                node[propName] = \"\"\n            } else {\n                node[propName] = null\n            }\n        } else if (previousValue.unhook) {\n            previousValue.unhook(node, propName, propValue)\n        }\n    }\n}\n\nfunction patchObject(node, props, previous, propName, propValue) {\n    var previousValue = previous ? previous[propName] : undefined\n\n    // Set attributes\n    if (propName === \"attributes\") {\n        for (var attrName in propValue) {\n            var attrValue = propValue[attrName]\n\n            if (attrValue === undefined) {\n                node.removeAttribute(attrName)\n            } else {\n                node.setAttribute(attrName, attrValue)\n            }\n        }\n\n        return\n    }\n\n    if(previousValue && isObject(previousValue) &&\n        getPrototype(previousValue) !== getPrototype(propValue)) {\n        node[propName] = propValue\n        return\n    }\n\n    if (!isObject(node[propName])) {\n        node[propName] = {}\n    }\n\n    var replacer = propName === \"style\" ? \"\" : undefined\n\n    for (var k in propValue) {\n        var value = propValue[k]\n        node[propName][k] = (value === undefined) ? replacer : value\n    }\n}\n\nfunction getPrototype(value) {\n    if (Object.getPrototypeOf) {\n        return Object.getPrototypeOf(value)\n    } else if (value.__proto__) {\n        return value.__proto__\n    } else if (value.constructor) {\n        return value.constructor.prototype\n    }\n}\n","var document = require(\"global/document\")\n\nvar applyProperties = require(\"./apply-properties\")\n\nvar isVNode = require(\"../vnode/is-vnode.js\")\nvar isVText = require(\"../vnode/is-vtext.js\")\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar handleThunk = require(\"../vnode/handle-thunk.js\")\n\nmodule.exports = createElement\n\nfunction createElement(vnode, opts) {\n    var doc = opts ? opts.document || document : document\n    var warn = opts ? opts.warn : null\n\n    vnode = handleThunk(vnode).a\n\n    if (isWidget(vnode)) {\n        return vnode.init()\n    } else if (isVText(vnode)) {\n        return doc.createTextNode(vnode.text)\n    } else if (!isVNode(vnode)) {\n        if (warn) {\n            warn(\"Item is not a valid virtual dom node\", vnode)\n        }\n        return null\n    }\n\n    var node = (vnode.namespace === null) ?\n        doc.createElement(vnode.tagName) :\n        doc.createElementNS(vnode.namespace, vnode.tagName)\n\n    var props = vnode.properties\n    applyProperties(node, props)\n\n    var children = vnode.children\n\n    for (var i = 0; i < children.length; i++) {\n        var childNode = createElement(children[i], opts)\n        if (childNode) {\n            node.appendChild(childNode)\n        }\n    }\n\n    return node\n}\n","// Maps a virtual DOM tree onto a real DOM tree in an efficient manner.\n// We don't want to read all of the DOM nodes in the tree so we use\n// the in-order tree indexing to eliminate recursion down certain branches.\n// We only recurse into a DOM node if we know that it contains a child of\n// interest.\n\nvar noChild = {}\n\nmodule.exports = domIndex\n\nfunction domIndex(rootNode, tree, indices, nodes) {\n    if (!indices || indices.length === 0) {\n        return {}\n    } else {\n        indices.sort(ascending)\n        return recurse(rootNode, tree, indices, nodes, 0)\n    }\n}\n\nfunction recurse(rootNode, tree, indices, nodes, rootIndex) {\n    nodes = nodes || {}\n\n\n    if (rootNode) {\n        if (indexInRange(indices, rootIndex, rootIndex)) {\n            nodes[rootIndex] = rootNode\n        }\n\n        var vChildren = tree.children\n\n        if (vChildren) {\n\n            var childNodes = rootNode.childNodes\n\n            for (var i = 0; i < tree.children.length; i++) {\n                rootIndex += 1\n\n                var vChild = vChildren[i] || noChild\n                var nextIndex = rootIndex + (vChild.count || 0)\n\n                // skip recursion down the tree if there are no nodes down here\n                if (indexInRange(indices, rootIndex, nextIndex)) {\n                    recurse(childNodes[i], vChild, indices, nodes, rootIndex)\n                }\n\n                rootIndex = nextIndex\n            }\n        }\n    }\n\n    return nodes\n}\n\n// Binary search for an index in the interval [left, right]\nfunction indexInRange(indices, left, right) {\n    if (indices.length === 0) {\n        return false\n    }\n\n    var minIndex = 0\n    var maxIndex = indices.length - 1\n    var currentIndex\n    var currentItem\n\n    while (minIndex <= maxIndex) {\n        currentIndex = ((maxIndex + minIndex) / 2) >> 0\n        currentItem = indices[currentIndex]\n\n        if (minIndex === maxIndex) {\n            return currentItem >= left && currentItem <= right\n        } else if (currentItem < left) {\n            minIndex = currentIndex + 1\n        } else  if (currentItem > right) {\n            maxIndex = currentIndex - 1\n        } else {\n            return true\n        }\n    }\n\n    return false;\n}\n\nfunction ascending(a, b) {\n    return a > b ? 1 : -1\n}\n","var applyProperties = require(\"./apply-properties\")\n\nvar isWidget = require(\"../vnode/is-widget.js\")\nvar VPatch = require(\"../vnode/vpatch.js\")\n\nvar updateWidget = require(\"./update-widget\")\n\nmodule.exports = applyPatch\n\nfunction applyPatch(vpatch, domNode, renderOptions) {\n    var type = vpatch.type\n    var vNode = vpatch.vNode\n    var patch = vpatch.patch\n\n    switch (type) {\n        case VPatch.REMOVE:\n            return removeNode(domNode, vNode)\n        case VPatch.INSERT:\n            return insertNode(domNode, patch, renderOptions)\n        case VPatch.VTEXT:\n            return stringPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.WIDGET:\n            return widgetPatch(domNode, vNode, patch, renderOptions)\n        case VPatch.VNODE:\n            return vNodePatch(domNode, vNode, patch, renderOptions)\n        case VPatch.ORDER:\n            reorderChildren(domNode, patch)\n            return domNode\n        case VPatch.PROPS:\n            applyProperties(domNode, patch, vNode.properties)\n            return domNode\n        case VPatch.THUNK:\n            return replaceRoot(domNode,\n                renderOptions.patch(domNode, patch, renderOptions))\n        default:\n            return domNode\n    }\n}\n\nfunction removeNode(domNode, vNode) {\n    var parentNode = domNode.parentNode\n\n    if (parentNode) {\n        parentNode.removeChild(domNode)\n    }\n\n    destroyWidget(domNode, vNode);\n\n    return null\n}\n\nfunction insertNode(parentNode, vNode, renderOptions) {\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode) {\n        parentNode.appendChild(newNode)\n    }\n\n    return parentNode\n}\n\nfunction stringPatch(domNode, leftVNode, vText, renderOptions) {\n    var newNode\n\n    if (domNode.nodeType === 3) {\n        domNode.replaceData(0, domNode.length, vText.text)\n        newNode = domNode\n    } else {\n        var parentNode = domNode.parentNode\n        newNode = renderOptions.render(vText, renderOptions)\n\n        if (parentNode && newNode !== domNode) {\n            parentNode.replaceChild(newNode, domNode)\n        }\n    }\n\n    return newNode\n}\n\nfunction widgetPatch(domNode, leftVNode, widget, renderOptions) {\n    var updating = updateWidget(leftVNode, widget)\n    var newNode\n\n    if (updating) {\n        newNode = widget.update(leftVNode, domNode) || domNode\n    } else {\n        newNode = renderOptions.render(widget, renderOptions)\n    }\n\n    var parentNode = domNode.parentNode\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    if (!updating) {\n        destroyWidget(domNode, leftVNode)\n    }\n\n    return newNode\n}\n\nfunction vNodePatch(domNode, leftVNode, vNode, renderOptions) {\n    var parentNode = domNode.parentNode\n    var newNode = renderOptions.render(vNode, renderOptions)\n\n    if (parentNode && newNode !== domNode) {\n        parentNode.replaceChild(newNode, domNode)\n    }\n\n    return newNode\n}\n\nfunction destroyWidget(domNode, w) {\n    if (typeof w.destroy === \"function\" && isWidget(w)) {\n        w.destroy(domNode)\n    }\n}\n\nfunction reorderChildren(domNode, moves) {\n    var childNodes = domNode.childNodes\n    var keyMap = {}\n    var node\n    var remove\n    var insert\n\n    for (var i = 0; i < moves.removes.length; i++) {\n        remove = moves.removes[i]\n        node = childNodes[remove.from]\n        if (remove.key) {\n            keyMap[remove.key] = node\n        }\n        domNode.removeChild(node)\n    }\n\n    var length = childNodes.length\n    for (var j = 0; j < moves.inserts.length; j++) {\n        insert = moves.inserts[j]\n        node = keyMap[insert.key]\n        // this is the weirdest bug i've ever seen in webkit\n        domNode.insertBefore(node, insert.to >= length++ ? null : childNodes[insert.to])\n    }\n}\n\nfunction replaceRoot(oldRoot, newRoot) {\n    if (oldRoot && newRoot && oldRoot !== newRoot && oldRoot.parentNode) {\n        oldRoot.parentNode.replaceChild(newRoot, oldRoot)\n    }\n\n    return newRoot;\n}\n","var document = require(\"global/document\")\nvar isArray = require(\"x-is-array\")\n\nvar render = require(\"./create-element\")\nvar domIndex = require(\"./dom-index\")\nvar patchOp = require(\"./patch-op\")\nmodule.exports = patch\n\nfunction patch(rootNode, patches, renderOptions) {\n    renderOptions = renderOptions || {}\n    renderOptions.patch = renderOptions.patch && renderOptions.patch !== patch\n        ? renderOptions.patch\n        : patchRecursive\n    renderOptions.render = renderOptions.render || render\n\n    return renderOptions.patch(rootNode, patches, renderOptions)\n}\n\nfunction patchRecursive(rootNode, patches, renderOptions) {\n    var indices = patchIndices(patches)\n\n    if (indices.length === 0) {\n        return rootNode\n    }\n\n    var index = domIndex(rootNode, patches.a, indices)\n    var ownerDocument = rootNode.ownerDocument\n\n    if (!renderOptions.document && ownerDocument !== document) {\n        renderOptions.document = ownerDocument\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n        var nodeIndex = indices[i]\n        rootNode = applyPatch(rootNode,\n            index[nodeIndex],\n            patches[nodeIndex],\n            renderOptions)\n    }\n\n    return rootNode\n}\n\nfunction applyPatch(rootNode, domNode, patchList, renderOptions) {\n    if (!domNode) {\n        return rootNode\n    }\n\n    var newNode\n\n    if (isArray(patchList)) {\n        for (var i = 0; i < patchList.length; i++) {\n            newNode = patchOp(patchList[i], domNode, renderOptions)\n\n            if (domNode === rootNode) {\n                rootNode = newNode\n            }\n        }\n    } else {\n        newNode = patchOp(patchList, domNode, renderOptions)\n\n        if (domNode === rootNode) {\n            rootNode = newNode\n        }\n    }\n\n    return rootNode\n}\n\nfunction patchIndices(patches) {\n    var indices = []\n\n    for (var key in patches) {\n        if (key !== \"a\") {\n            indices.push(Number(key))\n        }\n    }\n\n    return indices\n}\n","var isWidget = require(\"../vnode/is-widget.js\")\n\nmodule.exports = updateWidget\n\nfunction updateWidget(a, b) {\n    if (isWidget(a) && isWidget(b)) {\n        if (\"name\" in a && \"name\" in b) {\n            return a.id === b.id\n        } else {\n            return a.init === b.init\n        }\n    }\n\n    return false\n}\n","'use strict';\n\nvar EvStore = require('ev-store');\n\nmodule.exports = EvHook;\n\nfunction EvHook(value) {\n    if (!(this instanceof EvHook)) {\n        return new EvHook(value);\n    }\n\n    this.value = value;\n}\n\nEvHook.prototype.hook = function (node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = this.value;\n};\n\nEvHook.prototype.unhook = function(node, propertyName) {\n    var es = EvStore(node);\n    var propName = propertyName.substr(3);\n\n    es[propName] = undefined;\n};\n","'use strict';\n\nmodule.exports = SoftSetHook;\n\nfunction SoftSetHook(value) {\n    if (!(this instanceof SoftSetHook)) {\n        return new SoftSetHook(value);\n    }\n\n    this.value = value;\n}\n\nSoftSetHook.prototype.hook = function (node, propertyName) {\n    if (node[propertyName] !== this.value) {\n        node[propertyName] = this.value;\n    }\n};\n","'use strict';\n\nvar isArray = require('x-is-array');\n\nvar VNode = require('../vnode/vnode.js');\nvar VText = require('../vnode/vtext.js');\nvar isVNode = require('../vnode/is-vnode');\nvar isVText = require('../vnode/is-vtext');\nvar isWidget = require('../vnode/is-widget');\nvar isHook = require('../vnode/is-vhook');\nvar isVThunk = require('../vnode/is-thunk');\n\nvar parseTag = require('./parse-tag.js');\nvar softSetHook = require('./hooks/soft-set-hook.js');\nvar evHook = require('./hooks/ev-hook.js');\n\nmodule.exports = h;\n\nfunction h(tagName, properties, children) {\n    var childNodes = [];\n    var tag, props, key, namespace;\n\n    if (!children && isChildren(properties)) {\n        children = properties;\n        props = {};\n    }\n\n    props = props || properties || {};\n    tag = parseTag(tagName, props);\n\n    // support keys\n    if (props.hasOwnProperty('key')) {\n        key = props.key;\n        props.key = undefined;\n    }\n\n    // support namespace\n    if (props.hasOwnProperty('namespace')) {\n        namespace = props.namespace;\n        props.namespace = undefined;\n    }\n\n    // fix cursor bug\n    if (tag === 'INPUT' &&\n        !namespace &&\n        props.hasOwnProperty('value') &&\n        props.value !== undefined &&\n        !isHook(props.value)\n    ) {\n        props.value = softSetHook(props.value);\n    }\n\n    transformProperties(props);\n\n    if (children !== undefined && children !== null) {\n        addChild(children, childNodes, tag, props);\n    }\n\n\n    return new VNode(tag, props, childNodes, key, namespace);\n}\n\nfunction addChild(c, childNodes, tag, props) {\n    if (typeof c === 'string') {\n        childNodes.push(new VText(c));\n    } else if (typeof c === 'number') {\n        childNodes.push(new VText(String(c)));\n    } else if (isChild(c)) {\n        childNodes.push(c);\n    } else if (isArray(c)) {\n        for (var i = 0; i < c.length; i++) {\n            addChild(c[i], childNodes, tag, props);\n        }\n    } else if (c === null || c === undefined) {\n        return;\n    } else {\n        throw UnexpectedVirtualElement({\n            foreignObject: c,\n            parentVnode: {\n                tagName: tag,\n                properties: props\n            }\n        });\n    }\n}\n\nfunction transformProperties(props) {\n    for (var propName in props) {\n        if (props.hasOwnProperty(propName)) {\n            var value = props[propName];\n\n            if (isHook(value)) {\n                continue;\n            }\n\n            if (propName.substr(0, 3) === 'ev-') {\n                // add ev-foo support\n                props[propName] = evHook(value);\n            }\n        }\n    }\n}\n\nfunction isChild(x) {\n    return isVNode(x) || isVText(x) || isWidget(x) || isVThunk(x);\n}\n\nfunction isChildren(x) {\n    return typeof x === 'string' || isArray(x) || isChild(x);\n}\n\nfunction UnexpectedVirtualElement(data) {\n    var err = new Error();\n\n    err.type = 'virtual-hyperscript.unexpected.virtual-element';\n    err.message = 'Unexpected virtual child passed to h().\\n' +\n        'Expected a VNode / Vthunk / VWidget / string but:\\n' +\n        'got:\\n' +\n        errorString(data.foreignObject) +\n        '.\\n' +\n        'The parent vnode is:\\n' +\n        errorString(data.parentVnode)\n        '\\n' +\n        'Suggested fix: change your `h(..., [ ... ])` callsite.';\n    err.foreignObject = data.foreignObject;\n    err.parentVnode = data.parentVnode;\n\n    return err;\n}\n\nfunction errorString(obj) {\n    try {\n        return JSON.stringify(obj, null, '    ');\n    } catch (e) {\n        return String(obj);\n    }\n}\n","'use strict';\n\nvar split = require('browser-split');\n\nvar classIdSplit = /([\\.#]?[a-zA-Z0-9\\u007F-\\uFFFF_:-]+)/;\nvar notClassId = /^\\.|#/;\n\nmodule.exports = parseTag;\n\nfunction parseTag(tag, props) {\n    if (!tag) {\n        return 'DIV';\n    }\n\n    var noId = !(props.hasOwnProperty('id'));\n\n    var tagParts = split(tag, classIdSplit);\n    var tagName = null;\n\n    if (notClassId.test(tagParts[1])) {\n        tagName = 'DIV';\n    }\n\n    var classes, part, type, i;\n\n    for (i = 0; i < tagParts.length; i++) {\n        part = tagParts[i];\n\n        if (!part) {\n            continue;\n        }\n\n        type = part.charAt(0);\n\n        if (!tagName) {\n            tagName = part;\n        } else if (type === '.') {\n            classes = classes || [];\n            classes.push(part.substring(1, part.length));\n        } else if (type === '#' && noId) {\n            props.id = part.substring(1, part.length);\n        }\n    }\n\n    if (classes) {\n        if (props.className) {\n            classes.push(props.className);\n        }\n\n        props.className = classes.join(' ');\n    }\n\n    return props.namespace ? tagName : tagName.toUpperCase();\n}\n","var isVNode = require(\"./is-vnode\")\nvar isVText = require(\"./is-vtext\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\n\nmodule.exports = handleThunk\n\nfunction handleThunk(a, b) {\n    var renderedA = a\n    var renderedB = b\n\n    if (isThunk(b)) {\n        renderedB = renderThunk(b, a)\n    }\n\n    if (isThunk(a)) {\n        renderedA = renderThunk(a, null)\n    }\n\n    return {\n        a: renderedA,\n        b: renderedB\n    }\n}\n\nfunction renderThunk(thunk, previous) {\n    var renderedThunk = thunk.vnode\n\n    if (!renderedThunk) {\n        renderedThunk = thunk.vnode = thunk.render(previous)\n    }\n\n    if (!(isVNode(renderedThunk) ||\n            isVText(renderedThunk) ||\n            isWidget(renderedThunk))) {\n        throw new Error(\"thunk did not return a valid node\");\n    }\n\n    return renderedThunk\n}\n","module.exports = isThunk\r\n\r\nfunction isThunk(t) {\r\n    return t && t.type === \"Thunk\"\r\n}\r\n","module.exports = isHook\n\nfunction isHook(hook) {\n    return hook &&\n      (typeof hook.hook === \"function\" && !hook.hasOwnProperty(\"hook\") ||\n       typeof hook.unhook === \"function\" && !hook.hasOwnProperty(\"unhook\"))\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualNode\n\nfunction isVirtualNode(x) {\n    return x && x.type === \"VirtualNode\" && x.version === version\n}\n","var version = require(\"./version\")\n\nmodule.exports = isVirtualText\n\nfunction isVirtualText(x) {\n    return x && x.type === \"VirtualText\" && x.version === version\n}\n","module.exports = isWidget\n\nfunction isWidget(w) {\n    return w && w.type === \"Widget\"\n}\n","module.exports = \"2\"\n","var version = require(\"./version\")\nvar isVNode = require(\"./is-vnode\")\nvar isWidget = require(\"./is-widget\")\nvar isThunk = require(\"./is-thunk\")\nvar isVHook = require(\"./is-vhook\")\n\nmodule.exports = VirtualNode\n\nvar noProperties = {}\nvar noChildren = []\n\nfunction VirtualNode(tagName, properties, children, key, namespace) {\n    this.tagName = tagName\n    this.properties = properties || noProperties\n    this.children = children || noChildren\n    this.key = key != null ? String(key) : undefined\n    this.namespace = (typeof namespace === \"string\") ? namespace : null\n\n    var count = (children && children.length) || 0\n    var descendants = 0\n    var hasWidgets = false\n    var hasThunks = false\n    var descendantHooks = false\n    var hooks\n\n    for (var propName in properties) {\n        if (properties.hasOwnProperty(propName)) {\n            var property = properties[propName]\n            if (isVHook(property) && property.unhook) {\n                if (!hooks) {\n                    hooks = {}\n                }\n\n                hooks[propName] = property\n            }\n        }\n    }\n\n    for (var i = 0; i < count; i++) {\n        var child = children[i]\n        if (isVNode(child)) {\n            descendants += child.count || 0\n\n            if (!hasWidgets && child.hasWidgets) {\n                hasWidgets = true\n            }\n\n            if (!hasThunks && child.hasThunks) {\n                hasThunks = true\n            }\n\n            if (!descendantHooks && (child.hooks || child.descendantHooks)) {\n                descendantHooks = true\n            }\n        } else if (!hasWidgets && isWidget(child)) {\n            if (typeof child.destroy === \"function\") {\n                hasWidgets = true\n            }\n        } else if (!hasThunks && isThunk(child)) {\n            hasThunks = true;\n        }\n    }\n\n    this.count = count + descendants\n    this.hasWidgets = hasWidgets\n    this.hasThunks = hasThunks\n    this.hooks = hooks\n    this.descendantHooks = descendantHooks\n}\n\nVirtualNode.prototype.version = version\nVirtualNode.prototype.type = \"VirtualNode\"\n","var version = require(\"./version\")\n\nVirtualPatch.NONE = 0\nVirtualPatch.VTEXT = 1\nVirtualPatch.VNODE = 2\nVirtualPatch.WIDGET = 3\nVirtualPatch.PROPS = 4\nVirtualPatch.ORDER = 5\nVirtualPatch.INSERT = 6\nVirtualPatch.REMOVE = 7\nVirtualPatch.THUNK = 8\n\nmodule.exports = VirtualPatch\n\nfunction VirtualPatch(type, vNode, patch) {\n    this.type = Number(type)\n    this.vNode = vNode\n    this.patch = patch\n}\n\nVirtualPatch.prototype.version = version\nVirtualPatch.prototype.type = \"VirtualPatch\"\n","var version = require(\"./version\")\n\nmodule.exports = VirtualText\n\nfunction VirtualText(text) {\n    this.text = String(text)\n}\n\nVirtualText.prototype.version = version\nVirtualText.prototype.type = \"VirtualText\"\n","var isObject = require(\"is-object\")\nvar isHook = require(\"../vnode/is-vhook\")\n\nmodule.exports = diffProps\n\nfunction diffProps(a, b) {\n    var diff\n\n    for (var aKey in a) {\n        if (!(aKey in b)) {\n            diff = diff || {}\n            diff[aKey] = undefined\n        }\n\n        var aValue = a[aKey]\n        var bValue = b[aKey]\n\n        if (aValue === bValue) {\n            continue\n        } else if (isObject(aValue) && isObject(bValue)) {\n            if (getPrototype(bValue) !== getPrototype(aValue)) {\n                diff = diff || {}\n                diff[aKey] = bValue\n            } else if (isHook(bValue)) {\n                 diff = diff || {}\n                 diff[aKey] = bValue\n            } else {\n                var objectDiff = diffProps(aValue, bValue)\n                if (objectDiff) {\n                    diff = diff || {}\n                    diff[aKey] = objectDiff\n                }\n            }\n        } else {\n            diff = diff || {}\n            diff[aKey] = bValue\n        }\n    }\n\n    for (var bKey in b) {\n        if (!(bKey in a)) {\n            diff = diff || {}\n            diff[bKey] = b[bKey]\n        }\n    }\n\n    return diff\n}\n\nfunction getPrototype(value) {\n  if (Object.getPrototypeOf) {\n    return Object.getPrototypeOf(value)\n  } else if (value.__proto__) {\n    return value.__proto__\n  } else if (value.constructor) {\n    return value.constructor.prototype\n  }\n}\n","var isArray = require(\"x-is-array\")\n\nvar VPatch = require(\"../vnode/vpatch\")\nvar isVNode = require(\"../vnode/is-vnode\")\nvar isVText = require(\"../vnode/is-vtext\")\nvar isWidget = require(\"../vnode/is-widget\")\nvar isThunk = require(\"../vnode/is-thunk\")\nvar handleThunk = require(\"../vnode/handle-thunk\")\n\nvar diffProps = require(\"./diff-props\")\n\nmodule.exports = diff\n\nfunction diff(a, b) {\n    var patch = { a: a }\n    walk(a, b, patch, 0)\n    return patch\n}\n\nfunction walk(a, b, patch, index) {\n    if (a === b) {\n        return\n    }\n\n    var apply = patch[index]\n    var applyClear = false\n\n    if (isThunk(a) || isThunk(b)) {\n        thunks(a, b, patch, index)\n    } else if (b == null) {\n\n        // If a is a widget we will add a remove patch for it\n        // Otherwise any child widgets/hooks must be destroyed.\n        // This prevents adding two remove patches for a widget.\n        if (!isWidget(a)) {\n            clearState(a, patch, index)\n            apply = patch[index]\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.REMOVE, a, b))\n    } else if (isVNode(b)) {\n        if (isVNode(a)) {\n            if (a.tagName === b.tagName &&\n                a.namespace === b.namespace &&\n                a.key === b.key) {\n                var propsPatch = diffProps(a.properties, b.properties)\n                if (propsPatch) {\n                    apply = appendPatch(apply,\n                        new VPatch(VPatch.PROPS, a, propsPatch))\n                }\n                apply = diffChildren(a, b, patch, apply, index)\n            } else {\n                apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n                applyClear = true\n            }\n        } else {\n            apply = appendPatch(apply, new VPatch(VPatch.VNODE, a, b))\n            applyClear = true\n        }\n    } else if (isVText(b)) {\n        if (!isVText(a)) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n            applyClear = true\n        } else if (a.text !== b.text) {\n            apply = appendPatch(apply, new VPatch(VPatch.VTEXT, a, b))\n        }\n    } else if (isWidget(b)) {\n        if (!isWidget(a)) {\n            applyClear = true\n        }\n\n        apply = appendPatch(apply, new VPatch(VPatch.WIDGET, a, b))\n    }\n\n    if (apply) {\n        patch[index] = apply\n    }\n\n    if (applyClear) {\n        clearState(a, patch, index)\n    }\n}\n\nfunction diffChildren(a, b, patch, apply, index) {\n    var aChildren = a.children\n    var orderedSet = reorder(aChildren, b.children)\n    var bChildren = orderedSet.children\n\n    var aLen = aChildren.length\n    var bLen = bChildren.length\n    var len = aLen > bLen ? aLen : bLen\n\n    for (var i = 0; i < len; i++) {\n        var leftNode = aChildren[i]\n        var rightNode = bChildren[i]\n        index += 1\n\n        if (!leftNode) {\n            if (rightNode) {\n                // Excess nodes in b need to be added\n                apply = appendPatch(apply,\n                    new VPatch(VPatch.INSERT, null, rightNode))\n            }\n        } else {\n            walk(leftNode, rightNode, patch, index)\n        }\n\n        if (isVNode(leftNode) && leftNode.count) {\n            index += leftNode.count\n        }\n    }\n\n    if (orderedSet.moves) {\n        // Reorder nodes last\n        apply = appendPatch(apply, new VPatch(\n            VPatch.ORDER,\n            a,\n            orderedSet.moves\n        ))\n    }\n\n    return apply\n}\n\nfunction clearState(vNode, patch, index) {\n    // TODO: Make this a single walk, not two\n    unhook(vNode, patch, index)\n    destroyWidgets(vNode, patch, index)\n}\n\n// Patch records for all destroyed widgets must be added because we need\n// a DOM node reference for the destroy function\nfunction destroyWidgets(vNode, patch, index) {\n    if (isWidget(vNode)) {\n        if (typeof vNode.destroy === \"function\") {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(VPatch.REMOVE, vNode, null)\n            )\n        }\n    } else if (isVNode(vNode) && (vNode.hasWidgets || vNode.hasThunks)) {\n        var children = vNode.children\n        var len = children.length\n        for (var i = 0; i < len; i++) {\n            var child = children[i]\n            index += 1\n\n            destroyWidgets(child, patch, index)\n\n            if (isVNode(child) && child.count) {\n                index += child.count\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\n// Create a sub-patch for thunks\nfunction thunks(a, b, patch, index) {\n    var nodes = handleThunk(a, b)\n    var thunkPatch = diff(nodes.a, nodes.b)\n    if (hasPatches(thunkPatch)) {\n        patch[index] = new VPatch(VPatch.THUNK, null, thunkPatch)\n    }\n}\n\nfunction hasPatches(patch) {\n    for (var index in patch) {\n        if (index !== \"a\") {\n            return true\n        }\n    }\n\n    return false\n}\n\n// Execute hooks when two nodes are identical\nfunction unhook(vNode, patch, index) {\n    if (isVNode(vNode)) {\n        if (vNode.hooks) {\n            patch[index] = appendPatch(\n                patch[index],\n                new VPatch(\n                    VPatch.PROPS,\n                    vNode,\n                    undefinedKeys(vNode.hooks)\n                )\n            )\n        }\n\n        if (vNode.descendantHooks || vNode.hasThunks) {\n            var children = vNode.children\n            var len = children.length\n            for (var i = 0; i < len; i++) {\n                var child = children[i]\n                index += 1\n\n                unhook(child, patch, index)\n\n                if (isVNode(child) && child.count) {\n                    index += child.count\n                }\n            }\n        }\n    } else if (isThunk(vNode)) {\n        thunks(vNode, null, patch, index)\n    }\n}\n\nfunction undefinedKeys(obj) {\n    var result = {}\n\n    for (var key in obj) {\n        result[key] = undefined\n    }\n\n    return result\n}\n\n// List diff, naive left to right reordering\nfunction reorder(aChildren, bChildren) {\n    // O(M) time, O(M) memory\n    var bChildIndex = keyIndex(bChildren)\n    var bKeys = bChildIndex.keys\n    var bFree = bChildIndex.free\n\n    if (bFree.length === bChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(N) time, O(N) memory\n    var aChildIndex = keyIndex(aChildren)\n    var aKeys = aChildIndex.keys\n    var aFree = aChildIndex.free\n\n    if (aFree.length === aChildren.length) {\n        return {\n            children: bChildren,\n            moves: null\n        }\n    }\n\n    // O(MAX(N, M)) memory\n    var newChildren = []\n\n    var freeIndex = 0\n    var freeCount = bFree.length\n    var deletedItems = 0\n\n    // Iterate through a and match a node in b\n    // O(N) time,\n    for (var i = 0 ; i < aChildren.length; i++) {\n        var aItem = aChildren[i]\n        var itemIndex\n\n        if (aItem.key) {\n            if (bKeys.hasOwnProperty(aItem.key)) {\n                // Match up the old keys\n                itemIndex = bKeys[aItem.key]\n                newChildren.push(bChildren[itemIndex])\n\n            } else {\n                // Remove old keyed items\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        } else {\n            // Match the item in a with the next free item in b\n            if (freeIndex < freeCount) {\n                itemIndex = bFree[freeIndex++]\n                newChildren.push(bChildren[itemIndex])\n            } else {\n                // There are no free items in b to match with\n                // the free items in a, so the extra free nodes\n                // are deleted.\n                itemIndex = i - deletedItems++\n                newChildren.push(null)\n            }\n        }\n    }\n\n    var lastFreeIndex = freeIndex >= bFree.length ?\n        bChildren.length :\n        bFree[freeIndex]\n\n    // Iterate through b and append any new keys\n    // O(M) time\n    for (var j = 0; j < bChildren.length; j++) {\n        var newItem = bChildren[j]\n\n        if (newItem.key) {\n            if (!aKeys.hasOwnProperty(newItem.key)) {\n                // Add any new keyed items\n                // We are adding new items to the end and then sorting them\n                // in place. In future we should insert new items in place.\n                newChildren.push(newItem)\n            }\n        } else if (j >= lastFreeIndex) {\n            // Add any leftover non-keyed items\n            newChildren.push(newItem)\n        }\n    }\n\n    var simulate = newChildren.slice()\n    var simulateIndex = 0\n    var removes = []\n    var inserts = []\n    var simulateItem\n\n    for (var k = 0; k < bChildren.length;) {\n        var wantedItem = bChildren[k]\n        simulateItem = simulate[simulateIndex]\n\n        // remove items\n        while (simulateItem === null && simulate.length) {\n            removes.push(remove(simulate, simulateIndex, null))\n            simulateItem = simulate[simulateIndex]\n        }\n\n        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n            // if we need a key in this position...\n            if (wantedItem.key) {\n                if (simulateItem && simulateItem.key) {\n                    // if an insert doesn't put this key in place, it needs to move\n                    if (bKeys[simulateItem.key] !== k + 1) {\n                        removes.push(remove(simulate, simulateIndex, simulateItem.key))\n                        simulateItem = simulate[simulateIndex]\n                        // if the remove didn't put the wanted item in place, we need to insert it\n                        if (!simulateItem || simulateItem.key !== wantedItem.key) {\n                            inserts.push({key: wantedItem.key, to: k})\n                        }\n                        // items are matching, so skip ahead\n                        else {\n                            simulateIndex++\n                        }\n                    }\n                    else {\n                        inserts.push({key: wantedItem.key, to: k})\n                    }\n                }\n                else {\n                    inserts.push({key: wantedItem.key, to: k})\n                }\n                k++\n            }\n            // a key in simulate has no matching wanted key, remove it\n            else if (simulateItem && simulateItem.key) {\n                removes.push(remove(simulate, simulateIndex, simulateItem.key))\n            }\n        }\n        else {\n            simulateIndex++\n            k++\n        }\n    }\n\n    // remove all the remaining nodes from simulate\n    while(simulateIndex < simulate.length) {\n        simulateItem = simulate[simulateIndex]\n        removes.push(remove(simulate, simulateIndex, simulateItem && simulateItem.key))\n    }\n\n    // If the only moves we have are deletes then we can just\n    // let the delete patch remove these items.\n    if (removes.length === deletedItems && !inserts.length) {\n        return {\n            children: newChildren,\n            moves: null\n        }\n    }\n\n    return {\n        children: newChildren,\n        moves: {\n            removes: removes,\n            inserts: inserts\n        }\n    }\n}\n\nfunction remove(arr, index, key) {\n    arr.splice(index, 1)\n\n    return {\n        from: index,\n        key: key\n    }\n}\n\nfunction keyIndex(children) {\n    var keys = {}\n    var free = []\n    var length = children.length\n\n    for (var i = 0; i < length; i++) {\n        var child = children[i]\n\n        if (child.key) {\n            keys[child.key] = i\n        } else {\n            free.push(i)\n        }\n    }\n\n    return {\n        keys: keys,     // A hash of key name to index\n        free: free      // An array of unkeyed item indices\n    }\n}\n\nfunction appendPatch(apply, patch) {\n    if (apply) {\n        if (isArray(apply)) {\n            apply.push(patch)\n        } else {\n            apply = [apply, patch]\n        }\n\n        return apply\n    } else {\n        return patch\n    }\n}\n","\nvar rng;\n\nif (global.crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n"],"sourceRoot":"/source/"}